

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>doctest &mdash; Python Standard Library Doc</title>
  

  
  
    <link rel="shortcut icon" href="../_static/py.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Python Standard Library Doc" href="../index.html"/>
        <link rel="up" title="Module code" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Python Standard Library Doc
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../01to05.html">Ch 01 - 05</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../01_intro/01.html">01 Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_builtin_functions/02.html">02 Built-in Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../02_builtin_functions/02.html#summary-table">Summary Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../02_builtin_functions/02.html#a-e">a-e</a></li>
<li class="toctree-l3"><a class="reference internal" href="../02_builtin_functions/02.html#e-g">e-g</a></li>
<li class="toctree-l3"><a class="reference internal" href="../02_builtin_functions/02.html#h-i">h-i</a></li>
<li class="toctree-l3"><a class="reference internal" href="../02_builtin_functions/02.html#l-o">l-o</a></li>
<li class="toctree-l3"><a class="reference internal" href="../02_builtin_functions/02.html#p-r">p-r</a></li>
<li class="toctree-l3"><a class="reference internal" href="../02_builtin_functions/02.html#s-z">s-z</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../03_builtin_func_nonessential/03.html">03 Non-essential Built-in Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04_builtin_constants/04.html">04 Built-in Constants</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../04_builtin_constants/04.html#constants-added-by-the-site-module">Constants added by the <code class="docutils literal"><span class="pre">site</span></code> module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../05_builtin_types/05.html">05 Built-in Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../05_builtin_types/truth_value.html">1. Truth Value Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05_builtin_types/boolean.html">2. Boolean Operations &#8212; <code class="docutils literal"><span class="pre">and</span></code>, <code class="docutils literal"><span class="pre">or</span></code>, <code class="docutils literal"><span class="pre">not</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../05_builtin_types/comparison.html">3. Comparisons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05_builtin_types/numeric_types.html">4. Numeric Types &#8212; <code class="docutils literal"><span class="pre">int</span></code>, <code class="docutils literal"><span class="pre">float</span></code>, <code class="docutils literal"><span class="pre">long</span></code>, <code class="docutils literal"><span class="pre">complex</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/numeric_types.html#bitwise-operations-on-integer-types">4.1. Bitwise Operations on Integer Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/numeric_types.html#additional-methods-on-integer-types">4.2. Additional Methods on Integer Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/numeric_types.html#additional-methods-on-float">4.3. Additional Methods on Float</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../05_builtin_types/iterator_types.html">5. Iterator Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/iterator_types.html#generator-types">5.1. Generator Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../05_builtin_types/seq_types.html">6. Sequence Types &#8212; <code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">unicode</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code>, <code class="docutils literal"><span class="pre">bytearray</span></code>, <code class="docutils literal"><span class="pre">buffer</span></code>, <code class="docutils literal"><span class="pre">xrange</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/seq_types.html#string-methods">6.1. String Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/seq_types.html#string-formatting-operations">6.2. String Formatting Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/seq_types.html#xrange-type">6.3. XRange Type</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/seq_types.html#mutable-sequence-types">6.4. Mutable Sequence Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../05_builtin_types/set_types.html">7. Set Types &#8212; <code class="docutils literal"><span class="pre">set</span></code>, <code class="docutils literal"><span class="pre">frozenset</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../05_builtin_types/mapping_types.html">8. Mapping Types &#8212; <code class="docutils literal"><span class="pre">dict</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/mapping_types.html#dictionary-view-objects">8.1. Dictionary view objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../05_builtin_types/file_objects.html">9. File Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05_builtin_types/memory_view.html">10. memoryview type</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05_builtin_types/context_manager.html">11. Context Manager Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05_builtin_types/other_tyeps.html">12. Other Built-in Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/other_tyeps.html#modules">12.1. Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/other_tyeps.html#classes-and-class-instances">12.2. Classes and Class Instances</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/other_tyeps.html#functions">12.3. Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/other_tyeps.html#methods">12.4. Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/other_tyeps.html#code-objects">12.5. Code Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/other_tyeps.html#type-objects">12.6. Type Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/other_tyeps.html#the-null-object">12.7. The Null Object</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/other_tyeps.html#the-ellipsis-object">12.8. The Ellipsis Object</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/other_tyeps.html#the-notimplemented-object">12.9. The NotImplemented Object</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/other_tyeps.html#boolean-values">12.10. Boolean Values</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05_builtin_types/other_tyeps.html#internal-objects">12.11. Internal Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../05_builtin_types/special_attr.html">13. Special Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../06to10.html">Ch 06 - 10</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../06_exceptions/06.html">06 Built-in Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../06_exceptions/06.html#exception-hierarchy">Exception hierarchy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../07_string_services/7.html">07. String Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../07_string_services/7.1.string.html">1. <code class="docutils literal"><span class="pre">string</span></code> &#8212; Common string operations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.1.string.html#string-constants">1.1. String constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.1.string.html#custom-string-formatting">1.2. Custom String Formatting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.1.string.html#format-string-syntax">1.3. Format String Syntax</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.1.string.html#format-specification-mini-language">1.3.1. Format Specification Mini-Language</a></li>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.1.string.html#format-examples">1.3.2. Format examples</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.1.string.html#template-strings">1.4. Template strings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.1.string.html#string-functions">1.5. String functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.1.string.html#deprecated-string-functions">1.6. Deprecated string functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../07_string_services/7.2.re.html">2. <code class="docutils literal"><span class="pre">re</span></code> &#8212; Regular expression operations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.2.re.html#regular-expression-syntax">2.1. Regular Expression Syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.2.re.html#module-contents">2.2. Module Contents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.2.re.html#regular-expression-objects">2.3. Regular Expression Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.2.re.html#match-objects">2.4. Match Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.2.re.html#examples">2.5. Examples</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.2.re.html#checking-for-a-pair">2.5.1. Checking For a Pair</a></li>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.2.re.html#simulating-scanf">2.5.2. Simulating scanf()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.2.re.html#search-vs-match">2.5.3. search() vs. match()</a></li>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.2.re.html#making-a-phonebook">2.5.4. Making a Phonebook</a></li>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.2.re.html#text-munging">2.5.5. Text Munging</a></li>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.2.re.html#finding-all-adverbs">2.5.6. Finding all Adverbs</a></li>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.2.re.html#finding-all-adverbs-and-their-positions">2.5.7. Finding all Adverbs and their Positions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.2.re.html#raw-string-notation">2.5.8. Raw String Notation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../07_string_services/7.3.struct.html">3. <code class="docutils literal"><span class="pre">struct</span></code> &#8212; Interpret strings as packed binary data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.3.struct.html#functions-and-exceptions">3.1. Functions and Exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.3.struct.html#format-strings">3.2. Format Strings</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.3.struct.html#byte-order-size-and-alignment">3.2.1. Byte Order, Size, and Alignment</a></li>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.3.struct.html#format-characters">3.2.2. Format Characters</a></li>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.3.struct.html#examples">3.2.3. Examples</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.3.struct.html#classes">3.3. Classes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../07_string_services/7.4.difflib.html">4. <code class="docutils literal"><span class="pre">difflib</span></code> &#8212; Helpers for computing deltas</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.4.difflib.html#sequencematcher-objects">4.1. SequenceMatcher Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.4.difflib.html#sequencematcher-examples">4.2. SequenceMatcher Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.4.difflib.html#differ-objects">4.3. Differ Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.4.difflib.html#differ-example">4.4. Differ Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.4.difflib.html#a-command-line-interface-to-difflib">4.5. A command-line interface to difflib</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../07_string_services/7.5.stringio.html">5. <code class="docutils literal"><span class="pre">StringIO</span></code> &#8212; Read and write strings as files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07_string_services/7.6.cstringio.html">6. <code class="docutils literal"><span class="pre">cStringIO</span></code> &#8212; Faster version of <code class="docutils literal"><span class="pre">StringIO</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../07_string_services/7.7.textwrap.html">7. <code class="docutils literal"><span class="pre">textwrap</span></code> &#8212; Text wrapping and filling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07_string_services/7.8.codecs.html">8. <code class="docutils literal"><span class="pre">codecs</span></code> &#8212; Codec registry and base classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.8.codecs.html#codec-base-classes">8.1. Codec Base Classes</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.8.codecs.html#codec-objects">8.1.1. Codec Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.8.codecs.html#incrementalencoder-objects">8.1.2. IncrementalEncoder Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.8.codecs.html#incrementaldecoder-objects">8.1.3. IncrementalDecoder Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.8.codecs.html#streamwriter-objects">8.1.4. StreamWriter Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.8.codecs.html#streamreader-objects">8.1.5. StreamReader Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.8.codecs.html#streamreaderwriter-objects">8.1.6. StreamReaderWriter Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../07_string_services/7.8.codecs.html#streamrecoder-objects">8.1.7. StreamRecoder Objects</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.8.codecs.html#encodings-and-unicode">8.2. Encodings and Unicode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.8.codecs.html#standard-encodings">8.3. Standard Encodings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.8.codecs.html#python-specific-encodings">8.4. Python Specific Encodings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.8.codecs.html#module-encodings.idna">8.5. <code class="docutils literal"><span class="pre">encodings.idna</span></code> &#8212; Internationalized Domain Names in Applications</a></li>
<li class="toctree-l4"><a class="reference internal" href="../07_string_services/7.8.codecs.html#module-encodings.utf_8_sig">8.6. <code class="docutils literal"><span class="pre">encodings.utf_8_sig</span></code> &#8212; UTF-8 codec with BOM signature</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../07_string_services/7.9.unicodedata.html">9. <code class="docutils literal"><span class="pre">unicodedata</span></code> &#8212; Unicode Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07_string_services/7.10.stringprep.html">10. <code class="docutils literal"><span class="pre">stringprep</span></code> &#8212; Internet String Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07_string_services/7.11.fpformat.html">11. (deprecated) <code class="docutils literal"><span class="pre">fpformat</span></code> &#8212; Floating point conversions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../08_datat_types/8.html">08. Data Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/datetime.html">1. <code class="docutils literal"><span class="pre">datetime</span></code> &#8212; Basic date and time types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/datetime.html#available-types">1.1. Available Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/datetime.html#timedelta-objects">1.2. <code class="docutils literal"><span class="pre">timedelta</span></code> Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/datetime.html#date-objects">1.3. <code class="docutils literal"><span class="pre">date</span></code> Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/datetime.html#datetime-objects">1.4. <code class="docutils literal"><span class="pre">datetime</span></code> Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/datetime.html#time-objects">1.5. <code class="docutils literal"><span class="pre">time</span></code> Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/datetime.html#tzinfo-objects">1.6. <code class="docutils literal"><span class="pre">tzinfo</span></code> Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/datetime.html#strftime-and-strptime-behavior">1.7. <code class="docutils literal"><span class="pre">strftime()</span></code> and <code class="docutils literal"><span class="pre">strptime()</span></code> Behavior</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/calendar.html">2. <code class="docutils literal"><span class="pre">calendar</span></code> &#8212; General calendar-related functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/collections.html">3. <code class="docutils literal"><span class="pre">collections</span></code> &#8212; High-performance container datatypes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/collections.html#counter-objects">3.1. <code class="docutils literal"><span class="pre">Counter</span></code> objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/collections.html#deque-objects">3.2. <code class="docutils literal"><span class="pre">deque</span></code> objects</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../08_datat_types/collections.html#deque-recipes">3.2.1. <code class="docutils literal"><span class="pre">deque</span></code> Recipes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/collections.html#defaultdict-objects">3.3. <code class="docutils literal"><span class="pre">defaultdict</span></code> objects</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../08_datat_types/collections.html#defaultdict-examples">3.3.1. <code class="docutils literal"><span class="pre">defaultdict</span></code> Examples</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/collections.html#namedtuple-factory-function-for-tuples-with-named-fields">3.4. <code class="docutils literal"><span class="pre">namedtuple()</span></code> Factory Function for Tuples with Named Fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/collections.html#ordereddict-objects">3.5. <code class="docutils literal"><span class="pre">OrderedDict</span></code> objects</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../08_datat_types/collections.html#ordereddict-examples-and-recipes">3.5.1. <code class="docutils literal"><span class="pre">OrderedDict</span></code> Examples and Recipes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/collections.html#collections-abstract-base-classes">3.6. Collections Abstract Base Classes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/heapq.html">4. <code class="docutils literal"><span class="pre">heapq</span></code> &#8212; Heap queue algorithm</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/heapq.html#basic-examples">4.1. Basic Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/heapq.html#priority-queue-implementation-notes">4.2. Priority Queue Implementation Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/heapq.html#theory">4.3. Theory</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/bisect.html">5. <code class="docutils literal"><span class="pre">bisect</span></code> &#8212; Array bisection algorithm</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/bisect.html#searching-sorted-lists">5.1. Searching Sorted Lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/bisect.html#other-examples">5.2. Other Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/array.html">6. <code class="docutils literal"><span class="pre">array</span></code> &#8212; Efficient arrays of numeric values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/sets.html">7. <code class="docutils literal"><span class="pre">sets</span></code> &#8212; Unordered collections of unique elements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/sets.html#set-objects">7.1. Set Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/sets.html#example">7.2. Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/sets.html#protocol-for-automatic-conversion-to-immutable">7.3. Protocol for automatic conversion to immutable</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/sets.html#comparison-to-the-built-in-set-types">7.4. Comparison to the built-in <code class="docutils literal"><span class="pre">set</span></code> types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/sched.html">8. <code class="docutils literal"><span class="pre">sched</span></code> &#8212; Event scheduler</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/sched.html#scheduler-objects">8.1. Scheduler Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/mutex.html">9. <code class="docutils literal"><span class="pre">mutex</span></code> &#8212; Mutual exclusion support</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/mutex.html#mutex-objects">9.1. Mutex Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/queue.html">10. <code class="docutils literal"><span class="pre">Queue</span></code> &#8212; A synchronized queue class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/queue.html#queue-objects">10.1. Queue Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/weakref.html">11. <code class="docutils literal"><span class="pre">weakref</span></code> &#8212; Weak references</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/weakref.html#weak-reference-objects">11.1. Weak Reference Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/weakref.html#example">11.2. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/userdict.html">12. <code class="docutils literal"><span class="pre">UserDict</span></code> &#8212; Class wrapper for dictionary objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/userdict.html#module-UserList">13. <code class="docutils literal"><span class="pre">UserList</span></code> &#8212; Class wrapper for list objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/userdict.html#module-UserString">14. <code class="docutils literal"><span class="pre">UserString</span></code> &#8212; Class wrapper for string objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/types.html">15. <code class="docutils literal"><span class="pre">types</span></code> &#8212; Names for built-in types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/new.html">16. <code class="docutils literal"><span class="pre">new</span></code> &#8212; Creation of runtime internal objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/copy.html">17. <code class="docutils literal"><span class="pre">copy</span></code> &#8212; Shallow and deep copy operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/pprint.html">18. <code class="docutils literal"><span class="pre">pprint</span></code> &#8212; Data pretty printer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/pprint.html#prettyprinter-objects">18.1. PrettyPrinter Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/pprint.html#pprint-example">18.2. pprint Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../08_datat_types/repr.html">19. <code class="docutils literal"><span class="pre">repr</span></code> &#8212; Alternate <code class="docutils literal"><span class="pre">repr()</span></code> implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/repr.html#repr-objects">19.1. Repr Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../08_datat_types/repr.html#subclassing-repr-objects">19.2. Subclassing Repr Objects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../09_numeric/09.html">09 Numeric and Mathematical Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../09_numeric/numbers.html">1. <code class="docutils literal"><span class="pre">numbers</span></code> &#8212; Numeric abstract base classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/numbers.html#the-numeric-tower">1.1. The numeric tower</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/numbers.html#notes-for-type-implementors">1.2. Notes for type implementors</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../09_numeric/numbers.html#adding-more-numeric-abcs">1.2.1. Adding More Numeric ABCs</a></li>
<li class="toctree-l5"><a class="reference internal" href="../09_numeric/numbers.html#implementing-the-arithmetic-operations">1.2.2. Implementing the arithmetic operations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../09_numeric/math.html">2. <code class="docutils literal"><span class="pre">math</span></code> &#8212; Mathematical functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/math.html#number-theoretic-and-representation-functions">2.1. Number-theoretic and representation functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/math.html#power-and-logarithmic-functions">2.2. Power and logarithmic functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/math.html#trigonometric-functions">2.3. Trigonometric functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/math.html#angular-conversion">2.4. Angular conversion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/math.html#hyperbolic-functions">2.5. Hyperbolic functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/math.html#special-functions">2.6. Special functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/math.html#constants">2.7. Constants</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../09_numeric/cmath.html">3. <code class="docutils literal"><span class="pre">cmath</span></code> &#8212; Mathematical functions for complex numbers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/cmath.html#conversions-to-and-from-polar-coordinates">3.1. Conversions to and from polar coordinates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/cmath.html#power-and-logarithmic-functions">3.2. Power and logarithmic functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/cmath.html#trigonometric-functions">3.3. Trigonometric functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/cmath.html#hyperbolic-functions">3.4. Hyperbolic functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/cmath.html#classification-functions">3.5. Classification functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/cmath.html#constants">3.6. Constants</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../09_numeric/decimal.html">4. <code class="docutils literal"><span class="pre">decimal</span></code> &#8212; Decimal fixed point and floating point arithmetic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/decimal.html#quick-start-tutorial">4.1. Quick-start Tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/decimal.html#decimal-objects">4.2. Decimal objects</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../09_numeric/decimal.html#logical-operands">4.2.1. Logical operands</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/decimal.html#context-objects">4.3. Context objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/decimal.html#signals">4.4. Signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/decimal.html#floating-point-notes">4.5. Floating Point Notes</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../09_numeric/decimal.html#mitigating-round-off-error-with-increased-precision">4.5.1. Mitigating round-off error with increased precision</a></li>
<li class="toctree-l5"><a class="reference internal" href="../09_numeric/decimal.html#special-values">4.5.2. Special values</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/decimal.html#working-with-threads">4.6. Working with threads</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/decimal.html#recipes">4.7. Recipes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/decimal.html#decimal-faq">4.8. Decimal FAQ</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../09_numeric/fractions.html">5. <code class="docutils literal"><span class="pre">fractions</span></code> &#8212; Rational numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../09_numeric/random.html">6. <code class="docutils literal"><span class="pre">random</span></code> &#8212; Generate pseudo-random numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../09_numeric/itertools.html">7. <code class="docutils literal"><span class="pre">itertools</span></code> &#8212; Functions creating iterators for efficient looping</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/itertools.html#itertool-functions">7.1. Itertool functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/itertools.html#recipes">7.2. Recipes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../09_numeric/functools.html">8. <code class="docutils literal"><span class="pre">functools</span></code> &#8212; Higher-order functions and operations on callable objects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/functools.html#partial-objects">8.1. <code class="docutils literal"><span class="pre">partial</span></code> Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../09_numeric/operator.html">9. <code class="docutils literal"><span class="pre">operator</span></code> &#8212; Standard operators as functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../09_numeric/operator.html#mapping-operators-to-functions">9.1. Mapping Operators to Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../10_filesys/10.html">10 File and Directory Access</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../10_filesys/os.path.html">1. <code class="docutils literal"><span class="pre">os.path</span></code> &#8212; Common pathname manipulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../10_filesys/fileinput.html">2. <code class="docutils literal"><span class="pre">fileinput</span></code> &#8212; Iterate over lines from multiple input streams</a></li>
<li class="toctree-l3"><a class="reference internal" href="../10_filesys/stat.html">3. <code class="docutils literal"><span class="pre">stat</span></code> &#8212; Interpreting <code class="docutils literal"><span class="pre">stat()</span></code> results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../10_filesys/statvfs.html">4. <code class="docutils literal"><span class="pre">statvfs</span></code> &#8212; Constants used with <code class="docutils literal"><span class="pre">os.statvfs()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../10_filesys/filecmp.html">5. <code class="docutils literal"><span class="pre">filecmp</span></code> &#8212; File and Directory Comparisons</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../10_filesys/filecmp.html#the-dircmp-class">5.1. The <code class="docutils literal"><span class="pre">dircmp</span></code> class</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../10_filesys/tempfile.html">6. <code class="docutils literal"><span class="pre">tempfile</span></code> &#8212; Generate temporary files and directories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../10_filesys/glob.html">7. <code class="docutils literal"><span class="pre">glob</span></code> &#8212; Unix style pathname pattern expansion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../10_filesys/fnmatch.html">8. <code class="docutils literal"><span class="pre">fnmatch</span></code> &#8212; Unix filename pattern matching</a></li>
<li class="toctree-l3"><a class="reference internal" href="../10_filesys/linecache.html">9. <code class="docutils literal"><span class="pre">linecache</span></code> &#8212; Random access to text lines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../10_filesys/shutil.html">10. <code class="docutils literal"><span class="pre">shutil</span></code> &#8212; High-level file operations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../10_filesys/shutil.html#directory-and-files-operations">10.1. Directory and files operations</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../10_filesys/shutil.html#copytree-example">10.1.1. copytree example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../10_filesys/shutil.html#archiving-operations">10.2. Archiving operations</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../10_filesys/shutil.html#archiving-example">10.2.1. Archiving example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../10_filesys/dircache.html">11. <code class="docutils literal"><span class="pre">dircache</span></code> &#8212; Cached directory listings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../10_filesys/macpath.html">12. <code class="docutils literal"><span class="pre">macpath</span></code> &#8212; Mac OS 9 path manipulation functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../11to15.html">Ch 11 - 15</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../11_data_persistence/11.html">11. Data Persistence</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../11_data_persistence/11.1_pickle.html">1. <code class="docutils literal"><span class="pre">pickle</span></code> &#8212; Python object serialization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.1_pickle.html#relationship-to-other-python-modules">1.1. Relationship to other Python modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.1_pickle.html#data-stream-format">1.2. Data stream format</a></li>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.1_pickle.html#usage">1.3. Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.1_pickle.html#what-can-be-pickled-and-unpickled">1.4. What can be pickled and unpickled?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.1_pickle.html#the-pickle-protocol">1.5. The pickle protocol</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../11_data_persistence/11.1_pickle.html#pickling-and-unpickling-normal-class-instances">1.5.1. Pickling and unpickling normal class instances</a></li>
<li class="toctree-l5"><a class="reference internal" href="../11_data_persistence/11.1_pickle.html#pickling-and-unpickling-extension-types">1.5.2. Pickling and unpickling extension types</a></li>
<li class="toctree-l5"><a class="reference internal" href="../11_data_persistence/11.1_pickle.html#pickling-and-unpickling-external-objects">1.5.3. Pickling and unpickling external objects</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.1_pickle.html#subclassing-unpicklers">1.6. Subclassing Unpicklers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.1_pickle.html#example">1.7. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../11_data_persistence/11.2_cpickle.html">2. <code class="docutils literal"><span class="pre">cPickle</span></code> &#8212; A faster <code class="docutils literal"><span class="pre">pickle</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../11_data_persistence/11.3_copy_reg.html">3. <code class="docutils literal"><span class="pre">copy_reg</span></code> &#8212; Register <code class="docutils literal"><span class="pre">pickle</span></code> support functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.3_copy_reg.html#example">3.1. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../11_data_persistence/11.4_shelve.html">4. <code class="docutils literal"><span class="pre">shelve</span></code> &#8212; Python object persistence</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.4_shelve.html#restrictions">4.1. Restrictions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.4_shelve.html#example">4.2. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../11_data_persistence/11.5_marshal.html">5. <code class="docutils literal"><span class="pre">marshal</span></code> &#8212; Internal Python object serialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../11_data_persistence/11.6_anydbm.html">6. <code class="docutils literal"><span class="pre">anydbm</span></code> &#8212; Generic access to DBM-style databases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../11_data_persistence/11.7_whichdb.html">7. <code class="docutils literal"><span class="pre">whichdb</span></code> &#8212; Guess which DBM module created a database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../11_data_persistence/11.8_dbm.html">8. <code class="docutils literal"><span class="pre">dbm</span></code> &#8212; Simple &#8220;database&#8221; interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../11_data_persistence/11.9_gdbm.html">9. <code class="docutils literal"><span class="pre">gdbm</span></code> &#8212; GNU&#8217;s reinterpretation of dbm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../11_data_persistence/11.10_dbhash.html">10. (deprecated) <code class="docutils literal"><span class="pre">dbhash</span></code> &#8212; DBM-style interface to the BSD database library</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.10_dbhash.html#database-objects">10.1. Database Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../11_data_persistence/11.11_bsddb.html">11. (deprecated) <code class="docutils literal"><span class="pre">bsddb</span></code> &#8212; Interface to Berkeley DB library</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.11_bsddb.html#hash-btree-and-record-objects">11.1. Hash, BTree and Record Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../11_data_persistence/11.12_dumbdbm.html">12. <code class="docutils literal"><span class="pre">dumbdbm</span></code> &#8212; Portable DBM implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.12_dumbdbm.html#dumbdbm-objects">12.1. Dumbdbm Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html">13. <code class="docutils literal"><span class="pre">sqlite3</span></code> &#8212; DB-API 2.0 interface for SQLite databases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#module-functions-and-constants">13.1. Module functions and constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#connection-objects">13.2. Connection Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#cursor-objects">13.3. Cursor Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#row-objects">13.4. Row Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#sqlite-and-python-types">13.5. SQLite and Python types</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#introduction">13.5.1. Introduction</a></li>
<li class="toctree-l5"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#using-adapters-to-store-additional-python-types-in-sqlite-databases">13.5.2. Using adapters to store additional Python types in SQLite databases</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#letting-your-object-adapt-itself">13.5.2.1. Letting your object adapt itself</a></li>
<li class="toctree-l6"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#registering-an-adapter-callable">13.5.2.2. Registering an adapter callable</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#converting-sqlite-values-to-custom-python-types">13.5.3. Converting SQLite values to custom Python types</a></li>
<li class="toctree-l5"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#default-adapters-and-converters">13.5.4. Default adapters and converters</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#controlling-transactions">13.6. Controlling Transactions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#using-sqlite3-efficiently">13.7. Using <code class="docutils literal"><span class="pre">sqlite3</span></code> efficiently</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#using-shortcut-methods">13.7.1. Using shortcut methods</a></li>
<li class="toctree-l5"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#accessing-columns-by-name-instead-of-by-index">13.7.2. Accessing columns by name instead of by index</a></li>
<li class="toctree-l5"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#using-the-connection-as-a-context-manager">13.7.3. Using the connection as a context manager</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#common-issues">13.8. Common issues</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../11_data_persistence/11.13_sqlite.html#multithreading">13.8.1. Multithreading</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../12_archiving/12.html">12 Data Compression and Archiving</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../12_archiving/zlib.html">1. <code class="docutils literal"><span class="pre">zlib</span></code> &#8212; Compression compatible with <strong class="program">gzip</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../12_archiving/gzip.html">2. <code class="docutils literal"><span class="pre">gzip</span></code> &#8212; Support for <strong class="program">gzip</strong> files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../12_archiving/gzip.html#examples-of-usage">2.1. Examples of usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../12_archiving/bz2.html">3. <code class="docutils literal"><span class="pre">bz2</span></code> &#8212; Compression compatible with <strong class="program">bzip2</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../12_archiving/bz2.html#de-compression-of-files">3.1. (De)compression of files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../12_archiving/bz2.html#sequential-de-compression">3.2. Sequential (de)compression</a></li>
<li class="toctree-l4"><a class="reference internal" href="../12_archiving/bz2.html#one-shot-de-compression">3.3. One-shot (de)compression</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../12_archiving/zipfile.html">4. <code class="docutils literal"><span class="pre">zipfile</span></code> &#8212; Work with ZIP archives</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../12_archiving/zipfile.html#zipfile-objects">4.1. ZipFile Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../12_archiving/zipfile.html#pyzipfile-objects">4.2. PyZipFile Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../12_archiving/zipfile.html#zipinfo-objects">4.3. ZipInfo Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../12_archiving/tarfile.html">5. <code class="docutils literal"><span class="pre">tarfile</span></code> &#8212; Read and write tar archive files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../12_archiving/tarfile.html#tarfile-objects">5.1. TarFile Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../12_archiving/tarfile.html#tarinfo-objects">5.2. TarInfo Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../12_archiving/tarfile.html#examples">5.3. Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../12_archiving/tarfile.html#supported-tar-formats">5.4. Supported tar formats</a></li>
<li class="toctree-l4"><a class="reference internal" href="../12_archiving/tarfile.html#unicode-issues">5.5. Unicode issues</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../13_fileformats/13.html">13 File Formats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../13_fileformats/csv.html"><code class="docutils literal"><span class="pre">csv</span></code> &#8212; CSV File Reading and Writing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../13_fileformats/csv.html#module-contents">Module Contents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../13_fileformats/csv.html#dialects-and-formatting-parameters">Dialects and Formatting Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../13_fileformats/csv.html#reader-objects">Reader Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../13_fileformats/csv.html#writer-objects">Writer Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../13_fileformats/csv.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../13_fileformats/configparser.html"><code class="docutils literal"><span class="pre">ConfigParser</span></code> &#8212; Configuration file parser</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../13_fileformats/configparser.html#rawconfigparser-objects">RawConfigParser Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../13_fileformats/configparser.html#configparser-objects">ConfigParser Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../13_fileformats/configparser.html#safeconfigparser-objects">SafeConfigParser Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../13_fileformats/configparser.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../13_fileformats/robotparser.html"><code class="docutils literal"><span class="pre">robotparser</span></code> &#8212;  Parser for robots.txt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../13_fileformats/netrc.html"><code class="docutils literal"><span class="pre">netrc</span></code> &#8212; netrc file processing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../13_fileformats/netrc.html#netrc-objects">netrc Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../13_fileformats/xdrlib.html"><code class="docutils literal"><span class="pre">xdrlib</span></code> &#8212; Encode and decode XDR data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../13_fileformats/xdrlib.html#packer-objects">Packer Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../13_fileformats/xdrlib.html#unpacker-objects">Unpacker Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../13_fileformats/xdrlib.html#exceptions">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../13_fileformats/plistlib.html"><code class="docutils literal"><span class="pre">plistlib</span></code> &#8212; Generate and parse Mac OS X <code class="docutils literal"><span class="pre">.plist</span></code> files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../13_fileformats/plistlib.html#examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../14_crypto/14.html">14 Cryptographic Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../14_crypto/hashlib.html">1. <code class="docutils literal"><span class="pre">hashlib</span></code> &#8212; Secure hashes and message digests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../14_crypto/hashlib.html#key-derivation">1.1. Key derivation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../14_crypto/hmac.html">2. <code class="docutils literal"><span class="pre">hmac</span></code> &#8212; Keyed-Hashing for Message Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../14_crypto/md5.html">3. <code class="docutils literal"><span class="pre">md5</span></code> &#8212; MD5 message digest algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../14_crypto/sha.html">4. <code class="docutils literal"><span class="pre">sha</span></code> &#8212; SHA-1 message digest algorithm</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../15_allos/15.html">15 Generic Operating System Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../15_allos/os.html">1. <code class="docutils literal"><span class="pre">os</span></code> &#8212; Miscellaneous operating system interfaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/os.html#process-parameters">1.1. Process Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/os.html#file-object-creation">1.2. File Object Creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/os.html#file-descriptor-operations">1.3. File Descriptor Operations</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/os.html#open-flag-constants">1.3.1. <code class="docutils literal"><span class="pre">open()</span></code> flag constants</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/os.html#files-and-directories">1.4. Files and Directories</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/os.html#process-management">1.5. Process Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/os.html#miscellaneous-system-information">1.6. Miscellaneous System Information</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/os.html#miscellaneous-functions">1.7. Miscellaneous Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../15_allos/io.html">2. <code class="docutils literal"><span class="pre">io</span></code> &#8212; Core tools for working with streams</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/io.html#module-interface">2.1. Module Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/io.html#i-o-base-classes">2.2. I/O Base Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/io.html#raw-file-i-o">2.3. Raw File I/O</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/io.html#buffered-streams">2.4. Buffered Streams</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/io.html#text-i-o">2.5. Text I/O</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/io.html#advanced-topics">2.6. Advanced topics</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/io.html#performance">2.6.1. Performance</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../15_allos/io.html#binary-i-o">2.6.1.1. Binary I/O</a></li>
<li class="toctree-l6"><a class="reference internal" href="../15_allos/io.html#id1">2.6.1.2. Text I/O</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/io.html#multi-threading">2.6.2. Multi-threading</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/io.html#reentrancy">2.6.3. Reentrancy</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../15_allos/argparse.html">3. <code class="docutils literal"><span class="pre">argparse</span></code> &#8212; Parser for command-line options, arguments and sub-commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/argparse.html#example">3.1. Example</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#creating-a-parser">3.1.1. Creating a parser</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#adding-arguments">3.1.2. Adding arguments</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#parsing-arguments">3.1.3. Parsing arguments</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/argparse.html#argumentparser-objects">3.2. ArgumentParser objects</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#prog">3.2.1. prog</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#usage">3.2.2. usage</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#description">3.2.3. description</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#epilog">3.2.4. epilog</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#parents">3.2.5. parents</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#formatter-class">3.2.6. formatter_class</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#prefix-chars">3.2.7. prefix_chars</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#fromfile-prefix-chars">3.2.8. fromfile_prefix_chars</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#argument-default">3.2.9. argument_default</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#conflict-handler">3.2.10. conflict_handler</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#add-help">3.2.11. add_help</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/argparse.html#the-add-argument-method">3.3. The add_argument() method</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#name-or-flags">3.3.1. name or flags</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#action">3.3.2. action</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#nargs">3.3.3. nargs</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#const">3.3.4. const</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#default">3.3.5. default</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#type">3.3.6. type</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#choices">3.3.7. choices</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#required">3.3.8. required</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#help">3.3.9. help</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#metavar">3.3.10. metavar</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#dest">3.3.11. dest</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#action-classes">3.3.12. Action classes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/argparse.html#the-parse-args-method">3.4. The parse_args() method</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#option-value-syntax">3.4.1. Option value syntax</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#invalid-arguments">3.4.2. Invalid arguments</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#arguments-containing">3.4.3. Arguments containing <code class="docutils literal"><span class="pre">-</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#argument-abbreviations-prefix-matching">3.4.4. Argument abbreviations (prefix matching)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#beyond-sys-argv">3.4.5. Beyond <code class="docutils literal"><span class="pre">sys.argv</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#the-namespace-object">3.4.6. The Namespace object</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/argparse.html#other-utilities">3.5. Other utilities</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#sub-commands">3.5.1. Sub-commands</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#filetype-objects">3.5.2. FileType objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#argument-groups">3.5.3. Argument groups</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#mutual-exclusion">3.5.4. Mutual exclusion</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#parser-defaults">3.5.5. Parser defaults</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#printing-help">3.5.6. Printing help</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#partial-parsing">3.5.7. Partial parsing</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#customizing-file-parsing">3.5.8. Customizing file parsing</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/argparse.html#exiting-methods">3.5.9. Exiting methods</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/argparse.html#upgrading-optparse-code">3.6. Upgrading optparse code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../15_allos/optparse.html">4. <code class="docutils literal"><span class="pre">optparse</span></code> &#8212; Parser for command line options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/optparse.html#background">4.1. Background</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#terminology">4.1.1. Terminology</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#what-are-options-for">4.1.2. What are options for?</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#what-are-positional-arguments-for">4.1.3. What are positional arguments for?</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/optparse.html#tutorial">4.2. Tutorial</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#understanding-option-actions">4.2.1. Understanding option actions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#the-store-action">4.2.2. The store action</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#handling-boolean-flag-options">4.2.3. Handling boolean (flag) options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#other-actions">4.2.4. Other actions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#default-values">4.2.5. Default values</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#generating-help">4.2.6. Generating help</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../15_allos/optparse.html#grouping-options">4.2.6.1. Grouping Options</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#printing-a-version-string">4.2.7. Printing a version string</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#how-optparse-handles-errors">4.2.8. How <code class="docutils literal"><span class="pre">optparse</span></code> handles errors</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#putting-it-all-together">4.2.9. Putting it all together</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/optparse.html#reference-guide">4.3. Reference Guide</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#creating-the-parser">4.3.1. Creating the parser</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#populating-the-parser">4.3.2. Populating the parser</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#defining-options">4.3.3. Defining options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#option-attributes">4.3.4. Option attributes</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#standard-option-actions">4.3.5. Standard option actions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#standard-option-types">4.3.6. Standard option types</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#parsing-arguments">4.3.7. Parsing arguments</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#querying-and-manipulating-your-option-parser">4.3.8. Querying and manipulating your option parser</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#conflicts-between-options">4.3.9. Conflicts between options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#cleanup">4.3.10. Cleanup</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#other-methods">4.3.11. Other methods</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/optparse.html#option-callbacks">4.4. Option Callbacks</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#defining-a-callback-option">4.4.1. Defining a callback option</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#how-callbacks-are-called">4.4.2. How callbacks are called</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#raising-errors-in-a-callback">4.4.3. Raising errors in a callback</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#callback-example-1-trivial-callback">4.4.4. Callback example 1: trivial callback</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#callback-example-2-check-option-order">4.4.5. Callback example 2: check option order</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#callback-example-3-check-option-order-generalized">4.4.6. Callback example 3: check option order (generalized)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#callback-example-4-check-arbitrary-condition">4.4.7. Callback example 4: check arbitrary condition</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#callback-example-5-fixed-arguments">4.4.8. Callback example 5: fixed arguments</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#callback-example-6-variable-arguments">4.4.9. Callback example 6: variable arguments</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/optparse.html#extending-optparse">4.5. Extending <code class="docutils literal"><span class="pre">optparse</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#adding-new-types">4.5.1. Adding new types</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/optparse.html#adding-new-actions">4.5.2. Adding new actions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../15_allos/getopt.html">5. <code class="docutils literal"><span class="pre">getopt</span></code> &#8212; C-style parser for command line options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../15_allos/logging.html">6. <code class="docutils literal"><span class="pre">logging</span></code> &#8212; Logging facility for Python</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.html#logger-objects">6.1. Logger Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.html#logging-levels">6.2. Logging Levels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.html#handler-objects">6.3. Handler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.html#formatter-objects">6.4. Formatter Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.html#filter-objects">6.5. Filter Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.html#logrecord-objects">6.6. LogRecord Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.html#logrecord-attributes">6.7. LogRecord attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.html#loggeradapter-objects">6.8. LoggerAdapter Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.html#thread-safety">6.9. Thread Safety</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.html#module-level-functions">6.10. Module-Level Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.html#integration-with-the-warnings-module">6.11. Integration with the warnings module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../15_allos/logging.config.html">7. <code class="docutils literal"><span class="pre">logging.config</span></code> &#8212; Logging configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.config.html#configuration-functions">7.1. Configuration functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.config.html#configuration-dictionary-schema">7.2. Configuration dictionary schema</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/logging.config.html#dictionary-schema-details">7.2.1. Dictionary Schema Details</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/logging.config.html#incremental-configuration">7.2.2. Incremental Configuration</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/logging.config.html#object-connections">7.2.3. Object connections</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/logging.config.html#user-defined-objects">7.2.4. User-defined objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/logging.config.html#access-to-external-objects">7.2.5. Access to external objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/logging.config.html#access-to-internal-objects">7.2.6. Access to internal objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/logging.config.html#import-resolution-and-custom-importers">7.2.7. Import resolution and custom importers</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.config.html#configuration-file-format">7.3. Configuration file format</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../15_allos/logging.handlers.html">8. <code class="docutils literal"><span class="pre">logging.handlers</span></code> &#8212; Logging handlers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.handlers.html#streamhandler">8.1. StreamHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.handlers.html#filehandler">8.2. FileHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.handlers.html#nullhandler">8.3. NullHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.handlers.html#watchedfilehandler">8.4. WatchedFileHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.handlers.html#rotatingfilehandler">8.5. RotatingFileHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.handlers.html#timedrotatingfilehandler">8.6. TimedRotatingFileHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.handlers.html#sockethandler">8.7. SocketHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.handlers.html#datagramhandler">8.8. DatagramHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.handlers.html#sysloghandler">8.9. SysLogHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.handlers.html#nteventloghandler">8.10. NTEventLogHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.handlers.html#smtphandler">8.11. SMTPHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.handlers.html#memoryhandler">8.12. MemoryHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/logging.handlers.html#httphandler">8.13. HTTPHandler</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../15_allos/getpass.html">9. <code class="docutils literal"><span class="pre">getpass</span></code> &#8212; Portable password input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../15_allos/curses.html">10. <code class="docutils literal"><span class="pre">curses</span></code> &#8212; Terminal handling for character-cell displays</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/curses.html#functions">10.1. Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/curses.html#window-objects">10.2. Window Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/curses.html#constants">10.3. Constants</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../15_allos/curses.html#module-curses.textpad">11. <code class="docutils literal"><span class="pre">curses.textpad</span></code> &#8212; Text input widget for curses programs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/curses.html#textbox-objects">11.1. Textbox objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../15_allos/curses.ascii.html">12. <code class="docutils literal"><span class="pre">curses.ascii</span></code> &#8212; Utilities for ASCII characters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../15_allos/curses.panel.html">13. <code class="docutils literal"><span class="pre">curses.panel</span></code> &#8212; A panel stack extension for curses</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/curses.panel.html#functions">13.1. Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/curses.panel.html#panel-objects">13.2. Panel Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../15_allos/platform.html">14. <code class="docutils literal"><span class="pre">platform</span></code> &#8212;  Access to underlying platform&#8217;s identifying data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/platform.html#cross-platform">14.1. Cross Platform</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/platform.html#java-platform">14.2. Java Platform</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/platform.html#windows-platform">14.3. Windows Platform</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/platform.html#win95-98-specific">14.3.1. Win95/98 specific</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/platform.html#mac-os-platform">14.4. Mac OS Platform</a></li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/platform.html#unix-platforms">14.5. Unix Platforms</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../15_allos/errno.html">15. <code class="docutils literal"><span class="pre">errno</span></code> &#8212; Standard errno system symbols</a></li>
<li class="toctree-l3"><a class="reference internal" href="../15_allos/ctypes.html">16. <code class="docutils literal"><span class="pre">ctypes</span></code> &#8212; A foreign function library for Python</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/ctypes.html#ctypes-tutorial">16.1. ctypes tutorial</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#loading-dynamic-link-libraries">16.1.1. Loading dynamic link libraries</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#accessing-functions-from-loaded-dlls">16.1.2. Accessing functions from loaded dlls</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#calling-functions">16.1.3. Calling functions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#fundamental-data-types">16.1.4. Fundamental data types</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#calling-functions-continued">16.1.5. Calling functions, continued</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#calling-functions-with-your-own-custom-data-types">16.1.6. Calling functions with your own custom data types</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#specifying-the-required-argument-types-function-prototypes">16.1.7. Specifying the required argument types (function prototypes)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#return-types">16.1.8. Return types</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#passing-pointers-or-passing-parameters-by-reference">16.1.9. Passing pointers (or: passing parameters by reference)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#structures-and-unions">16.1.10. Structures and unions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#structure-union-alignment-and-byte-order">16.1.11. Structure/union alignment and byte order</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#bit-fields-in-structures-and-unions">16.1.12. Bit fields in structures and unions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#arrays">16.1.13. Arrays</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#pointers">16.1.14. Pointers</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#type-conversions">16.1.15. Type conversions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#incomplete-types">16.1.16. Incomplete Types</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#callback-functions">16.1.17. Callback functions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#accessing-values-exported-from-dlls">16.1.18. Accessing values exported from dlls</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#surprises">16.1.19. Surprises</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#variable-sized-data-types">16.1.20. Variable-sized data types</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../15_allos/ctypes.html#ctypes-reference">16.2. ctypes reference</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#finding-shared-libraries">16.2.1. Finding shared libraries</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#loading-shared-libraries">16.2.2. Loading shared libraries</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#foreign-functions">16.2.3. Foreign functions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#function-prototypes">16.2.4. Function prototypes</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#utility-functions">16.2.5. Utility functions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#data-types">16.2.6. Data types</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#ctypes-fundamental-data-types-2">16.2.7. Fundamental data types</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#structured-data-types">16.2.8. Structured data types</a></li>
<li class="toctree-l5"><a class="reference internal" href="../15_allos/ctypes.html#arrays-and-pointers">16.2.9. Arrays and pointers</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../16to20.html">Ch 16 - 20</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../16_someos/16.html">16 Optional Operating System Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../16_someos/select.html">1. <code class="docutils literal"><span class="pre">select</span></code> &#8212; Waiting for I/O completion</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/select.html#edge-and-level-trigger-polling-epoll-objects">1.1. Edge and Level Trigger Polling (epoll) Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/select.html#polling-objects">1.2. Polling Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/select.html#kqueue-objects">1.3. Kqueue Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/select.html#kevent-objects">1.4. Kevent Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../16_someos/threading.html">2. <code class="docutils literal"><span class="pre">threading</span></code> &#8212; Higher-level threading interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/threading.html#thread-objects">2.1. Thread Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/threading.html#lock-objects">2.2. Lock Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/threading.html#rlock-objects">2.3. RLock Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/threading.html#condition-objects">2.4. Condition Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/threading.html#semaphore-objects">2.5. Semaphore Objects</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/threading.html#semaphore-example">2.5.1. <code class="docutils literal"><span class="pre">Semaphore</span></code> Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/threading.html#event-objects">2.6. Event Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/threading.html#timer-objects">2.7. Timer Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/threading.html#using-locks-conditions-and-semaphores-in-the-with-statement">2.8. Using locks, conditions, and semaphores in the <code class="docutils literal"><span class="pre">with</span></code> statement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/threading.html#importing-in-threaded-code">2.9. Importing in threaded code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../16_someos/thread.html">3. <code class="docutils literal"><span class="pre">thread</span></code> &#8212; Multiple threads of control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../16_someos/dummy_threading.html">4. <code class="docutils literal"><span class="pre">dummy_threading</span></code> &#8212; Drop-in replacement for the <code class="docutils literal"><span class="pre">threading</span></code> module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../16_someos/dummy_thread.html">5. <code class="docutils literal"><span class="pre">dummy_thread</span></code> &#8212; Drop-in replacement for the <code class="docutils literal"><span class="pre">thread</span></code> module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../16_someos/multiprocessing.html">6. <code class="docutils literal"><span class="pre">multiprocessing</span></code> &#8212; Process-based &#8220;threading&#8221; interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/multiprocessing.html#introduction">6.1. Introduction</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#the-process-class">6.1.1. The <code class="docutils literal"><span class="pre">Process</span></code> class</a></li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#exchanging-objects-between-processes">6.1.2. Exchanging objects between processes</a></li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#synchronization-between-processes">6.1.3. Synchronization between processes</a></li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#sharing-state-between-processes">6.1.4. Sharing state between processes</a></li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#using-a-pool-of-workers">6.1.5. Using a pool of workers</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/multiprocessing.html#reference">6.2. Reference</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#process-and-exceptions">6.2.1. <code class="docutils literal"><span class="pre">Process</span></code> and exceptions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#pipes-and-queues">6.2.2. Pipes and Queues</a></li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#miscellaneous">6.2.3. Miscellaneous</a></li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#connection-objects">6.2.4. Connection Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#synchronization-primitives">6.2.5. Synchronization primitives</a></li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#shared-ctypes-objects">6.2.6. Shared <code class="docutils literal"><span class="pre">ctypes</span></code> Objects</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../16_someos/multiprocessing.html#module-multiprocessing.sharedctypes">6.2.6.1. The <code class="docutils literal"><span class="pre">multiprocessing.sharedctypes</span></code> module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#managers">6.2.7. Managers</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../16_someos/multiprocessing.html#customized-managers">6.2.7.1. Customized managers</a></li>
<li class="toctree-l6"><a class="reference internal" href="../16_someos/multiprocessing.html#using-a-remote-manager">6.2.7.2. Using a remote manager</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#proxy-objects">6.2.8. Proxy Objects</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../16_someos/multiprocessing.html#cleanup">6.2.8.1. Cleanup</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#module-multiprocessing.pool">6.2.9. Process Pools</a></li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#module-multiprocessing.connection">6.2.10. Listeners and Clients</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../16_someos/multiprocessing.html#address-formats">6.2.10.1. Address Formats</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#authentication-keys">6.2.11. Authentication keys</a></li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#logging">6.2.12. Logging</a></li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#module-multiprocessing.dummy">6.2.13. The <code class="docutils literal"><span class="pre">multiprocessing.dummy</span></code> module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/multiprocessing.html#programming-guidelines">6.3. Programming guidelines</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#all-platforms">6.3.1. All platforms</a></li>
<li class="toctree-l5"><a class="reference internal" href="../16_someos/multiprocessing.html#windows">6.3.2. Windows</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/multiprocessing.html#examples">6.4. Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../16_someos/mmap.html">7. <code class="docutils literal"><span class="pre">mmap</span></code> &#8212; Memory-mapped file support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../16_someos/readline.html">8. <code class="docutils literal"><span class="pre">readline</span></code> &#8212; GNU readline interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/readline.html#init-file">8.1. Init file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/readline.html#line-buffer">8.2. Line buffer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/readline.html#history-file">8.3. History file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/readline.html#history-list">8.4. History list</a></li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/readline.html#startup-hooks">8.5. Startup hooks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/readline.html#completion">8.6. Completion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/readline.html#example">8.7. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../16_someos/rlcompleter.html">9. <code class="docutils literal"><span class="pre">rlcompleter</span></code> &#8212; Completion function for GNU readline</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../16_someos/rlcompleter.html#completer-objects">9.1. Completer Objects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../17_ipc/17.html">17 Interprocess Communication and Networking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../17_ipc/subprocess.html">1. <code class="docutils literal"><span class="pre">subprocess</span></code> &#8212; Subprocess management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/subprocess.html#using-the-subprocess-module">1.1. Using the <code class="docutils literal"><span class="pre">subprocess</span></code> Module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/subprocess.html#frequently-used-arguments">1.1.1. Frequently Used Arguments</a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/subprocess.html#popen-constructor">1.1.2. Popen Constructor</a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/subprocess.html#exceptions">1.1.3. Exceptions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/subprocess.html#security">1.1.4. Security</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/subprocess.html#popen-objects">1.2. Popen Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/subprocess.html#windows-popen-helpers">1.3. Windows Popen Helpers</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/subprocess.html#constants">1.3.1. Constants</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/subprocess.html#replacing-older-functions-with-the-subprocess-module">1.4. Replacing Older Functions with the <code class="docutils literal"><span class="pre">subprocess</span></code> Module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/subprocess.html#replacing-bin-sh-shell-backquote">1.4.1. Replacing /bin/sh shell backquote</a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/subprocess.html#replacing-shell-pipeline">1.4.2. Replacing shell pipeline</a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/subprocess.html#replacing-os-system">1.4.3. Replacing <code class="docutils literal"><span class="pre">os.system()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/subprocess.html#replacing-the-os-spawn-family">1.4.4. Replacing the <code class="docutils literal"><span class="pre">os.spawn</span></code> family</a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/subprocess.html#replacing-os-popen-os-popen2-os-popen3">1.4.5. Replacing <code class="docutils literal"><span class="pre">os.popen()</span></code>, <code class="docutils literal"><span class="pre">os.popen2()</span></code>, <code class="docutils literal"><span class="pre">os.popen3()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/subprocess.html#replacing-functions-from-the-popen2-module">1.4.6. Replacing functions from the <code class="docutils literal"><span class="pre">popen2</span></code> module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/subprocess.html#notes">1.5. Notes</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/subprocess.html#converting-an-argument-sequence-to-a-string-on-windows">1.5.1. Converting an argument sequence to a string on Windows</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../17_ipc/socket.html">2. <code class="docutils literal"><span class="pre">socket</span></code> &#8212; Low-level networking interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/socket.html#socket-objects">2.1. Socket Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/socket.html#example">2.2. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../17_ipc/ssl.html">3. <code class="docutils literal"><span class="pre">ssl</span></code> &#8212; TLS/SSL wrapper for socket objects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/ssl.html#functions-constants-and-exceptions">3.1. Functions, Constants, and Exceptions</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/ssl.html#socket-creation">3.1.1. Socket creation</a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/ssl.html#context-creation">3.1.2. Context creation</a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/ssl.html#random-generation">3.1.3. Random generation</a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/ssl.html#certificate-handling">3.1.4. Certificate handling</a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/ssl.html#constants">3.1.5. Constants</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/ssl.html#ssl-sockets">3.2. SSL Sockets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/ssl.html#ssl-contexts">3.3. SSL Contexts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/ssl.html#certificates">3.4. Certificates</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/ssl.html#certificate-chains">3.4.1. Certificate chains</a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/ssl.html#ca-certificates">3.4.2. CA certificates</a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/ssl.html#combined-key-and-certificate">3.4.3. Combined key and certificate</a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/ssl.html#self-signed-certificates">3.4.4. Self-signed certificates</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/ssl.html#examples">3.5. Examples</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/ssl.html#testing-for-ssl-support">3.5.1. Testing for SSL support</a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/ssl.html#client-side-operation">3.5.2. Client-side operation</a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/ssl.html#server-side-operation">3.5.3. Server-side operation</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/ssl.html#notes-on-non-blocking-sockets">3.6. Notes on non-blocking sockets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/ssl.html#security-considerations">3.7. Security considerations</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/ssl.html#best-defaults">3.7.1. Best defaults</a></li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/ssl.html#manual-settings">3.7.2. Manual settings</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../17_ipc/ssl.html#verifying-certificates">3.7.2.1. Verifying certificates</a></li>
<li class="toctree-l6"><a class="reference internal" href="../17_ipc/ssl.html#protocol-versions">3.7.2.2. Protocol versions</a></li>
<li class="toctree-l6"><a class="reference internal" href="../17_ipc/ssl.html#cipher-selection">3.7.2.3. Cipher selection</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../17_ipc/ssl.html#multi-processing">3.7.3. Multi-processing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../17_ipc/signal.html">4. <code class="docutils literal"><span class="pre">signal</span></code> &#8212; Set handlers for asynchronous events</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/signal.html#example">4.1. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../17_ipc/popen2.html">5. <code class="docutils literal"><span class="pre">popen2</span></code> &#8212; Subprocesses with accessible I/O streams</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/popen2.html#popen3-and-popen4-objects">5.1. Popen3 and Popen4 Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/popen2.html#flow-control-issues">5.2. Flow Control Issues</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../17_ipc/asyncore.html">6. <code class="docutils literal"><span class="pre">asyncore</span></code> &#8212; Asynchronous socket handler</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/asyncore.html#asyncore-example-basic-http-client">6.1. asyncore Example basic HTTP client</a></li>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/asyncore.html#asyncore-example-basic-echo-server">6.2. asyncore Example basic echo server</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../17_ipc/asynchat.html">7. <code class="docutils literal"><span class="pre">asynchat</span></code> &#8212; Asynchronous socket command/response handler</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/asynchat.html#asynchat-auxiliary-classes">7.1. asynchat - Auxiliary Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../17_ipc/asynchat.html#asynchat-example">7.2. asynchat Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../18_netdata/18.html">18 Internet Data Handling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../18_netdata/email.html">1. <code class="docutils literal"><span class="pre">email</span></code> &#8212; An email and MIME handling package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/email.html#package-history">1.1. Package History</a></li>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/email.html#differences-from-mimelib">1.2. Differences from <code class="docutils literal"><span class="pre">mimelib</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../18_netdata/json.html">2. <code class="docutils literal"><span class="pre">json</span></code> &#8212; JSON encoder and decoder</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/json.html#basic-usage">2.1. Basic Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/json.html#encoders-and-decoders">2.2. Encoders and Decoders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/json.html#standard-compliance-and-interoperability">2.3. Standard Compliance and Interoperability</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../18_netdata/json.html#character-encodings">2.3.1. Character Encodings</a></li>
<li class="toctree-l5"><a class="reference internal" href="../18_netdata/json.html#infinite-and-nan-number-values">2.3.2. Infinite and NaN Number Values</a></li>
<li class="toctree-l5"><a class="reference internal" href="../18_netdata/json.html#repeated-names-within-an-object">2.3.3. Repeated Names Within an Object</a></li>
<li class="toctree-l5"><a class="reference internal" href="../18_netdata/json.html#top-level-non-object-non-array-values">2.3.4. Top-level Non-Object, Non-Array Values</a></li>
<li class="toctree-l5"><a class="reference internal" href="../18_netdata/json.html#implementation-limitations">2.3.5. Implementation Limitations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../18_netdata/mailcap.html">3. <code class="docutils literal"><span class="pre">mailcap</span></code> &#8212; Mailcap file handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../18_netdata/mailbox.html">4. <code class="docutils literal"><span class="pre">mailbox</span></code> &#8212; Manipulate mailboxes in various formats</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/mailbox.html#mailbox-objects">4.1. <code class="docutils literal"><span class="pre">Mailbox</span></code> objects</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../18_netdata/mailbox.html#maildir">4.1.1. <code class="docutils literal"><span class="pre">Maildir</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../18_netdata/mailbox.html#mbox">4.1.2. <code class="docutils literal"><span class="pre">mbox</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../18_netdata/mailbox.html#mh">4.1.3. <code class="docutils literal"><span class="pre">MH</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../18_netdata/mailbox.html#babyl">4.1.4. <code class="docutils literal"><span class="pre">Babyl</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../18_netdata/mailbox.html#mmdf">4.1.5. <code class="docutils literal"><span class="pre">MMDF</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/mailbox.html#message-objects">4.2. <code class="docutils literal"><span class="pre">Message</span></code> objects</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../18_netdata/mailbox.html#maildirmessage">4.2.1. <code class="docutils literal"><span class="pre">MaildirMessage</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../18_netdata/mailbox.html#mboxmessage">4.2.2. <code class="docutils literal"><span class="pre">mboxMessage</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../18_netdata/mailbox.html#mhmessage">4.2.3. <code class="docutils literal"><span class="pre">MHMessage</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../18_netdata/mailbox.html#babylmessage">4.2.4. <code class="docutils literal"><span class="pre">BabylMessage</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../18_netdata/mailbox.html#mmdfmessage">4.2.5. <code class="docutils literal"><span class="pre">MMDFMessage</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/mailbox.html#exceptions">4.3. Exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/mailbox.html#deprecated-classes-and-methods">4.4. Deprecated classes and methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/mailbox.html#examples">4.5. Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../18_netdata/mhlib.html">5. (depr) <code class="docutils literal"><span class="pre">mhlib</span></code> &#8212; Access to MH mailboxes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/mhlib.html#mh-objects">5.1. MH Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/mhlib.html#folder-objects">5.2. Folder Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/mhlib.html#message-objects">5.3. Message Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../18_netdata/mimetools.html">6. (depr) <code class="docutils literal"><span class="pre">mimetools</span></code> &#8212; Tools for parsing MIME messages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/mimetools.html#additional-methods-of-message-objects">6.1. Additional Methods of Message Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../18_netdata/mimetypes.html">7. <code class="docutils literal"><span class="pre">mimetypes</span></code> &#8212; Map filenames to MIME types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/mimetypes.html#mimetypes-objects">7.1. MimeTypes Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../18_netdata/mimewriter.html">8. (depr) <code class="docutils literal"><span class="pre">MimeWriter</span></code> &#8212; Generic MIME file writer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/mimewriter.html#mimewriter-objects">8.1. MimeWriter Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../18_netdata/mimify.html">9. (depr) <code class="docutils literal"><span class="pre">mimify</span></code> &#8212; MIME processing of mail messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../18_netdata/multifile.html">10. (depr) <code class="docutils literal"><span class="pre">multifile</span></code> &#8212; Support for files containing distinct parts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/multifile.html#multifile-objects">10.1. MultiFile Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/multifile.html#multifile-example">10.2. <code class="docutils literal"><span class="pre">MultiFile</span></code> Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../18_netdata/rfc822.html">11. (depr) <code class="docutils literal"><span class="pre">rfc822</span></code> &#8212; Parse RFC 2822 mail headers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/rfc822.html#message-objects">11.1. Message Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/rfc822.html#addresslist-objects">11.2. AddressList Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../18_netdata/base64.html">12. <code class="docutils literal"><span class="pre">base64</span></code> &#8212; RFC 3548: Base16, Base32, Base64 Data Encodings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../18_netdata/binhex.html">13. <code class="docutils literal"><span class="pre">binhex</span></code> &#8212; Encode and decode binhex4 files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../18_netdata/binhex.html#notes">13.1. Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../18_netdata/binascii.html">14. <code class="docutils literal"><span class="pre">binascii</span></code> &#8212; Convert between binary and ASCII</a></li>
<li class="toctree-l3"><a class="reference internal" href="../18_netdata/quopri.html">15. <code class="docutils literal"><span class="pre">quopri</span></code> &#8212; Encode and decode MIME quoted-printable data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../18_netdata/uu.html">16. <code class="docutils literal"><span class="pre">uu</span></code> &#8212; Encode and decode uuencode files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../19_markup/19.html">19 Structured Markup Processing Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../19_markup/htmlparser.html">1. <code class="docutils literal"><span class="pre">HTMLParser</span></code> &#8212; Simple HTML and XHTML parser</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/htmlparser.html#example-html-parser-application">1.1. Example HTML Parser Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/htmlparser.html#htmlparser-methods">1.2. <code class="docutils literal"><span class="pre">HTMLParser</span></code> Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/htmlparser.html#examples">1.3. Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../19_markup/sgmllib.html">2. (depr) <code class="docutils literal"><span class="pre">sgmllib</span></code> &#8212; Simple SGML parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="../19_markup/htmllib.html">3. (depr) <code class="docutils literal"><span class="pre">htmllib</span></code> &#8212; A parser for HTML documents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/htmllib.html#htmlparser-objects">3.1. HTMLParser Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../19_markup/htmllib.html#module-htmlentitydefs">4. <code class="docutils literal"><span class="pre">htmlentitydefs</span></code> &#8212; Definitions of HTML general entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../19_markup/xml.html">5. XML Processing Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../19_markup/xml.html#xml-vulnerabilities">6. XML vulnerabilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.html#defused-packages">6.1. defused packages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html">7. <code class="docutils literal"><span class="pre">xml.etree.ElementTree</span></code> &#8212; The ElementTree XML API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#tutorial">7.1. Tutorial</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#xml-tree-and-elements">7.1.1. XML tree and elements</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#parsing-xml">7.1.2. Parsing XML</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#finding-interesting-elements">7.1.3. Finding interesting elements</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#modifying-an-xml-file">7.1.4. Modifying an XML File</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#building-xml-documents">7.1.5. Building XML documents</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#parsing-xml-with-namespaces">7.1.6. Parsing XML with Namespaces</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#additional-resources">7.1.7. Additional resources</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#xpath-support">7.2. XPath support</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#example">7.2.1. Example</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#supported-xpath-syntax">7.2.2. Supported XPath syntax</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#reference">7.3. Reference</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#functions">7.3.1. Functions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#element-objects">7.3.2. Element Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#elementtree-objects">7.3.3. ElementTree Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#qname-objects">7.3.4. QName Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#treebuilder-objects">7.3.5. TreeBuilder Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.etree.elementtree.html#xmlparser-objects">7.3.6. XMLParser Objects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../19_markup/xml.dom.html">8. <code class="docutils literal"><span class="pre">xml.dom</span></code> &#8212; The Document Object Model API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.dom.html#module-contents">8.1. Module Contents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.dom.html#objects-in-the-dom">8.2. Objects in the DOM</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.dom.html#domimplementation-objects">8.2.1. DOMImplementation Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.dom.html#node-objects">8.2.2. Node Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.dom.html#nodelist-objects">8.2.3. NodeList Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.dom.html#documenttype-objects">8.2.4. DocumentType Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.dom.html#document-objects">8.2.5. Document Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.dom.html#element-objects">8.2.6. Element Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.dom.html#attr-objects">8.2.7. Attr Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.dom.html#namednodemap-objects">8.2.8. NamedNodeMap Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.dom.html#comment-objects">8.2.9. Comment Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.dom.html#text-and-cdatasection-objects">8.2.10. Text and CDATASection Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.dom.html#processinginstruction-objects">8.2.11. ProcessingInstruction Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.dom.html#exceptions">8.2.12. Exceptions</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.dom.html#conformance">8.3. Conformance</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.dom.html#type-mapping">8.3.1. Type Mapping</a></li>
<li class="toctree-l5"><a class="reference internal" href="../19_markup/xml.dom.html#accessor-methods">8.3.2. Accessor Methods</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../19_markup/xml.dom.minidom.html">9. <code class="docutils literal"><span class="pre">xml.dom.minidom</span></code> &#8212; Minimal DOM implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.dom.minidom.html#dom-objects">9.1. DOM Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.dom.minidom.html#dom-example">9.2. DOM Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.dom.minidom.html#minidom-and-the-dom-standard">9.3. minidom and the DOM standard</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../19_markup/xml.dom.pulldom.html">10. <code class="docutils literal"><span class="pre">xml.dom.pulldom</span></code> &#8212; Support for building partial DOM trees</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.dom.pulldom.html#domeventstream-objects">10.1. DOMEventStream Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../19_markup/xml.sax.html">11. <code class="docutils literal"><span class="pre">xml.sax</span></code> &#8212; Support for SAX2 parsers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.sax.html#saxexception-objects">11.1. SAXException Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../19_markup/xml.sax.handler.html">12. <code class="docutils literal"><span class="pre">xml.sax.handler</span></code> &#8212; Base classes for SAX handlers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.sax.handler.html#contenthandler-objects">12.1. ContentHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.sax.handler.html#dtdhandler-objects">12.2. DTDHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.sax.handler.html#entityresolver-objects">12.3. EntityResolver Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.sax.handler.html#errorhandler-objects">12.4. ErrorHandler Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../19_markup/xml.sax.utils.html">13. <code class="docutils literal"><span class="pre">xml.sax.saxutils</span></code> &#8212; SAX Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../19_markup/xml.sax.reader.html">14. <code class="docutils literal"><span class="pre">xml.sax.xmlreader</span></code> &#8212; Interface for XML parsers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.sax.reader.html#xmlreader-objects">14.1. XMLReader Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.sax.reader.html#incrementalparser-objects">14.2. IncrementalParser Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.sax.reader.html#locator-objects">14.3. Locator Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.sax.reader.html#inputsource-objects">14.4. InputSource Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.sax.reader.html#the-attributes-interface">14.5. The <code class="docutils literal"><span class="pre">Attributes</span></code> Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/xml.sax.reader.html#the-attributesns-interface">14.6. The <code class="docutils literal"><span class="pre">AttributesNS</span></code> Interface</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../19_markup/pyexpat.html">15. <code class="docutils literal"><span class="pre">xml.parsers.expat</span></code> &#8212; Fast XML parsing using Expat</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/pyexpat.html#xmlparser-objects">15.1. XMLParser Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/pyexpat.html#expaterror-exceptions">15.2. ExpatError Exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/pyexpat.html#example">15.3. Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/pyexpat.html#content-model-descriptions">15.4. Content Model Descriptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../19_markup/pyexpat.html#expat-error-constants">15.5. Expat error constants</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../20_internet/20_part1.html">20a Internet Protocols and Support</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/webbrowser.html">1. <code class="docutils literal"><span class="pre">webbrowser</span></code> &#8212; Convenient Web-browser controller</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/webbrowser.html#browser-controller-objects">1.1. Browser Controller Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/cgi.html">2. <code class="docutils literal"><span class="pre">cgi</span></code> &#8212; Common Gateway Interface support</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cgi.html#introduction">2.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cgi.html#using-the-cgi-module">2.2. Using the cgi module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cgi.html#higher-level-interface">2.3. Higher Level Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cgi.html#old-classes">2.4. Old classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cgi.html#functions">2.5. Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cgi.html#caring-about-security">2.6. Caring about security</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cgi.html#installing-your-cgi-script-on-a-unix-system">2.7. Installing your CGI script on a Unix system</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cgi.html#testing-your-cgi-script">2.8. Testing your CGI script</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cgi.html#debugging-cgi-scripts">2.9. Debugging CGI scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cgi.html#common-problems-and-solutions">2.10. Common problems and solutions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/cgitb.html">3. <code class="docutils literal"><span class="pre">cgitb</span></code> &#8212; Traceback manager for CGI scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/wsgiref.html">4. <code class="docutils literal"><span class="pre">wsgiref</span></code> &#8212; WSGI Utilities and Reference Implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/wsgiref.html#module-wsgiref.util">4.1. <code class="docutils literal"><span class="pre">wsgiref.util</span></code> &#8211; WSGI environment utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/wsgiref.html#module-wsgiref.headers">4.2. <code class="docutils literal"><span class="pre">wsgiref.headers</span></code> &#8211; WSGI response header tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/wsgiref.html#module-wsgiref.simple_server">4.3. <code class="docutils literal"><span class="pre">wsgiref.simple_server</span></code> &#8211; a simple WSGI HTTP server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/wsgiref.html#module-wsgiref.validate">4.4. <code class="docutils literal"><span class="pre">wsgiref.validate</span></code> &#8212; WSGI conformance checker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/wsgiref.html#module-wsgiref.handlers">4.5. <code class="docutils literal"><span class="pre">wsgiref.handlers</span></code> &#8211; server/gateway base classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/wsgiref.html#examples">4.6. Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/urllib.html">5. <code class="docutils literal"><span class="pre">urllib</span></code> &#8212; Open arbitrary resources by URL</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib.html#high-level-interface">5.1. High-level interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib.html#utility-functions">5.2. Utility functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib.html#url-opener-objects">5.3. URL Opener objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib.html#urllib-restrictions">5.4. <code class="docutils literal"><span class="pre">urllib</span></code> Restrictions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib.html#examples">5.5. Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/urllib2.html">6. <code class="docutils literal"><span class="pre">urllib2</span></code> &#8212; extensible library for opening URLs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#request-objects">6.1. Request Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#openerdirector-objects">6.2. OpenerDirector Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#basehandler-objects">6.3. BaseHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#httpredirecthandler-objects">6.4. HTTPRedirectHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#httpcookieprocessor-objects">6.5. HTTPCookieProcessor Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#proxyhandler-objects">6.6. ProxyHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#httppasswordmgr-objects">6.7. HTTPPasswordMgr Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#abstractbasicauthhandler-objects">6.8. AbstractBasicAuthHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#httpbasicauthhandler-objects">6.9. HTTPBasicAuthHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#proxybasicauthhandler-objects">6.10. ProxyBasicAuthHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#abstractdigestauthhandler-objects">6.11. AbstractDigestAuthHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#httpdigestauthhandler-objects">6.12. HTTPDigestAuthHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#proxydigestauthhandler-objects">6.13. ProxyDigestAuthHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#httphandler-objects">6.14. HTTPHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#httpshandler-objects">6.15. HTTPSHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#filehandler-objects">6.16. FileHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#ftphandler-objects">6.17. FTPHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#cacheftphandler-objects">6.18. CacheFTPHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#unknownhandler-objects">6.19. UnknownHandler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#httperrorprocessor-objects">6.20. HTTPErrorProcessor Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urllib2.html#examples">6.21. Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/httplib.html">7. <code class="docutils literal"><span class="pre">httplib</span></code> &#8212; HTTP protocol client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/httplib.html#httpconnection-objects">7.1. HTTPConnection Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/httplib.html#httpresponse-objects">7.2. HTTPResponse Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/httplib.html#examples">7.3. Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/ftplib.html">8. <code class="docutils literal"><span class="pre">ftplib</span></code> &#8212; FTP protocol client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/ftplib.html#ftp-objects">8.1. FTP Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/ftplib.html#ftp-tls-objects">8.2. FTP_TLS Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/poplib.html">9. <code class="docutils literal"><span class="pre">poplib</span></code> &#8212; POP3 protocol client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/poplib.html#pop3-objects">9.1. POP3 Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/poplib.html#pop3-example">9.2. POP3 Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/imaplib.html">10. <code class="docutils literal"><span class="pre">imaplib</span></code> &#8212; IMAP4 protocol client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/imaplib.html#imap4-objects">10.1. IMAP4 Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/imaplib.html#imap4-example">10.2. IMAP4 Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/nntplib.html">11. <code class="docutils literal"><span class="pre">nntplib</span></code> &#8212; NNTP protocol client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/nntplib.html#nntp-objects">11.1. NNTP Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/smtplib.html">12. <code class="docutils literal"><span class="pre">smtplib</span></code> &#8212; SMTP protocol client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/smtplib.html#smtp-objects">12.1. SMTP Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/smtplib.html#smtp-example">12.2. SMTP Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/smtpd.html">13. <code class="docutils literal"><span class="pre">smtpd</span></code> &#8212; SMTP Server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/smtpd.html#smtpserver-objects">13.1. SMTPServer Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/smtpd.html#debuggingserver-objects">13.2. DebuggingServer Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/smtpd.html#pureproxy-objects">13.3. PureProxy Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/smtpd.html#mailmanproxy-objects">13.4. MailmanProxy Objects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../20_internet/20_part2.html">20b Internet Protocols and Support</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/telnetlib.html">1. <code class="docutils literal"><span class="pre">telnetlib</span></code> &#8212; Telnet client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/telnetlib.html#telnet-objects">1.1. Telnet Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/telnetlib.html#telnet-example">1.2. Telnet Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/uuid.html">2. <code class="docutils literal"><span class="pre">uuid</span></code> &#8212; UUID objects according to RFC 4122</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/uuid.html#example">2.1. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/urlparse.html">3. <code class="docutils literal"><span class="pre">urlparse</span></code> &#8212; Parse URLs into components</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/urlparse.html#results-of-urlparse-and-urlsplit">3.1. Results of <code class="docutils literal"><span class="pre">urlparse()</span></code> and <code class="docutils literal"><span class="pre">urlsplit()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/socketserver.html">4. <code class="docutils literal"><span class="pre">SocketServer</span></code> &#8212; A framework for network servers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/socketserver.html#server-creation-notes">4.1. Server Creation Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/socketserver.html#server-objects">4.2. Server Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/socketserver.html#request-handler-objects">4.3. Request Handler Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/socketserver.html#examples">4.4. Examples</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../20_internet/socketserver.html#socketserver-tcpserver-example">4.4.1. <code class="docutils literal"><span class="pre">SocketServer.TCPServer</span></code> Example</a></li>
<li class="toctree-l5"><a class="reference internal" href="../20_internet/socketserver.html#socketserver-udpserver-example">4.4.2. <code class="docutils literal"><span class="pre">SocketServer.UDPServer</span></code> Example</a></li>
<li class="toctree-l5"><a class="reference internal" href="../20_internet/socketserver.html#asynchronous-mixins">4.4.3. Asynchronous Mixins</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/basehttpserver.html">5. <code class="docutils literal"><span class="pre">BaseHTTPServer</span></code> &#8212; Basic HTTP server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/basehttpserver.html#more-examples">5.1. More examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/simplehttpserver.html">6. <code class="docutils literal"><span class="pre">SimpleHTTPServer</span></code> &#8212; Simple HTTP request handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/cgihttpserver.html">7. <code class="docutils literal"><span class="pre">CGIHTTPServer</span></code> &#8212; CGI-capable HTTP request handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/cookielib.html">8. <code class="docutils literal"><span class="pre">cookielib</span></code> &#8212; Cookie handling for HTTP clients</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cookielib.html#cookiejar-and-filecookiejar-objects">8.1. CookieJar and FileCookieJar Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cookielib.html#filecookiejar-subclasses-and-co-operation-with-web-browsers">8.2. FileCookieJar subclasses and co-operation with web browsers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cookielib.html#cookiepolicy-objects">8.3. CookiePolicy Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cookielib.html#defaultcookiepolicy-objects">8.4. DefaultCookiePolicy Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cookielib.html#cookie-objects">8.5. Cookie Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cookielib.html#examples">8.6. Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/cookie.html">9. <code class="docutils literal"><span class="pre">Cookie</span></code> &#8212; HTTP state management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cookie.html#cookie-objects">9.1. Cookie Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cookie.html#morsel-objects">9.2. Morsel Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/cookie.html#example">9.3. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/xmlrpclib.html">10. <code class="docutils literal"><span class="pre">xmlrpclib</span></code> &#8212; XML-RPC client access</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/xmlrpclib.html#serverproxy-objects">10.1. ServerProxy Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/xmlrpclib.html#boolean-objects">10.2. Boolean Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/xmlrpclib.html#datetime-objects">10.3. DateTime Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/xmlrpclib.html#binary-objects">10.4. Binary Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/xmlrpclib.html#fault-objects">10.5. Fault Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/xmlrpclib.html#protocolerror-objects">10.6. ProtocolError Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/xmlrpclib.html#multicall-objects">10.7. MultiCall Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/xmlrpclib.html#convenience-functions">10.8. Convenience Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/xmlrpclib.html#example-of-client-usage">10.9. Example of Client Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/xmlrpclib.html#example-of-client-and-server-usage">10.10. Example of Client and Server Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/simplexmlrpcserver.html">11. <code class="docutils literal"><span class="pre">SimpleXMLRPCServer</span></code> &#8212; Basic XML-RPC server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/simplexmlrpcserver.html#simplexmlrpcserver-objects">11.1. SimpleXMLRPCServer Objects</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../20_internet/simplexmlrpcserver.html#simplexmlrpcserver-example">11.1.1. SimpleXMLRPCServer Example</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/simplexmlrpcserver.html#cgixmlrpcrequesthandler">11.2. CGIXMLRPCRequestHandler</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../20_internet/docxmlrpcserver.html">12. <code class="docutils literal"><span class="pre">DocXMLRPCServer</span></code> &#8212; Self-documenting XML-RPC server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/docxmlrpcserver.html#docxmlrpcserver-objects">12.1. DocXMLRPCServer Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../20_internet/docxmlrpcserver.html#doccgixmlrpcrequesthandler">12.2. DocCGIXMLRPCRequestHandler</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../21to25.html">Ch 21 - 25</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../21_multimedia/21.html">21 Multimedia Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../21_multimedia/audioop.html">1. <code class="docutils literal"><span class="pre">audioop</span></code> &#8212; Manipulate raw audio data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../21_multimedia/imageop.html">2. <code class="docutils literal"><span class="pre">imageop</span></code> &#8212; Manipulate raw image data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../21_multimedia/aifc.html">3. <code class="docutils literal"><span class="pre">aifc</span></code> &#8212; Read and write AIFF and AIFC files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../21_multimedia/sunau.html">4. <code class="docutils literal"><span class="pre">sunau</span></code> &#8212; Read and write Sun AU files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../21_multimedia/sunau.html#au-read-objects">4.1. AU_read Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../21_multimedia/sunau.html#au-write-objects">4.2. AU_write Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../21_multimedia/wave.html">5. <code class="docutils literal"><span class="pre">wave</span></code> &#8212; Read and write WAV files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../21_multimedia/wave.html#wave-read-objects">5.1. Wave_read Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../21_multimedia/wave.html#wave-write-objects">5.2. Wave_write Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../21_multimedia/chunk.html">6. <code class="docutils literal"><span class="pre">chunk</span></code> &#8212; Read IFF chunked data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../21_multimedia/colorsys.html">7. <code class="docutils literal"><span class="pre">colorsys</span></code> &#8212; Conversions between color systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../21_multimedia/imghdr.html">8. <code class="docutils literal"><span class="pre">imghdr</span></code> &#8212; Determine the type of an image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../21_multimedia/sndhdr.html">9. <code class="docutils literal"><span class="pre">sndhdr</span></code> &#8212; Determine type of sound file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../21_multimedia/ossaudiodev.html">10. <code class="docutils literal"><span class="pre">ossaudiodev</span></code> &#8212; Access to OSS-compatible audio devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../21_multimedia/ossaudiodev.html#audio-device-objects">10.1. Audio Device Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../21_multimedia/ossaudiodev.html#mixer-device-objects">10.2. Mixer Device Objects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../22_i18n/22.html">22 Internationalization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../22_i18n/gettext.html">1. <code class="docutils literal"><span class="pre">gettext</span></code> &#8212; Multilingual internationalization services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../22_i18n/gettext.html#gnu-gettext-api">1.1. GNU <strong class="program">gettext</strong> API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../22_i18n/gettext.html#class-based-api">1.2. Class-based API</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../22_i18n/gettext.html#the-nulltranslations-class">1.2.1. The <code class="docutils literal"><span class="pre">NullTranslations</span></code> class</a></li>
<li class="toctree-l5"><a class="reference internal" href="../22_i18n/gettext.html#the-gnutranslations-class">1.2.2. The <code class="docutils literal"><span class="pre">GNUTranslations</span></code> class</a></li>
<li class="toctree-l5"><a class="reference internal" href="../22_i18n/gettext.html#solaris-message-catalog-support">1.2.3. Solaris message catalog support</a></li>
<li class="toctree-l5"><a class="reference internal" href="../22_i18n/gettext.html#the-catalog-constructor">1.2.4. The Catalog constructor</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../22_i18n/gettext.html#internationalizing-your-programs-and-modules">1.3. Internationalizing your programs and modules</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../22_i18n/gettext.html#localizing-your-module">1.3.1. Localizing your module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../22_i18n/gettext.html#localizing-your-application">1.3.2. Localizing your application</a></li>
<li class="toctree-l5"><a class="reference internal" href="../22_i18n/gettext.html#changing-languages-on-the-fly">1.3.3. Changing languages on the fly</a></li>
<li class="toctree-l5"><a class="reference internal" href="../22_i18n/gettext.html#deferred-translations">1.3.4. Deferred translations</a></li>
<li class="toctree-l5"><a class="reference internal" href="../22_i18n/gettext.html#gettext-vs-lgettext">1.3.5. <code class="docutils literal"><span class="pre">gettext()</span></code> vs. <code class="docutils literal"><span class="pre">lgettext()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../22_i18n/gettext.html#acknowledgements">1.4. Acknowledgements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../22_i18n/locale.html">2. <code class="docutils literal"><span class="pre">locale</span></code> &#8212; Internationalization services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../22_i18n/locale.html#background-details-hints-tips-and-caveats">2.1. Background, details, hints, tips and caveats</a></li>
<li class="toctree-l4"><a class="reference internal" href="../22_i18n/locale.html#for-extension-writers-and-programs-that-embed-python">2.2. For extension writers and programs that embed Python</a></li>
<li class="toctree-l4"><a class="reference internal" href="../22_i18n/locale.html#access-to-message-catalogs">2.3. Access to message catalogs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../23_frameworkds/23.html">23 Program Frameworks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../23_frameworkds/cmd.html">1. <code class="docutils literal"><span class="pre">cmd</span></code> &#8212; Support for line-oriented command interpreters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../23_frameworkds/cmd.html#cmd-objects">1.1. Cmd Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../23_frameworkds/shlex.html">2. <code class="docutils literal"><span class="pre">shlex</span></code> &#8212; Simple lexical analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../23_frameworkds/shlex.html#shlex-objects">2.1. shlex Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../23_frameworkds/shlex.html#parsing-rules">2.2. Parsing Rules</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../24_tk/24.html">24 Graphical User Interfaces with Tk</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../24_tk/tkinter.html">1. <code class="docutils literal"><span class="pre">Tkinter</span></code> &#8212; Python interface to Tcl/Tk</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/tkinter.html#tkinter-modules">1.1. Tkinter Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/tkinter.html#tkinter-life-preserver">1.2. Tkinter Life Preserver</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tkinter.html#how-to-use-this-section">1.2.1. How To Use This Section</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tkinter.html#a-simple-hello-world-program">1.2.2. A Simple Hello World Program</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/tkinter.html#a-very-quick-look-at-tcl-tk">1.3. A (Very) Quick Look at Tcl/Tk</a></li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/tkinter.html#mapping-basic-tk-into-tkinter">1.4. Mapping Basic Tk into Tkinter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/tkinter.html#how-tk-and-tkinter-are-related">1.5. How Tk and Tkinter are Related</a></li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/tkinter.html#handy-reference">1.6. Handy Reference</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tkinter.html#setting-options">1.6.1. Setting Options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tkinter.html#the-packer">1.6.2. The Packer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tkinter.html#packer-options">1.6.3. Packer Options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tkinter.html#coupling-widget-variables">1.6.4. Coupling Widget Variables</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tkinter.html#the-window-manager">1.6.5. The Window Manager</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tkinter.html#tk-option-data-types">1.6.6. Tk Option Data Types</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tkinter.html#bindings-and-events">1.6.7. Bindings and Events</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tkinter.html#the-index-parameter">1.6.8. The index Parameter</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tkinter.html#images">1.6.9. Images</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/tkinter.html#file-handlers">1.7. File Handlers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../24_tk/ttk.html">2. <code class="docutils literal"><span class="pre">ttk</span></code> &#8212; Tk themed widgets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/ttk.html#using-ttk">2.1. Using Ttk</a></li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/ttk.html#ttk-widgets">2.2. Ttk Widgets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/ttk.html#widget">2.3. Widget</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#standard-options">2.3.1. Standard Options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#scrollable-widget-options">2.3.2. Scrollable Widget Options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#label-options">2.3.3. Label Options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#compatibility-options">2.3.4. Compatibility Options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#widget-states">2.3.5. Widget States</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#ttk-widget">2.3.6. ttk.Widget</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/ttk.html#combobox">2.4. Combobox</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#options">2.4.1. Options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#virtual-events">2.4.2. Virtual events</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#ttk-combobox">2.4.3. ttk.Combobox</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/ttk.html#notebook">2.5. Notebook</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#id1">2.5.1. Options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#tab-options">2.5.2. Tab Options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#tab-identifiers">2.5.3. Tab Identifiers</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#id2">2.5.4. Virtual Events</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#ttk-notebook">2.5.5. ttk.Notebook</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/ttk.html#progressbar">2.6. Progressbar</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#id3">2.6.1. Options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#ttk-progressbar">2.6.2. ttk.Progressbar</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/ttk.html#separator">2.7. Separator</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#id4">2.7.1. Options</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/ttk.html#sizegrip">2.8. Sizegrip</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#platform-specific-notes">2.8.1. Platform-specific notes</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#bugs">2.8.2. Bugs</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/ttk.html#treeview">2.9. Treeview</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#id5">2.9.1. Options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#item-options">2.9.2. Item Options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#tag-options">2.9.3. Tag Options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#column-identifiers">2.9.4. Column Identifiers</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#id6">2.9.5. Virtual Events</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#ttk-treeview">2.9.6. ttk.Treeview</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/ttk.html#ttk-styling">2.10. Ttk Styling</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/ttk.html#layouts">2.10.1. Layouts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../24_tk/tix.html">3. <code class="docutils literal"><span class="pre">Tix</span></code> &#8212; Extension widgets for Tk</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/tix.html#using-tix">3.1. Using Tix</a></li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/tix.html#tix-widgets">3.2. Tix Widgets</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tix.html#basic-widgets">3.2.1. Basic Widgets</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tix.html#file-selectors">3.2.2. File Selectors</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tix.html#hierarchical-listbox">3.2.3. Hierarchical ListBox</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tix.html#tabular-listbox">3.2.4. Tabular ListBox</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tix.html#manager-widgets">3.2.5. Manager Widgets</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tix.html#image-types">3.2.6. Image Types</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tix.html#miscellaneous-widgets">3.2.7. Miscellaneous Widgets</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/tix.html#form-geometry-manager">3.2.8. Form Geometry Manager</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/tix.html#tix-commands">3.3. Tix Commands</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../24_tk/scrolledtext.html">4. <code class="docutils literal"><span class="pre">ScrolledText</span></code> &#8212; Scrolled Text Widget</a></li>
<li class="toctree-l3"><a class="reference internal" href="../24_tk/turtle.html">5. <code class="docutils literal"><span class="pre">turtle</span></code> &#8212; Turtle graphics for Tk</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/turtle.html#introduction">5.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/turtle.html#overview-over-available-turtle-and-screen-methods">5.2. Overview over available Turtle and Screen methods</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#turtle-methods">5.2.1. Turtle methods</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#methods-of-turtlescreen-screen">5.2.2. Methods of TurtleScreen/Screen</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/turtle.html#methods-of-rawturtle-turtle-and-corresponding-functions">5.3. Methods of RawTurtle/Turtle and corresponding functions</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#turtle-motion">5.3.1. Turtle motion</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#tell-turtle-s-state">5.3.2. Tell Turtle&#8217;s state</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#settings-for-measurement">5.3.3. Settings for measurement</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#pen-control">5.3.4. Pen control</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../24_tk/turtle.html#drawing-state">5.3.4.1. Drawing state</a></li>
<li class="toctree-l6"><a class="reference internal" href="../24_tk/turtle.html#color-control">5.3.4.2. Color control</a></li>
<li class="toctree-l6"><a class="reference internal" href="../24_tk/turtle.html#filling">5.3.4.3. Filling</a></li>
<li class="toctree-l6"><a class="reference internal" href="../24_tk/turtle.html#more-drawing-control">5.3.4.4. More drawing control</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#turtle-state">5.3.5. Turtle state</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../24_tk/turtle.html#visibility">5.3.5.1. Visibility</a></li>
<li class="toctree-l6"><a class="reference internal" href="../24_tk/turtle.html#appearance">5.3.5.2. Appearance</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#using-events">5.3.6. Using events</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#special-turtle-methods">5.3.7. Special Turtle methods</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#excursus-about-the-use-of-compound-shapes">5.3.8. Excursus about the use of compound shapes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/turtle.html#methods-of-turtlescreen-screen-and-corresponding-functions">5.4. Methods of TurtleScreen/Screen and corresponding functions</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#window-control">5.4.1. Window control</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#animation-control">5.4.2. Animation control</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#using-screen-events">5.4.3. Using screen events</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#settings-and-special-methods">5.4.4. Settings and special methods</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#methods-specific-to-screen-not-inherited-from-turtlescreen">5.4.5. Methods specific to Screen, not inherited from TurtleScreen</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/turtle.html#the-public-classes-of-the-module-turtle">5.5. The public classes of the module <code class="docutils literal"><span class="pre">turtle</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/turtle.html#help-and-configuration">5.6. Help and configuration</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#how-to-use-help">5.6.1. How to use help</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#translation-of-docstrings-into-different-languages">5.6.2. Translation of docstrings into different languages</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/turtle.html#how-to-configure-screen-and-turtles">5.6.3. How to configure Screen and Turtles</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/turtle.html#demo-scripts">5.7. Demo scripts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../24_tk/idle.html">6. IDLE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/idle.html#menus">6.1. Menus</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#file-menu-shell-and-editor">6.1.1. File menu (Shell and Editor)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#edit-menu-shell-and-editor">6.1.2. Edit menu (Shell and Editor)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#format-menu-editor-window-only">6.1.3. Format menu (Editor window only)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#run-menu-editor-window-only">6.1.4. Run menu (Editor window only)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#shell-menu-shell-window-only">6.1.5. Shell menu (Shell window only)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#debug-menu-shell-window-only">6.1.6. Debug menu (Shell window only)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#options-menu-shell-and-editor">6.1.7. Options menu (Shell and Editor)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#window-menu-shell-and-editor">6.1.8. Window menu (Shell and Editor)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#help-menu-shell-and-editor">6.1.9. Help menu (Shell and Editor)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#context-menus">6.1.10. Context Menus</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/idle.html#editing-and-navigation">6.2. Editing and navigation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#automatic-indentation">6.2.1. Automatic indentation</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#completions">6.2.2. Completions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#calltips">6.2.3. Calltips</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#python-shell-window">6.2.4. Python Shell window</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#text-colors">6.2.5. Text colors</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/idle.html#startup-and-code-execution">6.3. Startup and code execution</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#command-line-usage">6.3.1. Command line usage</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#idle-console-differences">6.3.2. IDLE-console differences</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#running-without-a-subprocess">6.3.3. Running without a subprocess</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../24_tk/idle.html#help-and-preferences">6.4. Help and preferences</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#additional-help-sources">6.4.1. Additional help sources</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#setting-preferences">6.4.2. Setting preferences</a></li>
<li class="toctree-l5"><a class="reference internal" href="../24_tk/idle.html#extensions">6.4.3. Extensions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../24_tk/othergui.html">7. Other Graphical User Interface Packages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../25_devtools/25.html">25 Development Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../25_devtools/pydoc.html">1. <code class="docutils literal"><span class="pre">pydoc</span></code> &#8212; Documentation generator and online help system</a></li>
<li class="toctree-l3"><a class="reference internal" href="../25_devtools/doctest.html">2. <code class="docutils literal"><span class="pre">doctest</span></code> &#8212; Test interactive Python examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/doctest.html#simple-usage-checking-examples-in-docstrings">2.1. Simple Usage: Checking Examples in Docstrings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/doctest.html#simple-usage-checking-examples-in-a-text-file">2.2. Simple Usage: Checking Examples in a Text File</a></li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/doctest.html#how-it-works">2.3. How It Works</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/doctest.html#which-docstrings-are-examined">2.3.1. Which Docstrings Are Examined?</a></li>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/doctest.html#how-are-docstring-examples-recognized">2.3.2. How are Docstring Examples Recognized?</a></li>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/doctest.html#what-s-the-execution-context">2.3.3. What&#8217;s the Execution Context?</a></li>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/doctest.html#what-about-exceptions">2.3.4. What About Exceptions?</a></li>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/doctest.html#option-flags">2.3.5. Option Flags</a></li>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/doctest.html#directives">2.3.6. Directives</a></li>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/doctest.html#warnings">2.3.7. Warnings</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/doctest.html#basic-api">2.4. Basic API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/doctest.html#unittest-api">2.5. Unittest API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/doctest.html#advanced-api">2.6. Advanced API</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/doctest.html#doctest-objects">2.6.1. DocTest Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/doctest.html#example-objects">2.6.2. Example Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/doctest.html#doctestfinder-objects">2.6.3. DocTestFinder objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/doctest.html#doctestparser-objects">2.6.4. DocTestParser objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/doctest.html#doctestrunner-objects">2.6.5. DocTestRunner objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/doctest.html#outputchecker-objects">2.6.6. OutputChecker objects</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/doctest.html#debugging">2.7. Debugging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/doctest.html#soapbox">2.8. Soapbox</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../25_devtools/unittest.html">3. <code class="docutils literal"><span class="pre">unittest</span></code> &#8212; Unit testing framework</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/unittest.html#basic-example">3.1. Basic example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/unittest.html#command-line-interface">3.2. Command-Line Interface</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/unittest.html#command-line-options">3.2.1. Command-line options</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/unittest.html#test-discovery">3.3. Test Discovery</a></li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/unittest.html#organizing-test-code">3.4. Organizing test code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/unittest.html#re-using-old-test-code">3.5. Re-using old test code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/unittest.html#skipping-tests-and-expected-failures">3.6. Skipping tests and expected failures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/unittest.html#classes-and-functions">3.7. Classes and functions</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/unittest.html#test-cases">3.7.1. Test cases</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../25_devtools/unittest.html#deprecated-aliases">3.7.1.1. Deprecated aliases</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/unittest.html#grouping-tests">3.7.2. Grouping tests</a></li>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/unittest.html#loading-and-running-tests">3.7.3. Loading and running tests</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../25_devtools/unittest.html#load-tests-protocol">3.7.3.1. load_tests Protocol</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/unittest.html#class-and-module-fixtures">3.8. Class and Module Fixtures</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/unittest.html#setupclass-and-teardownclass">3.8.1. setUpClass and tearDownClass</a></li>
<li class="toctree-l5"><a class="reference internal" href="../25_devtools/unittest.html#setupmodule-and-teardownmodule">3.8.2. setUpModule and tearDownModule</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/unittest.html#signal-handling">3.9. Signal Handling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../25_devtools/2to3.html">4. 2to3 - Automated Python 2 to 3 code translation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/2to3.html#using-2to3">4.1. Using 2to3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/2to3.html#fixers">4.2. Fixers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/2to3.html#module-lib2to3">4.3. <code class="docutils literal"><span class="pre">lib2to3</span></code> - 2to3&#8217;s library</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../25_devtools/test.html">5. <code class="docutils literal"><span class="pre">test</span></code> &#8212; Regression tests package for Python</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/test.html#writing-unit-tests-for-the-test-package">5.1. Writing Unit Tests for the <code class="docutils literal"><span class="pre">test</span></code> package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../25_devtools/test.html#running-tests-using-the-command-line-interface">5.2. Running tests using the command-line interface</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../25_devtools/test.html#module-test.test_support">6. <code class="docutils literal"><span class="pre">test.test_support</span></code> &#8212; Utility functions for tests</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../26to30.html">Ch 26 - 30</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../26_debugging_and_profiling/26.html">26. Debugging and Profiling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../26_debugging_and_profiling/26.1_bdb.html">1. <code class="docutils literal"><span class="pre">bdb</span></code> &#8212; Debugger framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../26_debugging_and_profiling/26.23_pdb.html">2. <code class="docutils literal"><span class="pre">pdb</span></code> &#8212; The Python Debugger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.23_pdb.html#debugger-commands">2.1. Debugger Commands</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../26_debugging_and_profiling/26.4.python_profiler.html">3. <code class="docutils literal"><span class="pre">cProfile</span></code>, <code class="docutils literal"><span class="pre">profile</span></code> &#8212; The Python Profilers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.4.python_profiler.html#introduction-to-the-profilers">3.1. Introduction to the profilers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.4.python_profiler.html#instant-user-s-manual">3.2. Instant User&#8217;s Manual</a></li>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.4.python_profiler.html#module-cProfile">3.3. <code class="docutils literal"><span class="pre">profile</span></code> and <code class="docutils literal"><span class="pre">cProfile</span></code> Module Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.4.python_profiler.html#the-stats-class">3.4. The <code class="docutils literal"><span class="pre">Stats</span></code> Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.4.python_profiler.html#what-is-deterministic-profiling">3.5. What Is Deterministic Profiling?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.4.python_profiler.html#limitations">3.6. Limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.4.python_profiler.html#calibration">3.7. Calibration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.4.python_profiler.html#using-a-custom-timer">3.8. Using a custom timer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../26_debugging_and_profiling/26.5_hotshot.html">4. <code class="docutils literal"><span class="pre">hotshot</span></code> &#8212; High performance logging profiler</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.5_hotshot.html#profile-objects">4.1. Profile Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.5_hotshot.html#module-hotshot.stats">4.2. Using hotshot data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.5_hotshot.html#example-usage">4.3. Example Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../26_debugging_and_profiling/26.6_timeit.html">5. <code class="docutils literal"><span class="pre">timeit</span></code> &#8212; Measure execution time of small code snippets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.6_timeit.html#basic-examples">5.1. Basic Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.6_timeit.html#python-interface">5.2. Python Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.6_timeit.html#command-line-interface">5.3. Command-Line Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.6_timeit.html#examples">5.4. Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../26_debugging_and_profiling/26.7_trace.html">6. <code class="docutils literal"><span class="pre">trace</span></code> &#8212; Trace or track Python statement execution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.7_trace.html#command-line-usage">6.1. Command-Line Usage</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../26_debugging_and_profiling/26.7_trace.html#main-options">6.1.1. Main options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../26_debugging_and_profiling/26.7_trace.html#modifiers">6.1.2. Modifiers</a></li>
<li class="toctree-l5"><a class="reference internal" href="../26_debugging_and_profiling/26.7_trace.html#filters">6.1.3. Filters</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../26_debugging_and_profiling/26.7_trace.html#programmatic-interface">6.2. Programmatic Interface</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../27_distribution/27.html">27 Software Packaging and Distribution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../27_distribution/distutils.html">1. <code class="docutils literal"><span class="pre">distutils</span></code> &#8212; Building and installing Python modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../27_distribution/ensurepip.html">2. <code class="docutils literal"><span class="pre">ensurepip</span></code> &#8212; Bootstrapping the <code class="docutils literal"><span class="pre">pip</span></code> installer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../27_distribution/ensurepip.html#command-line-interface">2.1. Command line interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../27_distribution/ensurepip.html#module-api">2.2. Module API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../28_runtime_service/28.html">28 Python Runtime Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../28_runtime_service/sys.html">1. <code class="docutils literal"><span class="pre">sys</span></code> &#8212; System-specific parameters and functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../28_runtime_service/sysconfig.html">2. <code class="docutils literal"><span class="pre">sysconfig</span></code> &#8212; Provide access to Python&#8217;s configuration information</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/sysconfig.html#configuration-variables">2.1. Configuration variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/sysconfig.html#installation-paths">2.2. Installation paths</a></li>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/sysconfig.html#other-functions">2.3. Other functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../28_runtime_service/__builtin__.html">3. <code class="docutils literal"><span class="pre">__builtin__</span></code> &#8212; Built-in objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../28_runtime_service/future_builtins.html">4. <code class="docutils literal"><span class="pre">future_builtins</span></code> &#8212; Python 3 builtins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../28_runtime_service/__main__.html">5. <code class="docutils literal"><span class="pre">__main__</span></code> &#8212; Top-level script environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../28_runtime_service/warnings.html">6. <code class="docutils literal"><span class="pre">warnings</span></code> &#8212; Warning control</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/warnings.html#warning-categories">6.1. Warning Categories</a></li>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/warnings.html#the-warnings-filter">6.2. The Warnings Filter</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../28_runtime_service/warnings.html#default-warning-filters">6.2.1. Default Warning Filters</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/warnings.html#temporarily-suppressing-warnings">6.3. Temporarily Suppressing Warnings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/warnings.html#testing-warnings">6.4. Testing Warnings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/warnings.html#updating-code-for-new-versions-of-python">6.5. Updating Code For New Versions of Python</a></li>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/warnings.html#available-functions">6.6. Available Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/warnings.html#available-context-managers">6.7. Available Context Managers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../28_runtime_service/contextlib.html">7. <code class="docutils literal"><span class="pre">contextlib</span></code> &#8212; Utilities for <code class="docutils literal"><span class="pre">with</span></code>-statement contexts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../28_runtime_service/abc.html">8. <code class="docutils literal"><span class="pre">abc</span></code> &#8212; Abstract Base Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../28_runtime_service/atexit.html">9. <code class="docutils literal"><span class="pre">atexit</span></code> &#8212; Exit handlers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/atexit.html#atexit-example">9.1. <code class="docutils literal"><span class="pre">atexit</span></code> Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../28_runtime_service/traceback.html">10. <code class="docutils literal"><span class="pre">traceback</span></code> &#8212; Print or retrieve a stack traceback</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/traceback.html#traceback-examples">10.1. Traceback Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../28_runtime_service/__future__.html">11. <code class="docutils literal"><span class="pre">__future__</span></code> &#8212; Future statement definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../28_runtime_service/gc.html">12. <code class="docutils literal"><span class="pre">gc</span></code> &#8212; Garbage Collector interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../28_runtime_service/inspect.html">13. <code class="docutils literal"><span class="pre">inspect</span></code> &#8212; Inspect live objects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/inspect.html#types-and-members">13.1. Types and members</a></li>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/inspect.html#retrieving-source-code">13.2. Retrieving source code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/inspect.html#classes-and-functions">13.3. Classes and functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/inspect.html#the-interpreter-stack">13.4. The interpreter stack</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../28_runtime_service/site.html">14. <code class="docutils literal"><span class="pre">site</span></code> &#8212; Site-specific configuration hook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../28_runtime_service/user.html">15. <code class="docutils literal"><span class="pre">user</span></code> &#8212; User-specific configuration hook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../28_runtime_service/fpectl.html">16. <code class="docutils literal"><span class="pre">fpectl</span></code> &#8212; Floating point exception control</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/fpectl.html#example">16.1. Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../28_runtime_service/fpectl.html#limitations-and-other-considerations">16.2. Limitations and other considerations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../29_custom_interpreter/29.html">29 Custom Python Interpreters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../29_custom_interpreter/code.html">1. <code class="docutils literal"><span class="pre">code</span></code> &#8212; Interpreter base classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../29_custom_interpreter/code.html#interactive-interpreter-objects">1.1. Interactive Interpreter Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../29_custom_interpreter/code.html#interactive-console-objects">1.2. Interactive Console Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../29_custom_interpreter/codeop.html">2. <code class="docutils literal"><span class="pre">codeop</span></code> &#8212; Compile Python code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../30_restricted_exec/30.html">30 Restricted Execution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../30_restricted_exec/rexec.html">1. <code class="docutils literal"><span class="pre">rexec</span></code> &#8212; Restricted execution framework</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../30_restricted_exec/rexec.html#rexec-objects">1.1. RExec Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../30_restricted_exec/rexec.html#defining-restricted-environments">1.2. Defining restricted environments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../30_restricted_exec/rexec.html#an-example">1.3. An example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../30_restricted_exec/bastion.html">2. <code class="docutils literal"><span class="pre">Bastion</span></code> &#8212; Restricting access to objects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../31to37.html">Ch 31 - 37</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../31_modules/31.html">31 Importing Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../31_modules/imp.html">1. <code class="docutils literal"><span class="pre">imp</span></code> &#8212; Access the <code class="docutils literal"><span class="pre">import</span></code> internals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../31_modules/imp.html#examples">1.1. Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../31_modules/importlib.html">2. <code class="docutils literal"><span class="pre">importlib</span></code> &#8211; Convenience wrappers for <code class="docutils literal"><span class="pre">__import__()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../31_modules/imputil.html">3. (depr) <code class="docutils literal"><span class="pre">imputil</span></code> &#8212; Import utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../31_modules/imputil.html#examples">3.1. Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../31_modules/zipimport.html">4. <code class="docutils literal"><span class="pre">zipimport</span></code> &#8212; Import modules from Zip archives</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../31_modules/zipimport.html#zipimporter-objects">4.1. zipimporter Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../31_modules/zipimport.html#examples">4.2. Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../31_modules/pkgutil.html">5. <code class="docutils literal"><span class="pre">pkgutil</span></code> &#8212; Package extension utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../31_modules/modulefinder.html">6. <code class="docutils literal"><span class="pre">modulefinder</span></code> &#8212; Find modules used by a script</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../31_modules/modulefinder.html#example-usage-of-modulefinder">6.1. Example usage of <code class="docutils literal"><span class="pre">ModuleFinder</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../31_modules/runpy.html">7. <code class="docutils literal"><span class="pre">runpy</span></code> &#8212; Locating and executing Python modules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../32_python_lang_serv/32.html">32 Python Language Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../32_python_lang_serv/parser.html">1. <code class="docutils literal"><span class="pre">parser</span></code> &#8212; Access Python parse trees</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../32_python_lang_serv/parser.html#creating-st-objects">1.1. Creating ST Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../32_python_lang_serv/parser.html#converting-st-objects">1.2. Converting ST Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../32_python_lang_serv/parser.html#queries-on-st-objects">1.3. Queries on ST Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../32_python_lang_serv/parser.html#exceptions-and-error-handling">1.4. Exceptions and Error Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../32_python_lang_serv/parser.html#st-objects">1.5. ST Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../32_python_lang_serv/parser.html#example-emulation-of-compile">1.6. Example: Emulation of <code class="docutils literal"><span class="pre">compile()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../32_python_lang_serv/ast.html">2. <code class="docutils literal"><span class="pre">ast</span></code> &#8212; Abstract Syntax Trees</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../32_python_lang_serv/ast.html#node-classes">2.1. Node classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../32_python_lang_serv/ast.html#abstract-grammar">2.2. Abstract Grammar</a></li>
<li class="toctree-l4"><a class="reference internal" href="../32_python_lang_serv/ast.html#ast-helpers">2.3. <code class="docutils literal"><span class="pre">ast</span></code> Helpers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../32_python_lang_serv/symtable.html">3. <code class="docutils literal"><span class="pre">symtable</span></code> &#8212; Access to the compiler&#8217;s symbol tables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../32_python_lang_serv/symtable.html#generating-symbol-tables">3.1. Generating Symbol Tables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../32_python_lang_serv/symtable.html#examining-symbol-tables">3.2. Examining Symbol Tables</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../32_python_lang_serv/symbol.html">4. <code class="docutils literal"><span class="pre">symbol</span></code> &#8212; Constants used with Python parse trees</a></li>
<li class="toctree-l3"><a class="reference internal" href="../32_python_lang_serv/token.html">5. <code class="docutils literal"><span class="pre">token</span></code> &#8212; Constants used with Python parse trees</a></li>
<li class="toctree-l3"><a class="reference internal" href="../32_python_lang_serv/keyword.html">6. <code class="docutils literal"><span class="pre">keyword</span></code> &#8212; Testing for Python keywords</a></li>
<li class="toctree-l3"><a class="reference internal" href="../32_python_lang_serv/tokenize.html">7. <code class="docutils literal"><span class="pre">tokenize</span></code> &#8212; Tokenizer for Python source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../32_python_lang_serv/tabnanny.html">8. <code class="docutils literal"><span class="pre">tabnanny</span></code> &#8212; Detection of ambiguous indentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../32_python_lang_serv/pyclbr.html">9. <code class="docutils literal"><span class="pre">pyclbr</span></code> &#8212; Python class browser support</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../32_python_lang_serv/pyclbr.html#class-objects">9.1. Class Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../32_python_lang_serv/pyclbr.html#function-objects">9.2. Function Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../32_python_lang_serv/py_compile.html">10. <code class="docutils literal"><span class="pre">py_compile</span></code> &#8212; Compile Python source files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../32_python_lang_serv/compileall.html">11. <code class="docutils literal"><span class="pre">compileall</span></code> &#8212; Byte-compile Python libraries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../32_python_lang_serv/compileall.html#command-line-use">11.1. Command-line use</a></li>
<li class="toctree-l4"><a class="reference internal" href="../32_python_lang_serv/compileall.html#public-functions">11.2. Public functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../32_python_lang_serv/dis.html">12. <code class="docutils literal"><span class="pre">dis</span></code> &#8212; Disassembler for Python bytecode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../32_python_lang_serv/dis.html#python-bytecode-instructions">12.1. Python Bytecode Instructions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../32_python_lang_serv/pickletools.html">13. <code class="docutils literal"><span class="pre">pickletools</span></code> &#8212; Tools for pickle developers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../33_compiler/33.html">33 (depr) Python compiler package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../33_compiler/33.html#module-compiler">The basic interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../33_compiler/33.html#limitations">Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../33_compiler/33.html#python-abstract-syntax">Python Abstract Syntax</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../33_compiler/33.html#module-compiler.ast">AST Nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../33_compiler/33.html#assignment-nodes">Assignment nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../33_compiler/33.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../33_compiler/33.html#module-compiler.visitor">Using Visitors to Walk ASTs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../33_compiler/33.html#bytecode-generation">Bytecode Generation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../34_formatter/34.html">34. Miscellaneous Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../34_formatter/34.1.formatter.html">1. <code class="docutils literal"><span class="pre">formatter</span></code> &#8212; Generic output formatting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../34_formatter/34.1.formatter.html#the-formatter-interface">1.1. The Formatter Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../34_formatter/34.1.formatter.html#formatter-implementations">1.2. Formatter Implementations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../34_formatter/34.1.formatter.html#the-writer-interface">1.3. The Writer Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../34_formatter/34.1.formatter.html#writer-implementations">1.4. Writer Implementations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../35_windows_service/35.html">35 MS Windows Specific Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../35_windows_service/msilib.html">1. <code class="docutils literal"><span class="pre">msilib</span></code> &#8212; Read and write Microsoft Installer files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../35_windows_service/msilib.html#database-objects">1.1. Database Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../35_windows_service/msilib.html#view-objects">1.2. View Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../35_windows_service/msilib.html#summary-information-objects">1.3. Summary Information Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../35_windows_service/msilib.html#record-objects">1.4. Record Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../35_windows_service/msilib.html#errors">1.5. Errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../35_windows_service/msilib.html#cab-objects">1.6. CAB Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../35_windows_service/msilib.html#directory-objects">1.7. Directory Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../35_windows_service/msilib.html#features">1.8. Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="../35_windows_service/msilib.html#gui-classes">1.9. GUI classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../35_windows_service/msilib.html#precomputed-tables">1.10. Precomputed tables</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../35_windows_service/msvcrt.html">2. <code class="docutils literal"><span class="pre">msvcrt</span></code> &#8211; Useful routines from the MS VC++ runtime</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../35_windows_service/msvcrt.html#file-operations">2.1. File Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../35_windows_service/msvcrt.html#console-i-o">2.2. Console I/O</a></li>
<li class="toctree-l4"><a class="reference internal" href="../35_windows_service/msvcrt.html#other-functions">2.3. Other Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../35_windows_service/_winreg.html">3. <code class="docutils literal"><span class="pre">_winreg</span></code> &#8211; Windows registry access</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../35_windows_service/_winreg.html#constants">3.1. Constants</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../35_windows_service/_winreg.html#hkey-constants">3.1.1. HKEY_* Constants</a></li>
<li class="toctree-l5"><a class="reference internal" href="../35_windows_service/_winreg.html#access-rights">3.1.2. Access Rights</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../35_windows_service/_winreg.html#bit-specific">3.1.2.1. 64-bit Specific</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../35_windows_service/_winreg.html#value-types">3.1.3. Value Types</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../35_windows_service/_winreg.html#registry-handle-objects">3.2. Registry Handle Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../35_windows_service/winsound.html">4. <code class="docutils literal"><span class="pre">winsound</span></code> &#8212; Sound-playing interface for Windows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../36_unix_specific_services/36.html">36. Unix Specific Services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../36_unix_specific_services/36.1.posix.html">1. <code class="docutils literal"><span class="pre">posix</span></code> &#8212; The most common POSIX system calls</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../36_unix_specific_services/36.1.posix.html#large-file-support">1.1. Large File Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../36_unix_specific_services/36.1.posix.html#notable-module-contents">1.2. Notable Module Contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../36_unix_specific_services/36.2.pwd.html">2. <code class="docutils literal"><span class="pre">pwd</span></code> &#8212; The password database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../36_unix_specific_services/36.3.spwd.html">3. <code class="docutils literal"><span class="pre">spwd</span></code> &#8212; The shadow password database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../36_unix_specific_services/36.4.grp.html">4. <code class="docutils literal"><span class="pre">grp</span></code> &#8212; The group database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../36_unix_specific_services/36.5.crypt.html">5. <code class="docutils literal"><span class="pre">crypt</span></code> &#8212; Function to check Unix passwords</a></li>
<li class="toctree-l3"><a class="reference internal" href="../36_unix_specific_services/36.6.dl.html">6. (deprecated) <code class="docutils literal"><span class="pre">dl</span></code> &#8212; Call C functions in shared objects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../36_unix_specific_services/36.6.dl.html#dl-objects">6.1. Dl Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../36_unix_specific_services/36.7.termios.html">7. <code class="docutils literal"><span class="pre">termios</span></code> &#8212; POSIX style tty control</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../36_unix_specific_services/36.7.termios.html#example">7.1. Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../36_unix_specific_services/36.8.tty.html">8. <code class="docutils literal"><span class="pre">tty</span></code> &#8212; Terminal control functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../36_unix_specific_services/36.9.pty.html">9. <code class="docutils literal"><span class="pre">pty</span></code> &#8212; Pseudo-terminal utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../36_unix_specific_services/36.10.fcntl.html">10. <code class="docutils literal"><span class="pre">fcntl</span></code> &#8212; The <code class="docutils literal"><span class="pre">fcntl</span></code> and <code class="docutils literal"><span class="pre">ioctl</span></code> system calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="../36_unix_specific_services/36.11.pipes.html">11. <code class="docutils literal"><span class="pre">pipes</span></code> &#8212; Interface to shell pipelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../36_unix_specific_services/36.11.pipes.html#template-objects">11.1. Template Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../36_unix_specific_services/36.12.posixfile.html">12. <code class="docutils literal"><span class="pre">posixfile</span></code> &#8212; File-like objects with locking support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../36_unix_specific_services/36.13.resource.html">13. <code class="docutils literal"><span class="pre">resource</span></code> &#8212; Resource usage information</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../36_unix_specific_services/36.13.resource.html#resource-limits">13.1. Resource Limits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../36_unix_specific_services/36.13.resource.html#resource-usage">13.2. Resource Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../36_unix_specific_services/36.14.nis.html">14. <code class="docutils literal"><span class="pre">nis</span></code> &#8212; Interface to Sun&#8217;s NIS (Yellow Pages)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../36_unix_specific_services/36.15.syslog.html">15. <code class="docutils literal"><span class="pre">syslog</span></code> &#8212; Unix syslog library routines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../36_unix_specific_services/36.15.syslog.html#examples">15.1. Examples</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../36_unix_specific_services/36.15.syslog.html#simple-example">15.1.1. Simple example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../36_unix_specific_services/36.16.commands.html">16. (deprecated) <code class="docutils literal"><span class="pre">commands</span></code> &#8212; Utilities for running commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../37_mac_services/37.html">37 Mac OS X specific services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../37_mac_services/ic.html">1. <code class="docutils literal"><span class="pre">ic</span></code> &#8212; Access to the Mac OS X Internet Config</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/ic.html#ic-objects">1.1. IC Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../37_mac_services/macos.html">2. <code class="docutils literal"><span class="pre">MacOS</span></code> &#8212; Access to Mac OS interpreter features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../37_mac_services/macostools.html">3. <code class="docutils literal"><span class="pre">macostools</span></code> &#8212; Convenience routines for file manipulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../37_mac_services/macostools.html#module-findertools">4. <code class="docutils literal"><span class="pre">findertools</span></code> &#8212; The <strong class="program">finder</strong>&#8216;s Apple Events interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../37_mac_services/easydialogs.html">5. <code class="docutils literal"><span class="pre">EasyDialogs</span></code> &#8212; Basic Macintosh dialogs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/easydialogs.html#progressbar-objects">5.1. ProgressBar Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../37_mac_services/framework.html">6. <code class="docutils literal"><span class="pre">FrameWork</span></code> &#8212; Interactive application framework</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/framework.html#application-objects">6.1. Application Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/framework.html#window-objects">6.2. Window Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/framework.html#controlswindow-object">6.3. ControlsWindow Object</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/framework.html#scrolledwindow-object">6.4. ScrolledWindow Object</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/framework.html#dialogwindow-objects">6.5. DialogWindow Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../37_mac_services/autogil.html">7. <code class="docutils literal"><span class="pre">autoGIL</span></code> &#8212; Global Interpreter Lock handling in event loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="../37_mac_services/carbon.html">8. Mac OS Toolbox Modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.AE">8.1. <code class="docutils literal"><span class="pre">Carbon.AE</span></code> &#8212; Apple Events</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.AH">8.2. <code class="docutils literal"><span class="pre">Carbon.AH</span></code> &#8212; Apple Help</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.App">8.3. <code class="docutils literal"><span class="pre">Carbon.App</span></code> &#8212; Appearance Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Appearance">8.4. <code class="docutils literal"><span class="pre">Carbon.Appearance</span></code> &#8212; Appearance Manager constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.CF">8.5. <code class="docutils literal"><span class="pre">Carbon.CF</span></code> &#8212; Core Foundation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.CG">8.6. <code class="docutils literal"><span class="pre">Carbon.CG</span></code> &#8212; Core Graphics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.CarbonEvt">8.7. <code class="docutils literal"><span class="pre">Carbon.CarbonEvt</span></code> &#8212; Carbon Event Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.CarbonEvents">8.8. <code class="docutils literal"><span class="pre">Carbon.CarbonEvents</span></code> &#8212; Carbon Event Manager constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Cm">8.9. <code class="docutils literal"><span class="pre">Carbon.Cm</span></code> &#8212; Component Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Components">8.10. <code class="docutils literal"><span class="pre">Carbon.Components</span></code> &#8212; Component Manager constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.ControlAccessor">8.11. <code class="docutils literal"><span class="pre">Carbon.ControlAccessor</span></code> &#8212; Control Manager accssors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Controls">8.12. <code class="docutils literal"><span class="pre">Carbon.Controls</span></code> &#8212; Control Manager constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.CoreFounation">8.13. <code class="docutils literal"><span class="pre">Carbon.CoreFounation</span></code> &#8212; CoreFounation constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.CoreGraphics">8.14. <code class="docutils literal"><span class="pre">Carbon.CoreGraphics</span></code> &#8212; CoreGraphics constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Ctl">8.15. <code class="docutils literal"><span class="pre">Carbon.Ctl</span></code> &#8212; Control Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Dialogs">8.16. <code class="docutils literal"><span class="pre">Carbon.Dialogs</span></code> &#8212; Dialog Manager constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Dlg">8.17. <code class="docutils literal"><span class="pre">Carbon.Dlg</span></code> &#8212; Dialog Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Drag">8.18. <code class="docutils literal"><span class="pre">Carbon.Drag</span></code> &#8212; Drag and Drop Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Dragconst">8.19. <code class="docutils literal"><span class="pre">Carbon.Dragconst</span></code> &#8212; Drag and Drop Manager constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Events">8.20. <code class="docutils literal"><span class="pre">Carbon.Events</span></code> &#8212; Event Manager constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Evt">8.21. <code class="docutils literal"><span class="pre">Carbon.Evt</span></code> &#8212; Event Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.File">8.22. <code class="docutils literal"><span class="pre">Carbon.File</span></code> &#8212; File Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Files">8.23. <code class="docutils literal"><span class="pre">Carbon.Files</span></code> &#8212; File Manager constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Fm">8.24. <code class="docutils literal"><span class="pre">Carbon.Fm</span></code> &#8212; Font Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Folder">8.25. <code class="docutils literal"><span class="pre">Carbon.Folder</span></code> &#8212; Folder Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Folders">8.26. <code class="docutils literal"><span class="pre">Carbon.Folders</span></code> &#8212; Folder Manager constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Fonts">8.27. <code class="docutils literal"><span class="pre">Carbon.Fonts</span></code> &#8212; Font Manager constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Help">8.28. <code class="docutils literal"><span class="pre">Carbon.Help</span></code> &#8212; Help Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.IBCarbon">8.29. <code class="docutils literal"><span class="pre">Carbon.IBCarbon</span></code> &#8212; Carbon InterfaceBuilder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.IBCarbonRuntime">8.30. <code class="docutils literal"><span class="pre">Carbon.IBCarbonRuntime</span></code> &#8212; Carbon InterfaceBuilder constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Icns">8.31. <code class="docutils literal"><span class="pre">Carbon.Icn</span></code> &#8212; Carbon Icon Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Icons">8.32. <code class="docutils literal"><span class="pre">Carbon.Icons</span></code> &#8212; Carbon Icon Manager constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Launch">8.33. <code class="docutils literal"><span class="pre">Carbon.Launch</span></code> &#8212; Carbon Launch Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.LaunchServices">8.34. <code class="docutils literal"><span class="pre">Carbon.LaunchServices</span></code> &#8212; Carbon Launch Services constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.List">8.35. <code class="docutils literal"><span class="pre">Carbon.List</span></code> &#8212; List Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Lists">8.36. <code class="docutils literal"><span class="pre">Carbon.Lists</span></code> &#8212; List Manager constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.MacHelp">8.37. <code class="docutils literal"><span class="pre">Carbon.MacHelp</span></code> &#8212; Help Manager constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.MediaDescr">8.38. <code class="docutils literal"><span class="pre">Carbon.MediaDescr</span></code> &#8212; Parsers and generators for Quicktime Media descriptors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Menu">8.39. <code class="docutils literal"><span class="pre">Carbon.Menu</span></code> &#8212; Menu Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Menus">8.40. <code class="docutils literal"><span class="pre">Carbon.Menus</span></code> &#8212; Menu Manager constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Mlte">8.41. <code class="docutils literal"><span class="pre">Carbon.Mlte</span></code> &#8212; MultiLingual Text Editor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.OSA">8.42. <code class="docutils literal"><span class="pre">Carbon.OSA</span></code> &#8212; Carbon OSA Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.OSAconst">8.43. <code class="docutils literal"><span class="pre">Carbon.OSAconst</span></code> &#8212; Carbon OSA Interface constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.QDOffscreen">8.44. <code class="docutils literal"><span class="pre">Carbon.QDOffscreen</span></code> &#8212; QuickDraw Offscreen constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Qd">8.45. <code class="docutils literal"><span class="pre">Carbon.Qd</span></code> &#8212; QuickDraw</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Qdoffs">8.46. <code class="docutils literal"><span class="pre">Carbon.Qdoffs</span></code> &#8212; QuickDraw Offscreen</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Qt">8.47. <code class="docutils literal"><span class="pre">Carbon.Qt</span></code> &#8212; QuickTime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.QuickDraw">8.48. <code class="docutils literal"><span class="pre">Carbon.QuickDraw</span></code> &#8212; QuickDraw constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.QuickTime">8.49. <code class="docutils literal"><span class="pre">Carbon.QuickTime</span></code> &#8212; QuickTime constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Res">8.50. <code class="docutils literal"><span class="pre">Carbon.Res</span></code> &#8212; Resource Manager and Handles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Resources">8.51. <code class="docutils literal"><span class="pre">Carbon.Resources</span></code> &#8212; Resource Manager and Handles constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Scrap">8.52. <code class="docutils literal"><span class="pre">Carbon.Scrap</span></code> &#8212; Scrap Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Snd">8.53. <code class="docutils literal"><span class="pre">Carbon.Snd</span></code> &#8212; Sound Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Sound">8.54. <code class="docutils literal"><span class="pre">Carbon.Sound</span></code> &#8212; Sound Manager constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.TE">8.55. <code class="docutils literal"><span class="pre">Carbon.TE</span></code> &#8212; TextEdit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.TextEdit">8.56. <code class="docutils literal"><span class="pre">Carbon.TextEdit</span></code> &#8212; TextEdit constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Win">8.57. <code class="docutils literal"><span class="pre">Carbon.Win</span></code> &#8212; Window Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../37_mac_services/carbon.html#module-Carbon.Windows">8.58. <code class="docutils literal"><span class="pre">Carbon.Windows</span></code> &#8212; Window Manager constants</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../37_mac_services/colorpicker.html">9. <code class="docutils literal"><span class="pre">ColorPicker</span></code> &#8212; Color selection dialog</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python Standard Library Doc</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Module code</a> &raquo;</li>
        
      <li>doctest</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for doctest</h1><div class="highlight"><pre>
<span></span><span class="c1"># Module doctest.</span>
<span class="c1"># Released to the public domain 16-Jan-2001, by Tim Peters (tim@python.org).</span>
<span class="c1"># Major enhancements and refactoring by:</span>
<span class="c1">#     Jim Fulton</span>
<span class="c1">#     Edward Loper</span>

<span class="c1"># Provided as-is; use at your own risk; no warranty; no promises; enjoy!</span>

<span class="sd">r&quot;&quot;&quot;Module doctest -- a framework for running examples in docstrings.</span>

<span class="sd">In simplest use, end each module M to be tested with:</span>

<span class="sd">def _test():</span>
<span class="sd">    import doctest</span>
<span class="sd">    doctest.testmod()</span>

<span class="sd">if __name__ == &quot;__main__&quot;:</span>
<span class="sd">    _test()</span>

<span class="sd">Then running the module as a script will cause the examples in the</span>
<span class="sd">docstrings to get executed and verified:</span>

<span class="sd">python M.py</span>

<span class="sd">This won&#39;t display anything unless an example fails, in which case the</span>
<span class="sd">failing example(s) and the cause(s) of the failure(s) are printed to stdout</span>
<span class="sd">(why not stderr? because stderr is a lame hack &lt;0.2 wink&gt;), and the final</span>
<span class="sd">line of output is &quot;Test failed.&quot;.</span>

<span class="sd">Run it with the -v switch instead:</span>

<span class="sd">python M.py -v</span>

<span class="sd">and a detailed report of all examples tried is printed to stdout, along</span>
<span class="sd">with assorted summaries at the end.</span>

<span class="sd">You can force verbose mode by passing &quot;verbose=True&quot; to testmod, or prohibit</span>
<span class="sd">it by passing &quot;verbose=False&quot;.  In either of those cases, sys.argv is not</span>
<span class="sd">examined by testmod.</span>

<span class="sd">There are a variety of other ways to run doctests, including integration</span>
<span class="sd">with the unittest framework, and support for running non-Python text</span>
<span class="sd">files containing doctests.  There are also many ways to override parts</span>
<span class="sd">of doctest&#39;s default behaviors.  See the Library Reference Manual for</span>
<span class="sd">details.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__docformat__</span> <span class="o">=</span> <span class="s1">&#39;reStructuredText en&#39;</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># 0, Option Flags</span>
    <span class="s1">&#39;register_optionflag&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DONT_ACCEPT_TRUE_FOR_1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DONT_ACCEPT_BLANKLINE&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NORMALIZE_WHITESPACE&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ELLIPSIS&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SKIP&#39;</span><span class="p">,</span>
    <span class="s1">&#39;IGNORE_EXCEPTION_DETAIL&#39;</span><span class="p">,</span>
    <span class="s1">&#39;COMPARISON_FLAGS&#39;</span><span class="p">,</span>
    <span class="s1">&#39;REPORT_UDIFF&#39;</span><span class="p">,</span>
    <span class="s1">&#39;REPORT_CDIFF&#39;</span><span class="p">,</span>
    <span class="s1">&#39;REPORT_NDIFF&#39;</span><span class="p">,</span>
    <span class="s1">&#39;REPORT_ONLY_FIRST_FAILURE&#39;</span><span class="p">,</span>
    <span class="s1">&#39;REPORTING_FLAGS&#39;</span><span class="p">,</span>
    <span class="c1"># 1. Utility Functions</span>
    <span class="c1"># 2. Example &amp; DocTest</span>
    <span class="s1">&#39;Example&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DocTest&#39;</span><span class="p">,</span>
    <span class="c1"># 3. Doctest Parser</span>
    <span class="s1">&#39;DocTestParser&#39;</span><span class="p">,</span>
    <span class="c1"># 4. Doctest Finder</span>
    <span class="s1">&#39;DocTestFinder&#39;</span><span class="p">,</span>
    <span class="c1"># 5. Doctest Runner</span>
    <span class="s1">&#39;DocTestRunner&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OutputChecker&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DocTestFailure&#39;</span><span class="p">,</span>
    <span class="s1">&#39;UnexpectedException&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DebugRunner&#39;</span><span class="p">,</span>
    <span class="c1"># 6. Test Functions</span>
    <span class="s1">&#39;testmod&#39;</span><span class="p">,</span>
    <span class="s1">&#39;testfile&#39;</span><span class="p">,</span>
    <span class="s1">&#39;run_docstring_examples&#39;</span><span class="p">,</span>
    <span class="c1"># 7. Tester</span>
    <span class="s1">&#39;Tester&#39;</span><span class="p">,</span>
    <span class="c1"># 8. Unittest Support</span>
    <span class="s1">&#39;DocTestSuite&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DocFileSuite&#39;</span><span class="p">,</span>
    <span class="s1">&#39;set_unittest_reportflags&#39;</span><span class="p">,</span>
    <span class="c1"># 9. Debugging Support</span>
    <span class="s1">&#39;script_from_examples&#39;</span><span class="p">,</span>
    <span class="s1">&#39;testsource&#39;</span><span class="p">,</span>
    <span class="s1">&#39;debug_src&#39;</span><span class="p">,</span>
    <span class="s1">&#39;debug&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="kn">import</span> <span class="nn">__future__</span>

<span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">traceback</span><span class="o">,</span> <span class="nn">inspect</span><span class="o">,</span> <span class="nn">linecache</span><span class="o">,</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">unittest</span><span class="o">,</span> <span class="nn">difflib</span><span class="o">,</span> <span class="nn">pdb</span><span class="o">,</span> <span class="nn">tempfile</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">StringIO</span> <span class="kn">import</span> <span class="n">StringIO</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>

<span class="n">TestResults</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;TestResults&#39;</span><span class="p">,</span> <span class="s1">&#39;failed attempted&#39;</span><span class="p">)</span>

<span class="c1"># There are 4 basic classes:</span>
<span class="c1">#  - Example: a &lt;source, want&gt; pair, plus an intra-docstring line number.</span>
<span class="c1">#  - DocTest: a collection of examples, parsed from a docstring, plus</span>
<span class="c1">#    info about where the docstring came from (name, filename, lineno).</span>
<span class="c1">#  - DocTestFinder: extracts DocTests from a given object&#39;s docstring and</span>
<span class="c1">#    its contained objects&#39; docstrings.</span>
<span class="c1">#  - DocTestRunner: runs DocTest cases, and accumulates statistics.</span>
<span class="c1">#</span>
<span class="c1"># So the basic picture is:</span>
<span class="c1">#</span>
<span class="c1">#                             list of:</span>
<span class="c1"># +------+                   +---------+                   +-------+</span>
<span class="c1"># |object| --DocTestFinder-&gt; | DocTest | --DocTestRunner-&gt; |results|</span>
<span class="c1"># +------+                   +---------+                   +-------+</span>
<span class="c1">#                            | Example |</span>
<span class="c1">#                            |   ...   |</span>
<span class="c1">#                            | Example |</span>
<span class="c1">#                            +---------+</span>

<span class="c1"># Option constants.</span>

<span class="n">OPTIONFLAGS_BY_NAME</span> <span class="o">=</span> <span class="p">{}</span>
<div class="viewcode-block" id="register_optionflag"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.register_optionflag">[docs]</a><span class="k">def</span> <span class="nf">register_optionflag</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="c1"># Create a new flag unless `name` is already known.</span>
    <span class="k">return</span> <span class="n">OPTIONFLAGS_BY_NAME</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">OPTIONFLAGS_BY_NAME</span><span class="p">))</span></div>

<span class="n">DONT_ACCEPT_TRUE_FOR_1</span> <span class="o">=</span> <span class="n">register_optionflag</span><span class="p">(</span><span class="s1">&#39;DONT_ACCEPT_TRUE_FOR_1&#39;</span><span class="p">)</span>
<span class="n">DONT_ACCEPT_BLANKLINE</span> <span class="o">=</span> <span class="n">register_optionflag</span><span class="p">(</span><span class="s1">&#39;DONT_ACCEPT_BLANKLINE&#39;</span><span class="p">)</span>
<span class="n">NORMALIZE_WHITESPACE</span> <span class="o">=</span> <span class="n">register_optionflag</span><span class="p">(</span><span class="s1">&#39;NORMALIZE_WHITESPACE&#39;</span><span class="p">)</span>
<span class="n">ELLIPSIS</span> <span class="o">=</span> <span class="n">register_optionflag</span><span class="p">(</span><span class="s1">&#39;ELLIPSIS&#39;</span><span class="p">)</span>
<span class="n">SKIP</span> <span class="o">=</span> <span class="n">register_optionflag</span><span class="p">(</span><span class="s1">&#39;SKIP&#39;</span><span class="p">)</span>
<span class="n">IGNORE_EXCEPTION_DETAIL</span> <span class="o">=</span> <span class="n">register_optionflag</span><span class="p">(</span><span class="s1">&#39;IGNORE_EXCEPTION_DETAIL&#39;</span><span class="p">)</span>

<span class="n">COMPARISON_FLAGS</span> <span class="o">=</span> <span class="p">(</span><span class="n">DONT_ACCEPT_TRUE_FOR_1</span> <span class="o">|</span>
                    <span class="n">DONT_ACCEPT_BLANKLINE</span> <span class="o">|</span>
                    <span class="n">NORMALIZE_WHITESPACE</span> <span class="o">|</span>
                    <span class="n">ELLIPSIS</span> <span class="o">|</span>
                    <span class="n">SKIP</span> <span class="o">|</span>
                    <span class="n">IGNORE_EXCEPTION_DETAIL</span><span class="p">)</span>

<span class="n">REPORT_UDIFF</span> <span class="o">=</span> <span class="n">register_optionflag</span><span class="p">(</span><span class="s1">&#39;REPORT_UDIFF&#39;</span><span class="p">)</span>
<span class="n">REPORT_CDIFF</span> <span class="o">=</span> <span class="n">register_optionflag</span><span class="p">(</span><span class="s1">&#39;REPORT_CDIFF&#39;</span><span class="p">)</span>
<span class="n">REPORT_NDIFF</span> <span class="o">=</span> <span class="n">register_optionflag</span><span class="p">(</span><span class="s1">&#39;REPORT_NDIFF&#39;</span><span class="p">)</span>
<span class="n">REPORT_ONLY_FIRST_FAILURE</span> <span class="o">=</span> <span class="n">register_optionflag</span><span class="p">(</span><span class="s1">&#39;REPORT_ONLY_FIRST_FAILURE&#39;</span><span class="p">)</span>

<span class="n">REPORTING_FLAGS</span> <span class="o">=</span> <span class="p">(</span><span class="n">REPORT_UDIFF</span> <span class="o">|</span>
                   <span class="n">REPORT_CDIFF</span> <span class="o">|</span>
                   <span class="n">REPORT_NDIFF</span> <span class="o">|</span>
                   <span class="n">REPORT_ONLY_FIRST_FAILURE</span><span class="p">)</span>

<span class="c1"># Special string markers for use in `want` strings:</span>
<span class="n">BLANKLINE_MARKER</span> <span class="o">=</span> <span class="s1">&#39;&lt;BLANKLINE&gt;&#39;</span>
<span class="n">ELLIPSIS_MARKER</span> <span class="o">=</span> <span class="s1">&#39;...&#39;</span>

<span class="c1">######################################################################</span>
<span class="c1">## Table of Contents</span>
<span class="c1">######################################################################</span>
<span class="c1">#  1. Utility Functions</span>
<span class="c1">#  2. Example &amp; DocTest -- store test cases</span>
<span class="c1">#  3. DocTest Parser -- extracts examples from strings</span>
<span class="c1">#  4. DocTest Finder -- extracts test cases from objects</span>
<span class="c1">#  5. DocTest Runner -- runs test cases</span>
<span class="c1">#  6. Test Functions -- convenient wrappers for testing</span>
<span class="c1">#  7. Tester Class -- for backwards compatibility</span>
<span class="c1">#  8. Unittest Support</span>
<span class="c1">#  9. Debugging Support</span>
<span class="c1"># 10. Example Usage</span>

<span class="c1">######################################################################</span>
<span class="c1">## 1. Utility Functions</span>
<span class="c1">######################################################################</span>

<span class="k">def</span> <span class="nf">_extract_future_flags</span><span class="p">(</span><span class="n">globs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the compiler-flags associated with the future features that</span>
<span class="sd">    have been imported into the given namespace (globs).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">flags</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">__future__</span><span class="o">.</span><span class="n">all_feature_names</span><span class="p">:</span>
        <span class="n">feature</span> <span class="o">=</span> <span class="n">globs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">feature</span> <span class="ow">is</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">__future__</span><span class="p">,</span> <span class="n">fname</span><span class="p">):</span>
            <span class="n">flags</span> <span class="o">|=</span> <span class="n">feature</span><span class="o">.</span><span class="n">compiler_flag</span>
    <span class="k">return</span> <span class="n">flags</span>

<span class="k">def</span> <span class="nf">_normalize_module</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the module specified by `module`.  In particular:</span>
<span class="sd">      - If `module` is a module, then return module.</span>
<span class="sd">      - If `module` is a string, then import and return the</span>
<span class="sd">        module with that name.</span>
<span class="sd">      - If `module` is None, then return the calling module.</span>
<span class="sd">        The calling module is assumed to be the module of</span>
<span class="sd">        the stack frame at the given depth in the call stack.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismodule</span><span class="p">(</span><span class="n">module</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">module</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">unicode</span><span class="p">)):</span>
        <span class="k">return</span> <span class="nb">__import__</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="nb">globals</span><span class="p">(),</span> <span class="nb">locals</span><span class="p">(),</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">module</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">(</span><span class="n">depth</span><span class="p">)</span><span class="o">.</span><span class="n">f_globals</span><span class="p">[</span><span class="s1">&#39;__name__&#39;</span><span class="p">]]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Expected a module, string, or None&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_load_testfile</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">package</span><span class="p">,</span> <span class="n">module_relative</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">module_relative</span><span class="p">:</span>
        <span class="n">package</span> <span class="o">=</span> <span class="n">_normalize_module</span><span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">_module_relative_path</span><span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="s1">&#39;__loader__&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">__loader__</span><span class="p">,</span> <span class="s1">&#39;get_data&#39;</span><span class="p">):</span>
                <span class="n">file_contents</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">__loader__</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
                <span class="c1"># get_data() opens files as &#39;rb&#39;, so one must do the equivalent</span>
                <span class="c1"># conversion as universal newlines would do.</span>
                <span class="k">return</span> <span class="n">file_contents</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">),</span> <span class="n">filename</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;U&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">filename</span>

<span class="c1"># Use sys.stdout encoding for ouput.</span>
<span class="n">_encoding</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">__stdout__</span><span class="p">,</span> <span class="s1">&#39;encoding&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;utf-8&#39;</span>

<span class="k">def</span> <span class="nf">_indent</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add the given number of space characters to the beginning of</span>
<span class="sd">    every non-blank line in `s`, and return the result.</span>
<span class="sd">    If the string `s` is Unicode, it is encoded using the stdout</span>
<span class="sd">    encoding and the `backslashreplace` error handler.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">unicode</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">_encoding</span><span class="p">,</span> <span class="s1">&#39;backslashreplace&#39;</span><span class="p">)</span>
    <span class="c1"># This regexp matches the start of non-blank lines:</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;(?m)^(?!$)&#39;</span><span class="p">,</span> <span class="n">indent</span><span class="o">*</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_exception_traceback</span><span class="p">(</span><span class="n">exc_info</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a string containing a traceback message for the given</span>
<span class="sd">    exc_info tuple (as returned by sys.exc_info()).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get a traceback message.</span>
    <span class="n">excout</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
    <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span> <span class="o">=</span> <span class="n">exc_info</span>
    <span class="n">traceback</span><span class="o">.</span><span class="n">print_exception</span><span class="p">(</span><span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">,</span> <span class="nb">file</span><span class="o">=</span><span class="n">excout</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">excout</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>

<span class="c1"># Override some StringIO methods.</span>
<span class="k">class</span> <span class="nc">_SpoofOut</span><span class="p">(</span><span class="n">StringIO</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">getvalue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">StringIO</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># If anything at all was written, make sure there&#39;s a trailing</span>
        <span class="c1"># newline.  There&#39;s no way for the expected output to indicate</span>
        <span class="c1"># that a trailing newline is missing.</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">result</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="c1"># Prevent softspace from screwing up the next test case, in</span>
        <span class="c1"># case they used print with a trailing comma in an example.</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;softspace&quot;</span><span class="p">):</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">softspace</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">truncate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>   <span class="n">size</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">StringIO</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;softspace&quot;</span><span class="p">):</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">softspace</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">buf</span><span class="p">:</span>
            <span class="c1"># Reset it to an empty string, to make sure it&#39;s not unicode.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buf</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

<span class="c1"># Worst-case linear-time ellipsis matching.</span>
<span class="k">def</span> <span class="nf">_ellipsis_match</span><span class="p">(</span><span class="n">want</span><span class="p">,</span> <span class="n">got</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Essentially the only subtle case:</span>
<span class="sd">    &gt;&gt;&gt; _ellipsis_match(&#39;aa...aa&#39;, &#39;aaa&#39;)</span>
<span class="sd">    False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">ELLIPSIS_MARKER</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">want</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">want</span> <span class="o">==</span> <span class="n">got</span>

    <span class="c1"># Find &quot;the real&quot; strings.</span>
    <span class="n">ws</span> <span class="o">=</span> <span class="n">want</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">ELLIPSIS_MARKER</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">ws</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span>

    <span class="c1"># Deal with exact matches possibly needed at one or both ends.</span>
    <span class="n">startpos</span><span class="p">,</span> <span class="n">endpos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">got</span><span class="p">)</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">ws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">w</span><span class="p">:</span>   <span class="c1"># starts with exact match</span>
        <span class="k">if</span> <span class="n">got</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">w</span><span class="p">):</span>
            <span class="n">startpos</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
            <span class="k">del</span> <span class="n">ws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">ws</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">w</span><span class="p">:</span>   <span class="c1"># ends with exact match</span>
        <span class="k">if</span> <span class="n">got</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">w</span><span class="p">):</span>
            <span class="n">endpos</span> <span class="o">-=</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
            <span class="k">del</span> <span class="n">ws</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

    <span class="k">if</span> <span class="n">startpos</span> <span class="o">&gt;</span> <span class="n">endpos</span><span class="p">:</span>
        <span class="c1"># Exact end matches required more characters than we have, as in</span>
        <span class="c1"># _ellipsis_match(&#39;aa...aa&#39;, &#39;aaa&#39;)</span>
        <span class="k">return</span> <span class="bp">False</span>

    <span class="c1"># For the rest, we only need to find the leftmost non-overlapping</span>
    <span class="c1"># match for each piece.  If there&#39;s no overall match that way alone,</span>
    <span class="c1"># there&#39;s no overall match period.</span>
    <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">ws</span><span class="p">:</span>
        <span class="c1"># w may be &#39;&#39; at times, if there are consecutive ellipses, or</span>
        <span class="c1"># due to an ellipsis at the start or end of `want`.  That&#39;s OK.</span>
        <span class="c1"># Search for an empty string succeeds, and doesn&#39;t change startpos.</span>
        <span class="n">startpos</span> <span class="o">=</span> <span class="n">got</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">startpos</span><span class="p">,</span> <span class="n">endpos</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">startpos</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="n">startpos</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">True</span>

<span class="k">def</span> <span class="nf">_comment_line</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
    <span class="s2">&quot;Return a commented form of the given line&quot;</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">line</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;# &#39;</span><span class="o">+</span><span class="n">line</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;#&#39;</span>

<span class="k">def</span> <span class="nf">_strip_exception_details</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
    <span class="c1"># Support for IGNORE_EXCEPTION_DETAIL.</span>
    <span class="c1"># Get rid of everything except the exception name; in particular, drop</span>
    <span class="c1"># the possibly dotted module path (if any) and the exception message (if</span>
    <span class="c1"># any).  We assume that a colon is never part of a dotted name, or of an</span>
    <span class="c1"># exception name.</span>
    <span class="c1"># E.g., given</span>
    <span class="c1">#    &quot;foo.bar.MyError: la di da&quot;</span>
    <span class="c1"># return &quot;MyError&quot;</span>
    <span class="c1"># Or for &quot;abc.def&quot; or &quot;abc.def:\n&quot; return &quot;def&quot;.</span>

    <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="c1"># The exception name must appear on the first line.</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">i</span>
    <span class="c1"># retain up to the first colon (if any)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">i</span>
    <span class="c1"># retain just the exception name</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">msg</span><span class="p">[</span><span class="n">start</span><span class="p">:</span> <span class="n">end</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">_OutputRedirectingPdb</span><span class="p">(</span><span class="n">pdb</span><span class="o">.</span><span class="n">Pdb</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A specialized version of the python debugger that redirects stdout</span>
<span class="sd">    to a given stream when interacting with the user.  Stdout is *not*</span>
<span class="sd">    redirected when traced code is executed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__out</span> <span class="o">=</span> <span class="n">out</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__debugger_used</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">pdb</span><span class="o">.</span><span class="n">Pdb</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">out</span><span class="p">)</span>
        <span class="c1"># still use input() to get user input</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_rawinput</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">set_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__debugger_used</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">frame</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">frame</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">()</span><span class="o">.</span><span class="n">f_back</span>
        <span class="n">pdb</span><span class="o">.</span><span class="n">Pdb</span><span class="o">.</span><span class="n">set_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_continue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Calling set_continue unconditionally would break unit test</span>
        <span class="c1"># coverage reporting, as Bdb.set_continue calls sys.settrace(None).</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__debugger_used</span><span class="p">:</span>
            <span class="n">pdb</span><span class="o">.</span><span class="n">Pdb</span><span class="o">.</span><span class="n">set_continue</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">trace_dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="c1"># Redirect stdout to the given stream.</span>
        <span class="n">save_stdout</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__out</span>
        <span class="c1"># Call Pdb&#39;s trace dispatch method.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pdb</span><span class="o">.</span><span class="n">Pdb</span><span class="o">.</span><span class="n">trace_dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">save_stdout</span>

<span class="c1"># [XX] Normalize with respect to os.path.pardir?</span>
<span class="k">def</span> <span class="nf">_module_relative_path</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismodule</span><span class="p">(</span><span class="n">module</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="s1">&#39;Expected a module: </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">module</span>
    <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="s1">&#39;Module-relative files may not have absolute paths&#39;</span>

    <span class="c1"># Find the base directory for the path.</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="s1">&#39;__file__&#39;</span><span class="p">):</span>
        <span class="c1"># A normal module/package</span>
        <span class="n">basedir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="n">__file__</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">module</span><span class="o">.</span><span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
        <span class="c1"># An interactive session.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">basedir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">basedir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">curdir</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># A module w/o __file__ (this includes builtins)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Can&#39;t resolve paths relative to the module &quot;</span> <span class="o">+</span>
                         <span class="n">module</span> <span class="o">+</span> <span class="s2">&quot; (it has no __file__)&quot;</span><span class="p">)</span>

    <span class="c1"># Combine the base directory and the path.</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basedir</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)))</span>

<span class="c1">######################################################################</span>
<span class="c1">## 2. Example &amp; DocTest</span>
<span class="c1">######################################################################</span>
<span class="c1">## - An &quot;example&quot; is a &lt;source, want&gt; pair, where &quot;source&quot; is a</span>
<span class="c1">##   fragment of source code, and &quot;want&quot; is the expected output for</span>
<span class="c1">##   &quot;source.&quot;  The Example class also includes information about</span>
<span class="c1">##   where the example was extracted from.</span>
<span class="c1">##</span>
<span class="c1">## - A &quot;doctest&quot; is a collection of examples, typically extracted from</span>
<span class="c1">##   a string (such as an object&#39;s docstring).  The DocTest class also</span>
<span class="c1">##   includes information about where the string was extracted from.</span>

<div class="viewcode-block" id="Example"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.Example">[docs]</a><span class="k">class</span> <span class="nc">Example</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A single doctest example, consisting of source code and expected</span>
<span class="sd">    output.  `Example` defines the following attributes:</span>

<span class="sd">      - source: A single Python statement, always ending with a newline.</span>
<span class="sd">        The constructor adds a newline if needed.</span>

<span class="sd">      - want: The expected output from running the source code (either</span>
<span class="sd">        from stdout, or a traceback in case of exception).  `want` ends</span>
<span class="sd">        with a newline unless it&#39;s empty, in which case it&#39;s an empty</span>
<span class="sd">        string.  The constructor adds a newline if needed.</span>

<span class="sd">      - exc_msg: The exception message generated by the example, if</span>
<span class="sd">        the example is expected to generate an exception; or `None` if</span>
<span class="sd">        it is not expected to generate an exception.  This exception</span>
<span class="sd">        message is compared against the return value of</span>
<span class="sd">        `traceback.format_exception_only()`.  `exc_msg` ends with a</span>
<span class="sd">        newline unless it&#39;s `None`.  The constructor adds a newline</span>
<span class="sd">        if needed.</span>

<span class="sd">      - lineno: The line number within the DocTest string containing</span>
<span class="sd">        this Example where the Example begins.  This line number is</span>
<span class="sd">        zero-based, with respect to the beginning of the DocTest.</span>

<span class="sd">      - indent: The example&#39;s indentation in the DocTest string.</span>
<span class="sd">        I.e., the number of space characters that precede the</span>
<span class="sd">        example&#39;s first prompt.</span>

<span class="sd">      - options: A dictionary mapping from option flags to True or</span>
<span class="sd">        False, which is used to override default options for this</span>
<span class="sd">        example.  Any option flags not contained in this dictionary</span>
<span class="sd">        are left at their default value (as specified by the</span>
<span class="sd">        DocTestRunner&#39;s optionflags).  By default, no options are set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">want</span><span class="p">,</span> <span class="n">exc_msg</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="c1"># Normalize inputs.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">source</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
            <span class="n">source</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">want</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">want</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
            <span class="n">want</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">exc_msg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">exc_msg</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
            <span class="n">exc_msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="c1"># Store properties.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">source</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">want</span> <span class="o">=</span> <span class="n">want</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span> <span class="o">=</span> <span class="n">lineno</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">indent</span> <span class="o">=</span> <span class="n">indent</span>
        <span class="k">if</span> <span class="n">options</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="n">options</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">options</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exc_msg</span> <span class="o">=</span> <span class="n">exc_msg</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">source</span> <span class="ow">and</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">want</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">want</span> <span class="ow">and</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">lineno</span> <span class="ow">and</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">indent</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">indent</span> <span class="ow">and</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">options</span> <span class="ow">and</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">exc_msg</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">exc_msg</span>

    <span class="k">def</span> <span class="nf">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

    <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">want</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">,</span>
                     <span class="bp">self</span><span class="o">.</span><span class="n">exc_msg</span><span class="p">))</span></div>


<div class="viewcode-block" id="DocTest"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocTest">[docs]</a><span class="k">class</span> <span class="nc">DocTest</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A collection of doctest examples that should be run in a single</span>
<span class="sd">    namespace.  Each `DocTest` defines the following attributes:</span>

<span class="sd">      - examples: the list of examples.</span>

<span class="sd">      - globs: The namespace (aka globals) that the examples should</span>
<span class="sd">        be run in.</span>

<span class="sd">      - name: A name identifying the DocTest (typically, the name of</span>
<span class="sd">        the object whose docstring this DocTest was extracted from).</span>

<span class="sd">      - filename: The name of the file that this DocTest was extracted</span>
<span class="sd">        from, or `None` if the filename is unknown.</span>

<span class="sd">      - lineno: The line number within filename where this DocTest</span>
<span class="sd">        begins, or `None` if the line number is unavailable.  This</span>
<span class="sd">        line number is zero-based, with respect to the beginning of</span>
<span class="sd">        the file.</span>

<span class="sd">      - docstring: The string that the examples were extracted from,</span>
<span class="sd">        or `None` if the string is unavailable.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">examples</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">docstring</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new DocTest containing the given examples.  The</span>
<span class="sd">        DocTest&#39;s globals are initialized with a copy of `globs`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">examples</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">),</span> \
               <span class="s2">&quot;DocTest no longer accepts str; use DocTestParser instead&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">examples</span> <span class="o">=</span> <span class="n">examples</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">docstring</span> <span class="o">=</span> <span class="n">docstring</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">globs</span> <span class="o">=</span> <span class="n">globs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span> <span class="o">=</span> <span class="n">lineno</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">examples</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">examples</span> <span class="o">=</span> <span class="s1">&#39;no examples&#39;</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">examples</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">examples</span> <span class="o">=</span> <span class="s1">&#39;1 example&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">examples</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> examples&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">examples</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;&lt;DocTest </span><span class="si">%s</span><span class="s1"> from </span><span class="si">%s</span><span class="s1">:</span><span class="si">%s</span><span class="s1"> (</span><span class="si">%s</span><span class="s1">)&gt;&#39;</span> <span class="o">%</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">examples</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">examples</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">examples</span> <span class="ow">and</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">docstring</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">docstring</span> <span class="ow">and</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">globs</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">globs</span> <span class="ow">and</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">filename</span> <span class="ow">and</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">lineno</span>

    <span class="k">def</span> <span class="nf">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

    <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">docstring</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">))</span>

    <span class="c1"># This lets us sort tests by name:</span>
    <span class="k">def</span> <span class="nf">__cmp__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DocTest</span><span class="p">):</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="nb">cmp</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)),</span>
                   <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span></div>

<span class="c1">######################################################################</span>
<span class="c1">## 3. DocTestParser</span>
<span class="c1">######################################################################</span>

<div class="viewcode-block" id="DocTestParser"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocTestParser">[docs]</a><span class="k">class</span> <span class="nc">DocTestParser</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class used to parse strings containing doctest examples.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># This regular expression is used to find doctest examples in a</span>
    <span class="c1"># string.  It defines three groups: `source` is the source code</span>
    <span class="c1"># (including leading indentation and prompts); `indent` is the</span>
    <span class="c1"># indentation of the first (PS1) line of the source code; and</span>
    <span class="c1"># `want` is the expected output (including leading indentation).</span>
    <span class="n">_EXAMPLE_RE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">r&#39;&#39;&#39;</span>
<span class="s1">        # Source consists of a PS1 line followed by zero or more PS2 lines.</span>
<span class="s1">        (?P&lt;source&gt;</span>
<span class="s1">            (?:^(?P&lt;indent&gt; [ ]*) &gt;&gt;&gt;    .*)    # PS1 line</span>
<span class="s1">            (?:\n           [ ]*  \.\.\. .*)*)  # PS2 lines</span>
<span class="s1">        \n?</span>
<span class="s1">        # Want consists of any non-blank lines that do not start with PS1.</span>
<span class="s1">        (?P&lt;want&gt; (?:(?![ ]*$)    # Not a blank line</span>
<span class="s1">                     (?![ ]*&gt;&gt;&gt;)  # Not a line starting with PS1</span>
<span class="s1">                     .+$\n?       # But any other line</span>
<span class="s1">                  )*)</span>
<span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">VERBOSE</span><span class="p">)</span>

    <span class="c1"># A regular expression for handling `want` strings that contain</span>
    <span class="c1"># expected exceptions.  It divides `want` into three pieces:</span>
    <span class="c1">#    - the traceback header line (`hdr`)</span>
    <span class="c1">#    - the traceback stack (`stack`)</span>
    <span class="c1">#    - the exception message (`msg`), as generated by</span>
    <span class="c1">#      traceback.format_exception_only()</span>
    <span class="c1"># `msg` may have multiple lines.  We assume/require that the</span>
    <span class="c1"># exception message is the first non-indented line starting with a word</span>
    <span class="c1"># character following the traceback header line.</span>
    <span class="n">_EXCEPTION_RE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">r&quot;&quot;&quot;</span>
<span class="s2">        # Grab the traceback header.  Different versions of Python have</span>
<span class="s2">        # said different things on the first traceback line.</span>
<span class="s2">        ^(?P&lt;hdr&gt; Traceback\ \(</span>
<span class="s2">            (?: most\ recent\ call\ last</span>
<span class="s2">            |   innermost\ last</span>
<span class="s2">            ) \) :</span>
<span class="s2">        )</span>
<span class="s2">        \s* $                # toss trailing whitespace on the header.</span>
<span class="s2">        (?P&lt;stack&gt; .*?)      # don&#39;t blink: absorb stuff until...</span>
<span class="s2">        ^ (?P&lt;msg&gt; \w+ .*)   #     a line *starts* with alphanum.</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">VERBOSE</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span><span class="p">)</span>

    <span class="c1"># A callable returning a true value iff its argument is a blank line</span>
    <span class="c1"># or contains a single comment.</span>
    <span class="n">_IS_BLANK_OR_COMMENT</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">r&#39;^[ ]*(#.*)?$&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">match</span>

<div class="viewcode-block" id="DocTestParser.parse"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocTestParser.parse">[docs]</a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;&lt;string&gt;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Divide the given string into examples and intervening text,</span>
<span class="sd">        and return them as a list of alternating Examples and strings.</span>
<span class="sd">        Line numbers for the Examples are 0-based.  The optional</span>
<span class="sd">        argument `name` is a name identifying this string, and is only</span>
<span class="sd">        used for error messages.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">string</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">expandtabs</span><span class="p">()</span>
        <span class="c1"># If all lines begin with the same indentation, then strip it.</span>
        <span class="n">min_indent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_indent</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">min_indent</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">l</span><span class="p">[</span><span class="n">min_indent</span><span class="p">:]</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)])</span>

        <span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">charno</span><span class="p">,</span> <span class="n">lineno</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
        <span class="c1"># Find all doctest examples in the string:</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_EXAMPLE_RE</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
            <span class="c1"># Add the pre-example text to `output`.</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">string</span><span class="p">[</span><span class="n">charno</span><span class="p">:</span><span class="n">m</span><span class="o">.</span><span class="n">start</span><span class="p">()])</span>
            <span class="c1"># Update lineno (lines before this example)</span>
            <span class="n">lineno</span> <span class="o">+=</span> <span class="n">string</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">charno</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">start</span><span class="p">())</span>
            <span class="c1"># Extract info from the regexp match.</span>
            <span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">want</span><span class="p">,</span> <span class="n">exc_msg</span><span class="p">)</span> <span class="o">=</span> \
                     <span class="bp">self</span><span class="o">.</span><span class="n">_parse_example</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">lineno</span><span class="p">)</span>
            <span class="c1"># Create an Example, and add it to the list.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IS_BLANK_OR_COMMENT</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">Example</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">want</span><span class="p">,</span> <span class="n">exc_msg</span><span class="p">,</span>
                                    <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                                    <span class="n">indent</span><span class="o">=</span><span class="n">min_indent</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;indent&#39;</span><span class="p">)),</span>
                                    <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span> <span class="p">)</span>
            <span class="c1"># Update lineno (lines inside this example)</span>
            <span class="n">lineno</span> <span class="o">+=</span> <span class="n">string</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">start</span><span class="p">(),</span> <span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">())</span>
            <span class="c1"># Update charno.</span>
            <span class="n">charno</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
        <span class="c1"># Add any remaining post-example text to `output`.</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">string</span><span class="p">[</span><span class="n">charno</span><span class="p">:])</span>
        <span class="k">return</span> <span class="n">output</span></div>

<div class="viewcode-block" id="DocTestParser.get_doctest"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocTestParser.get_doctest">[docs]</a>    <span class="k">def</span> <span class="nf">get_doctest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">lineno</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extract all doctest examples from the given string, and</span>
<span class="sd">        collect them into a `DocTest` object.</span>

<span class="sd">        `globs`, `name`, `filename`, and `lineno` are attributes for</span>
<span class="sd">        the new `DocTest` object.  See the documentation for `DocTest`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DocTest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_examples</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="n">name</span><span class="p">),</span> <span class="n">globs</span><span class="p">,</span>
                       <span class="n">name</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span></div>

<div class="viewcode-block" id="DocTestParser.get_examples"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocTestParser.get_examples">[docs]</a>    <span class="k">def</span> <span class="nf">get_examples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;&lt;string&gt;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extract all doctest examples from the given string, and return</span>
<span class="sd">        them as a list of `Example` objects.  Line numbers are</span>
<span class="sd">        0-based, because it&#39;s most common in doctests that nothing</span>
<span class="sd">        interesting appears on the same line as opening triple-quote,</span>
<span class="sd">        and so the first interesting line is called \&quot;line 1\&quot; then.</span>

<span class="sd">        The optional argument `name` is a name identifying this</span>
<span class="sd">        string, and is only used for error messages.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Example</span><span class="p">)]</span></div>

    <span class="k">def</span> <span class="nf">_parse_example</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">lineno</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given a regular expression match from `_EXAMPLE_RE` (`m`),</span>
<span class="sd">        return a pair `(source, want)`, where `source` is the matched</span>
<span class="sd">        example&#39;s source code (with prompts and indentation stripped);</span>
<span class="sd">        and `want` is the example&#39;s expected output (with indentation</span>
<span class="sd">        stripped).</span>

<span class="sd">        `name` is the string&#39;s name, and `lineno` is the line number</span>
<span class="sd">        where the example starts; both are used for error messages.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get the example&#39;s indentation level.</span>
        <span class="n">indent</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;indent&#39;</span><span class="p">))</span>

        <span class="c1"># Divide source into lines; check that they&#39;re properly</span>
        <span class="c1"># indented; and then strip their indentation &amp; prompts.</span>
        <span class="n">source_lines</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_prompt_blank</span><span class="p">(</span><span class="n">source_lines</span><span class="p">,</span> <span class="n">indent</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">lineno</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_prefix</span><span class="p">(</span><span class="n">source_lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="s1">&#39; &#39;</span><span class="o">*</span><span class="n">indent</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">lineno</span><span class="p">)</span>
        <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">sl</span><span class="p">[</span><span class="n">indent</span><span class="o">+</span><span class="mi">4</span><span class="p">:]</span> <span class="k">for</span> <span class="n">sl</span> <span class="ow">in</span> <span class="n">source_lines</span><span class="p">])</span>

        <span class="c1"># Divide want into lines; check that it&#39;s properly indented; and</span>
        <span class="c1"># then strip the indentation.  Spaces before the last newline should</span>
        <span class="c1"># be preserved, so plain rstrip() isn&#39;t good enough.</span>
        <span class="n">want</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;want&#39;</span><span class="p">)</span>
        <span class="n">want_lines</span> <span class="o">=</span> <span class="n">want</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">want_lines</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">r&#39; *$&#39;</span><span class="p">,</span> <span class="n">want_lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
            <span class="k">del</span> <span class="n">want_lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># forget final newline &amp; spaces after it</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_prefix</span><span class="p">(</span><span class="n">want_lines</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="o">*</span><span class="n">indent</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
                           <span class="n">lineno</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">source_lines</span><span class="p">))</span>
        <span class="n">want</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">wl</span><span class="p">[</span><span class="n">indent</span><span class="p">:]</span> <span class="k">for</span> <span class="n">wl</span> <span class="ow">in</span> <span class="n">want_lines</span><span class="p">])</span>

        <span class="c1"># If `want` contains a traceback message, then extract it.</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_EXCEPTION_RE</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">want</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
            <span class="n">exc_msg</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;msg&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">exc_msg</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c1"># Extract options from the source.</span>
        <span class="n">options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_options</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">lineno</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">source</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">want</span><span class="p">,</span> <span class="n">exc_msg</span>

    <span class="c1"># This regular expression looks for option directives in the</span>
    <span class="c1"># source code of an example.  Option directives are comments</span>
    <span class="c1"># starting with &quot;doctest:&quot;.  Warning: this may give false</span>
    <span class="c1"># positives for string-literals that contain the string</span>
    <span class="c1"># &quot;#doctest:&quot;.  Eliminating these false positives would require</span>
    <span class="c1"># actually parsing the string; but we limit them by ignoring any</span>
    <span class="c1"># line containing &quot;#doctest:&quot; that is *followed* by a quote mark.</span>
    <span class="n">_OPTION_DIRECTIVE_RE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">r&#39;#\s*doctest:\s*([^\n</span><span class="se">\&#39;</span><span class="s1">&quot;]*)$&#39;</span><span class="p">,</span>
                                      <span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_find_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">lineno</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a dictionary containing option overrides extracted from</span>
<span class="sd">        option directives in the given source string.</span>

<span class="sd">        `name` is the string&#39;s name, and `lineno` is the line number</span>
<span class="sd">        where the example starts; both are used for error messages.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># (note: with the current regexp, this will match at most once:)</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_OPTION_DIRECTIVE_RE</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
            <span class="n">option_strings</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">option_strings</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">option</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;+-&#39;</span> <span class="ow">or</span>
                    <span class="n">option</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">OPTIONFLAGS_BY_NAME</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;line </span><span class="si">%r</span><span class="s1"> of the doctest for </span><span class="si">%s</span><span class="s1"> &#39;</span>
                                     <span class="s1">&#39;has an invalid option: </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span>
                                     <span class="p">(</span><span class="n">lineno</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="n">OPTIONFLAGS_BY_NAME</span><span class="p">[</span><span class="n">option</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span>
                <span class="n">options</span><span class="p">[</span><span class="n">flag</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">option</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;+&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">options</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IS_BLANK_OR_COMMENT</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;line </span><span class="si">%r</span><span class="s1"> of the doctest for </span><span class="si">%s</span><span class="s1"> has an option &#39;</span>
                             <span class="s1">&#39;directive on a line with no example: </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span>
                             <span class="p">(</span><span class="n">lineno</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">source</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">options</span>

    <span class="c1"># This regular expression finds the indentation of every non-blank</span>
    <span class="c1"># line in a string.</span>
    <span class="n">_INDENT_RE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;^([ ]*)(?=\S)&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_min_indent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="s2">&quot;Return the minimum indentation of any non-blank line in `s`&quot;</span>
        <span class="n">indents</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">indent</span><span class="p">)</span> <span class="k">for</span> <span class="n">indent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_INDENT_RE</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">s</span><span class="p">)]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indents</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">indents</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">_check_prompt_blank</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">indent</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">lineno</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given the lines of a source string (including prompts and</span>
<span class="sd">        leading indentation), check to make sure that every prompt is</span>
<span class="sd">        followed by a space character.  If any line is not followed by</span>
<span class="sd">        a space character, then raise ValueError.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">indent</span><span class="o">+</span><span class="mi">4</span> <span class="ow">and</span> <span class="n">line</span><span class="p">[</span><span class="n">indent</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;line </span><span class="si">%r</span><span class="s1"> of the docstring for </span><span class="si">%s</span><span class="s1"> &#39;</span>
                                 <span class="s1">&#39;lacks blank after </span><span class="si">%s</span><span class="s1">: </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span>
                                 <span class="p">(</span><span class="n">lineno</span><span class="o">+</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
                                  <span class="n">line</span><span class="p">[</span><span class="n">indent</span><span class="p">:</span><span class="n">indent</span><span class="o">+</span><span class="mi">3</span><span class="p">],</span> <span class="n">line</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_check_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">lineno</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check that every line in the given list starts with the given</span>
<span class="sd">        prefix; if any line does not, then raise a ValueError.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">line</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;line </span><span class="si">%r</span><span class="s1"> of the docstring for </span><span class="si">%s</span><span class="s1"> has &#39;</span>
                                 <span class="s1">&#39;inconsistent leading whitespace: </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span>
                                 <span class="p">(</span><span class="n">lineno</span><span class="o">+</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span></div>


<span class="c1">######################################################################</span>
<span class="c1">## 4. DocTest Finder</span>
<span class="c1">######################################################################</span>

<div class="viewcode-block" id="DocTestFinder"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocTestFinder">[docs]</a><span class="k">class</span> <span class="nc">DocTestFinder</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class used to extract the DocTests that are relevant to a given</span>
<span class="sd">    object, from its docstring and the docstrings of its contained</span>
<span class="sd">    objects.  Doctests can currently be extracted from the following</span>
<span class="sd">    object types: modules, functions, classes, methods, staticmethods,</span>
<span class="sd">    classmethods, and properties.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="n">DocTestParser</span><span class="p">(),</span>
                 <span class="n">recurse</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">exclude_empty</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new doctest finder.</span>

<span class="sd">        The optional argument `parser` specifies a class or</span>
<span class="sd">        function that should be used to create new DocTest objects (or</span>
<span class="sd">        objects that implement the same interface as DocTest).  The</span>
<span class="sd">        signature for this factory function should match the signature</span>
<span class="sd">        of the DocTest constructor.</span>

<span class="sd">        If the optional argument `recurse` is false, then `find` will</span>
<span class="sd">        only examine the given object, and not any contained objects.</span>

<span class="sd">        If the optional argument `exclude_empty` is false, then `find`</span>
<span class="sd">        will include tests for objects with empty docstrings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span> <span class="o">=</span> <span class="n">parser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span> <span class="o">=</span> <span class="n">verbose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_recurse</span> <span class="o">=</span> <span class="n">recurse</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_exclude_empty</span> <span class="o">=</span> <span class="n">exclude_empty</span>

<div class="viewcode-block" id="DocTestFinder.find"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocTestFinder.find">[docs]</a>    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">module</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">globs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">extraglobs</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of the DocTests that are defined by the given</span>
<span class="sd">        object&#39;s docstring, or by any of its contained objects&#39;</span>
<span class="sd">        docstrings.</span>

<span class="sd">        The optional parameter `module` is the module that contains</span>
<span class="sd">        the given object.  If the module is not specified or is None, then</span>
<span class="sd">        the test finder will attempt to automatically determine the</span>
<span class="sd">        correct module.  The object&#39;s module is used:</span>

<span class="sd">            - As a default namespace, if `globs` is not specified.</span>
<span class="sd">            - To prevent the DocTestFinder from extracting DocTests</span>
<span class="sd">              from objects that are imported from other modules.</span>
<span class="sd">            - To find the name of the file containing the object.</span>
<span class="sd">            - To help find the line number of the object within its</span>
<span class="sd">              file.</span>

<span class="sd">        Contained objects whose module does not match `module` are ignored.</span>

<span class="sd">        If `module` is False, no attempt to find the module will be made.</span>
<span class="sd">        This is obscure, of use mostly in tests:  if `module` is False, or</span>
<span class="sd">        is None but cannot be found automatically, then all objects are</span>
<span class="sd">        considered to belong to the (non-existent) module, so all contained</span>
<span class="sd">        objects will (recursively) be searched for doctests.</span>

<span class="sd">        The globals for each DocTest is formed by combining `globs`</span>
<span class="sd">        and `extraglobs` (bindings in `extraglobs` override bindings</span>
<span class="sd">        in `globs`).  A new copy of the globals dictionary is created</span>
<span class="sd">        for each DocTest.  If `globs` is not specified, then it</span>
<span class="sd">        defaults to the module&#39;s `__dict__`, if specified, or {}</span>
<span class="sd">        otherwise.  If `extraglobs` is not specified, then it defaults</span>
<span class="sd">        to {}.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If name was not specified, then extract it from the object.</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;__name__&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;DocTestFinder.find: name must be given &quot;</span>
                        <span class="s2">&quot;when obj.__name__ doesn&#39;t exist: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span>
                                 <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">),))</span>

        <span class="c1"># Find the module that contains the given object (if obj is</span>
        <span class="c1"># a module, then module=obj.).  Note: this may fail, in which</span>
        <span class="c1"># case module will be None.</span>
        <span class="k">if</span> <span class="n">module</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
            <span class="n">module</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">elif</span> <span class="n">module</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">module</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmodule</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

        <span class="c1"># Read the module&#39;s source code.  This is used by</span>
        <span class="c1"># DocTestFinder._find_lineno to find the line number for a</span>
        <span class="c1"># given object&#39;s docstring.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">file</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getsourcefile</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">or</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">module</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c1"># Supply the module globals in case the module was</span>
                <span class="c1"># originally loaded via a PEP 302 loader and</span>
                <span class="c1"># file is not a valid filesystem path</span>
                <span class="n">source_lines</span> <span class="o">=</span> <span class="n">linecache</span><span class="o">.</span><span class="n">getlines</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">module</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># No access to a loader, so assume it&#39;s a normal</span>
                <span class="c1"># filesystem path</span>
                <span class="n">source_lines</span> <span class="o">=</span> <span class="n">linecache</span><span class="o">.</span><span class="n">getlines</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">source_lines</span><span class="p">:</span>
                <span class="n">source_lines</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">source_lines</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c1"># Initialize globals, and merge in extraglobs.</span>
        <span class="k">if</span> <span class="n">globs</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">module</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">globs</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">globs</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">globs</span> <span class="o">=</span> <span class="n">globs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">extraglobs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">globs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">extraglobs</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;__name__&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">globs</span><span class="p">:</span>
            <span class="n">globs</span><span class="p">[</span><span class="s1">&#39;__name__&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;__main__&#39;</span>  <span class="c1"># provide a default module name</span>

        <span class="c1"># Recursively explore `obj`, extracting DocTests.</span>
        <span class="n">tests</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_find</span><span class="p">(</span><span class="n">tests</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">module</span><span class="p">,</span> <span class="n">source_lines</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="p">{})</span>
        <span class="c1"># Sort the tests by alpha order of names, for consistency in</span>
        <span class="c1"># verbose-mode output.  This was a feature of doctest in Pythons</span>
        <span class="c1"># &lt;= 2.3 that got lost by accident in 2.4.  It was repaired in</span>
        <span class="c1"># 2.4.4 and 2.5.</span>
        <span class="n">tests</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">tests</span></div>

    <span class="k">def</span> <span class="nf">_from_module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return true if the given object is defined in the given</span>
<span class="sd">        module.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">module</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">elif</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmodule</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">module</span> <span class="ow">is</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmodule</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isfunction</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">module</span><span class="o">.</span><span class="n">__dict__</span> <span class="ow">is</span> <span class="nb">object</span><span class="o">.</span><span class="n">func_globals</span>
        <span class="k">elif</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">module</span><span class="o">.</span><span class="n">__name__</span> <span class="o">==</span> <span class="nb">object</span><span class="o">.</span><span class="n">__module__</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="s1">&#39;__module__&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">module</span><span class="o">.</span><span class="n">__name__</span> <span class="o">==</span> <span class="nb">object</span><span class="o">.</span><span class="n">__module__</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="nb">property</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">True</span> <span class="c1"># [XX] no way not be sure.</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;object must be a class or function&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_find</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tests</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">module</span><span class="p">,</span> <span class="n">source_lines</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">seen</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find tests for the given object and any contained objects, and</span>
<span class="sd">        add them to `tests`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span><span class="p">:</span>
            <span class="k">print</span> <span class="s1">&#39;Finding tests in </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span>

        <span class="c1"># If we&#39;ve already processed this object, then ignore it.</span>
        <span class="k">if</span> <span class="nb">id</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">seen</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">obj</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="c1"># Find a test for this object, and add it to the list of tests.</span>
        <span class="n">test</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_test</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">module</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">source_lines</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">test</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">tests</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>

        <span class="c1"># Look for tests in a module&#39;s contained objects.</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismodule</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_recurse</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">valname</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">valname</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">valname</span><span class="p">)</span>
                <span class="c1"># Recurse to functions &amp; classes.</span>
                <span class="k">if</span> <span class="p">((</span><span class="n">inspect</span><span class="o">.</span><span class="n">isfunction</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="ow">or</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">val</span><span class="p">))</span> <span class="ow">and</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_from_module</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">val</span><span class="p">)):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_find</span><span class="p">(</span><span class="n">tests</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">valname</span><span class="p">,</span> <span class="n">module</span><span class="p">,</span> <span class="n">source_lines</span><span class="p">,</span>
                               <span class="n">globs</span><span class="p">,</span> <span class="n">seen</span><span class="p">)</span>

        <span class="c1"># Look for tests in a module&#39;s __test__ dictionary.</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismodule</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_recurse</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">valname</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;__test__&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">valname</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;DocTestFinder.find: __test__ keys &quot;</span>
                                     <span class="s2">&quot;must be strings: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span>
                                     <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">valname</span><span class="p">),))</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">isfunction</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="ow">or</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="ow">or</span>
                        <span class="n">inspect</span><span class="o">.</span><span class="n">ismethod</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="ow">or</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismodule</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="ow">or</span>
                        <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">)):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;DocTestFinder.find: __test__ values &quot;</span>
                                     <span class="s2">&quot;must be strings, functions, methods, &quot;</span>
                                     <span class="s2">&quot;classes, or modules: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span>
                                     <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">),))</span>
                <span class="n">valname</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.__test__.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">valname</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_find</span><span class="p">(</span><span class="n">tests</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">valname</span><span class="p">,</span> <span class="n">module</span><span class="p">,</span> <span class="n">source_lines</span><span class="p">,</span>
                           <span class="n">globs</span><span class="p">,</span> <span class="n">seen</span><span class="p">)</span>

        <span class="c1"># Look for tests in a class&#39;s contained objects.</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_recurse</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">valname</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="c1"># Special handling for staticmethod/classmethod.</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">staticmethod</span><span class="p">):</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">valname</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">classmethod</span><span class="p">):</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">valname</span><span class="p">)</span><span class="o">.</span><span class="n">im_func</span>

                <span class="c1"># Recurse to methods, properties, and nested classes.</span>
                <span class="k">if</span> <span class="p">((</span><span class="n">inspect</span><span class="o">.</span><span class="n">isfunction</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="ow">or</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="ow">or</span>
                      <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">property</span><span class="p">))</span> <span class="ow">and</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">_from_module</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">val</span><span class="p">)):</span>
                    <span class="n">valname</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">valname</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_find</span><span class="p">(</span><span class="n">tests</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">valname</span><span class="p">,</span> <span class="n">module</span><span class="p">,</span> <span class="n">source_lines</span><span class="p">,</span>
                               <span class="n">globs</span><span class="p">,</span> <span class="n">seen</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">module</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">source_lines</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a DocTest for the given object, if it defines a docstring;</span>
<span class="sd">        otherwise, return None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Extract the object&#39;s docstring.  If it doesn&#39;t have one,</span>
        <span class="c1"># then return None (no test for this object).</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
            <span class="n">docstring</span> <span class="o">=</span> <span class="n">obj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">__doc__</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">docstring</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">docstring</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">__doc__</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">docstring</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
                        <span class="n">docstring</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">docstring</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
                <span class="n">docstring</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="c1"># Find the docstring&#39;s location in the file.</span>
        <span class="n">lineno</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_lineno</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">source_lines</span><span class="p">)</span>

        <span class="c1"># Don&#39;t bother if the docstring is empty.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exclude_empty</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">docstring</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>

        <span class="c1"># Return a DocTest for this object.</span>
        <span class="k">if</span> <span class="n">module</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="s1">&#39;__file__&#39;</span><span class="p">,</span> <span class="n">module</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">filename</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;.pyc&quot;</span><span class="p">,</span> <span class="s2">&quot;.pyo&quot;</span><span class="p">):</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">get_doctest</span><span class="p">(</span><span class="n">docstring</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
                                        <span class="n">filename</span><span class="p">,</span> <span class="n">lineno</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_find_lineno</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">source_lines</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a line number of the given object&#39;s docstring.  Note:</span>
<span class="sd">        this method assumes that the object has a docstring.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lineno</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c1"># Find the line number for modules.</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismodule</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="n">lineno</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># Find the line number for classes.</span>
        <span class="c1"># Note: this could be fooled if a class is defined multiple</span>
        <span class="c1"># times in a single file.</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">source_lines</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">None</span>
            <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">r&#39;^\s*class\s*</span><span class="si">%s</span><span class="s1">\b&#39;</span> <span class="o">%</span>
                             <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;__name__&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">source_lines</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
                    <span class="n">lineno</span> <span class="o">=</span> <span class="n">i</span>
                    <span class="k">break</span>

        <span class="c1"># Find the line number for functions &amp; methods.</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismethod</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">im_func</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isfunction</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">func_code</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">istraceback</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">tb_frame</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isframe</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">f_code</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscode</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="n">lineno</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;co_firstlineno&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>

        <span class="c1"># Find the line number where the docstring starts.  Assume</span>
        <span class="c1"># that it&#39;s the first line that begins with a quote mark.</span>
        <span class="c1"># Note: this could be fooled by a multiline function</span>
        <span class="c1"># signature, where a continuation line begins with a quote</span>
        <span class="c1"># mark.</span>
        <span class="k">if</span> <span class="n">lineno</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">source_lines</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">lineno</span><span class="o">+</span><span class="mi">1</span>
            <span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;(^|.*:)\s*\w*(&quot;|</span><span class="se">\&#39;</span><span class="s1">)&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">lineno</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lineno</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">source_lines</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">source_lines</span><span class="p">[</span><span class="n">lineno</span><span class="p">]):</span>
                    <span class="k">return</span> <span class="n">lineno</span>

        <span class="c1"># We couldn&#39;t find the line number.</span>
        <span class="k">return</span> <span class="bp">None</span></div>

<span class="c1">######################################################################</span>
<span class="c1">## 5. DocTest Runner</span>
<span class="c1">######################################################################</span>

<div class="viewcode-block" id="DocTestRunner"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocTestRunner">[docs]</a><span class="k">class</span> <span class="nc">DocTestRunner</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class used to run DocTest test cases, and accumulate statistics.</span>
<span class="sd">    The `run` method is used to process a single DocTest case.  It</span>
<span class="sd">    returns a tuple `(f, t)`, where `t` is the number of test cases</span>
<span class="sd">    tried, and `f` is the number of test cases that failed.</span>

<span class="sd">        &gt;&gt;&gt; tests = DocTestFinder().find(_TestClass)</span>
<span class="sd">        &gt;&gt;&gt; runner = DocTestRunner(verbose=False)</span>
<span class="sd">        &gt;&gt;&gt; tests.sort(key = lambda test: test.name)</span>
<span class="sd">        &gt;&gt;&gt; for test in tests:</span>
<span class="sd">        ...     print test.name, &#39;-&gt;&#39;, runner.run(test)</span>
<span class="sd">        _TestClass -&gt; TestResults(failed=0, attempted=2)</span>
<span class="sd">        _TestClass.__init__ -&gt; TestResults(failed=0, attempted=2)</span>
<span class="sd">        _TestClass.get -&gt; TestResults(failed=0, attempted=2)</span>
<span class="sd">        _TestClass.square -&gt; TestResults(failed=0, attempted=1)</span>

<span class="sd">    The `summarize` method prints a summary of all the test cases that</span>
<span class="sd">    have been run by the runner, and returns an aggregated `(f, t)`</span>
<span class="sd">    tuple:</span>

<span class="sd">        &gt;&gt;&gt; runner.summarize(verbose=1)</span>
<span class="sd">        4 items passed all tests:</span>
<span class="sd">           2 tests in _TestClass</span>
<span class="sd">           2 tests in _TestClass.__init__</span>
<span class="sd">           2 tests in _TestClass.get</span>
<span class="sd">           1 tests in _TestClass.square</span>
<span class="sd">        7 tests in 4 items.</span>
<span class="sd">        7 passed and 0 failed.</span>
<span class="sd">        Test passed.</span>
<span class="sd">        TestResults(failed=0, attempted=7)</span>

<span class="sd">    The aggregated number of tried examples and failed examples is</span>
<span class="sd">    also available via the `tries` and `failures` attributes:</span>

<span class="sd">        &gt;&gt;&gt; runner.tries</span>
<span class="sd">        7</span>
<span class="sd">        &gt;&gt;&gt; runner.failures</span>
<span class="sd">        0</span>

<span class="sd">    The comparison between expected outputs and actual outputs is done</span>
<span class="sd">    by an `OutputChecker`.  This comparison may be customized with a</span>
<span class="sd">    number of option flags; see the documentation for `testmod` for</span>
<span class="sd">    more information.  If the option flags are insufficient, then the</span>
<span class="sd">    comparison may also be customized by passing a subclass of</span>
<span class="sd">    `OutputChecker` to the constructor.</span>

<span class="sd">    The test runner&#39;s display output can be controlled in two ways.</span>
<span class="sd">    First, an output function (`out) can be passed to</span>
<span class="sd">    `TestRunner.run`; this function will be called with strings that</span>
<span class="sd">    should be displayed.  It defaults to `sys.stdout.write`.  If</span>
<span class="sd">    capturing the output is not sufficient, then the display output</span>
<span class="sd">    can be also customized by subclassing DocTestRunner, and</span>
<span class="sd">    overriding the methods `report_start`, `report_success`,</span>
<span class="sd">    `report_unexpected_exception`, and `report_failure`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># This divider string is used to separate failure messages, and to</span>
    <span class="c1"># separate sections of the summary.</span>
    <span class="n">DIVIDER</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">70</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checker</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">optionflags</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new test runner.</span>

<span class="sd">        Optional keyword arg `checker` is the `OutputChecker` that</span>
<span class="sd">        should be used to compare the expected outputs and actual</span>
<span class="sd">        outputs of doctest examples.</span>

<span class="sd">        Optional keyword arg &#39;verbose&#39; prints lots of stuff if true,</span>
<span class="sd">        only failures if false; by default, it&#39;s true iff &#39;-v&#39; is in</span>
<span class="sd">        sys.argv.</span>

<span class="sd">        Optional argument `optionflags` can be used to control how the</span>
<span class="sd">        test runner compares expected output to actual output, and how</span>
<span class="sd">        it displays failures.  See the documentation for `testmod` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span> <span class="o">=</span> <span class="n">checker</span> <span class="ow">or</span> <span class="n">OutputChecker</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">verbose</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">verbose</span> <span class="o">=</span> <span class="s1">&#39;-v&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span> <span class="o">=</span> <span class="n">verbose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optionflags</span> <span class="o">=</span> <span class="n">optionflags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">original_optionflags</span> <span class="o">=</span> <span class="n">optionflags</span>

        <span class="c1"># Keep track of the examples we&#39;ve run.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tries</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">failures</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name2ft</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Create a fake output target for capturing doctest output.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fakeout</span> <span class="o">=</span> <span class="n">_SpoofOut</span><span class="p">()</span>

    <span class="c1">#/////////////////////////////////////////////////////////////////</span>
    <span class="c1"># Reporting methods</span>
    <span class="c1">#/////////////////////////////////////////////////////////////////</span>

<div class="viewcode-block" id="DocTestRunner.report_start"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocTestRunner.report_start">[docs]</a>    <span class="k">def</span> <span class="nf">report_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Report that the test runner is about to process the given</span>
<span class="sd">        example.  (Only displays a message if verbose=True)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">example</span><span class="o">.</span><span class="n">want</span><span class="p">:</span>
                <span class="n">out</span><span class="p">(</span><span class="s1">&#39;Trying:</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">_indent</span><span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">source</span><span class="p">)</span> <span class="o">+</span>
                    <span class="s1">&#39;Expecting:</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">_indent</span><span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">want</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">out</span><span class="p">(</span><span class="s1">&#39;Trying:</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">_indent</span><span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">source</span><span class="p">)</span> <span class="o">+</span>
                    <span class="s1">&#39;Expecting nothing</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="DocTestRunner.report_success"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocTestRunner.report_success">[docs]</a>    <span class="k">def</span> <span class="nf">report_success</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">,</span> <span class="n">got</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Report that the given example ran successfully.  (Only</span>
<span class="sd">        displays a message if verbose=True)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span><span class="p">:</span>
            <span class="n">out</span><span class="p">(</span><span class="s2">&quot;ok</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="DocTestRunner.report_failure"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocTestRunner.report_failure">[docs]</a>    <span class="k">def</span> <span class="nf">report_failure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">,</span> <span class="n">got</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Report that the given example failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">out</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_failure_header</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">)</span> <span class="o">+</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">output_difference</span><span class="p">(</span><span class="n">example</span><span class="p">,</span> <span class="n">got</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">optionflags</span><span class="p">))</span></div>

<div class="viewcode-block" id="DocTestRunner.report_unexpected_exception"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocTestRunner.report_unexpected_exception">[docs]</a>    <span class="k">def</span> <span class="nf">report_unexpected_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">,</span> <span class="n">exc_info</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Report that the given example raised an unexpected exception.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">out</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_failure_header</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">)</span> <span class="o">+</span>
            <span class="s1">&#39;Exception raised:</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">_indent</span><span class="p">(</span><span class="n">_exception_traceback</span><span class="p">(</span><span class="n">exc_info</span><span class="p">)))</span></div>

    <span class="k">def</span> <span class="nf">_failure_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">DIVIDER</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">test</span><span class="o">.</span><span class="n">filename</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">test</span><span class="o">.</span><span class="n">lineno</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">example</span><span class="o">.</span><span class="n">lineno</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">lineno</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">lineno</span> <span class="o">+</span> <span class="n">example</span><span class="o">.</span><span class="n">lineno</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">lineno</span> <span class="o">=</span> <span class="s1">&#39;?&#39;</span>
            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;File &quot;</span><span class="si">%s</span><span class="s1">&quot;, line </span><span class="si">%s</span><span class="s1">, in </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
                       <span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">test</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Line </span><span class="si">%s</span><span class="s1">, in </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">lineno</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">test</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
        <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Failed example:&#39;</span><span class="p">)</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">example</span><span class="o">.</span><span class="n">source</span>
        <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_indent</span><span class="p">(</span><span class="n">source</span><span class="p">))</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>

    <span class="c1">#/////////////////////////////////////////////////////////////////</span>
    <span class="c1"># DocTest Running</span>
    <span class="c1">#/////////////////////////////////////////////////////////////////</span>

    <span class="k">def</span> <span class="nf">__run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">compileflags</span><span class="p">,</span> <span class="n">out</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Run the examples in `test`.  Write the outcome of each example</span>
<span class="sd">        with one of the `DocTestRunner.report_*` methods, using the</span>
<span class="sd">        writer function `out`.  `compileflags` is the set of compiler</span>
<span class="sd">        flags that should be used to execute examples.  Return a tuple</span>
<span class="sd">        `(f, t)`, where `t` is the number of examples tried, and `f`</span>
<span class="sd">        is the number of examples that failed.  The examples are run</span>
<span class="sd">        in the namespace `test.globs`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Keep track of the number of failures and tries.</span>
        <span class="n">failures</span> <span class="o">=</span> <span class="n">tries</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># Save the option flags (since option directives can be used</span>
        <span class="c1"># to modify them).</span>
        <span class="n">original_optionflags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">optionflags</span>

        <span class="n">SUCCESS</span><span class="p">,</span> <span class="n">FAILURE</span><span class="p">,</span> <span class="n">BOOM</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># `outcome` state</span>

        <span class="n">check</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checker</span><span class="o">.</span><span class="n">check_output</span>

        <span class="c1"># Process each example.</span>
        <span class="k">for</span> <span class="n">examplenum</span><span class="p">,</span> <span class="n">example</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">examples</span><span class="p">):</span>

            <span class="c1"># If REPORT_ONLY_FIRST_FAILURE is set, then suppress</span>
            <span class="c1"># reporting after the first failure.</span>
            <span class="n">quiet</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">optionflags</span> <span class="o">&amp;</span> <span class="n">REPORT_ONLY_FIRST_FAILURE</span> <span class="ow">and</span>
                     <span class="n">failures</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>

            <span class="c1"># Merge in the example&#39;s options.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">optionflags</span> <span class="o">=</span> <span class="n">original_optionflags</span>
            <span class="k">if</span> <span class="n">example</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">optionflag</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span> <span class="ow">in</span> <span class="n">example</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">val</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">optionflags</span> <span class="o">|=</span> <span class="n">optionflag</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">optionflags</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">optionflag</span>

            <span class="c1"># If &#39;SKIP&#39; is set, then skip this example.</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">optionflags</span> <span class="o">&amp;</span> <span class="n">SKIP</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># Record that we started this example.</span>
            <span class="n">tries</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">quiet</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">report_start</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">)</span>

            <span class="c1"># Use a special filename for compile(), so we can retrieve</span>
            <span class="c1"># the source code during interactive debugging (see</span>
            <span class="c1"># __patched_linecache_getlines).</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;&lt;doctest </span><span class="si">%s</span><span class="s1">[</span><span class="si">%d</span><span class="s1">]&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">examplenum</span><span class="p">)</span>

            <span class="c1"># Run the example in the given context (globs), and record</span>
            <span class="c1"># any exception that gets raised.  (But don&#39;t intercept</span>
            <span class="c1"># keyboard interrupts.)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Don&#39;t blink!  This is where the user&#39;s code gets run.</span>
                <span class="k">exec</span> <span class="nb">compile</span><span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;single&quot;</span><span class="p">,</span>
                             <span class="n">compileflags</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">in</span> <span class="n">test</span><span class="o">.</span><span class="n">globs</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">debugger</span><span class="o">.</span><span class="n">set_continue</span><span class="p">()</span> <span class="c1"># ==== Example Finished ====</span>
                <span class="n">exception</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">exception</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">debugger</span><span class="o">.</span><span class="n">set_continue</span><span class="p">()</span> <span class="c1"># ==== Example Finished ====</span>

            <span class="n">got</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fakeout</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>  <span class="c1"># the actual output</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fakeout</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">outcome</span> <span class="o">=</span> <span class="n">FAILURE</span>   <span class="c1"># guilty until proved innocent or insane</span>

            <span class="c1"># If the example executed without raising any exceptions,</span>
            <span class="c1"># verify its output.</span>
            <span class="k">if</span> <span class="n">exception</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">check</span><span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">want</span><span class="p">,</span> <span class="n">got</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">optionflags</span><span class="p">):</span>
                    <span class="n">outcome</span> <span class="o">=</span> <span class="n">SUCCESS</span>

            <span class="c1"># The example raised an exception:  check if it was expected.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">exc_info</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
                <span class="n">exc_msg</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exception_only</span><span class="p">(</span><span class="o">*</span><span class="n">exc_info</span><span class="p">[:</span><span class="mi">2</span><span class="p">])[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">quiet</span><span class="p">:</span>
                    <span class="n">got</span> <span class="o">+=</span> <span class="n">_exception_traceback</span><span class="p">(</span><span class="n">exc_info</span><span class="p">)</span>

                <span class="c1"># If `example.exc_msg` is None, then we weren&#39;t expecting</span>
                <span class="c1"># an exception.</span>
                <span class="k">if</span> <span class="n">example</span><span class="o">.</span><span class="n">exc_msg</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">outcome</span> <span class="o">=</span> <span class="n">BOOM</span>

                <span class="c1"># We expected an exception:  see whether it matches.</span>
                <span class="k">elif</span> <span class="n">check</span><span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">exc_msg</span><span class="p">,</span> <span class="n">exc_msg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">optionflags</span><span class="p">):</span>
                    <span class="n">outcome</span> <span class="o">=</span> <span class="n">SUCCESS</span>

                <span class="c1"># Another chance if they didn&#39;t care about the detail.</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">optionflags</span> <span class="o">&amp;</span> <span class="n">IGNORE_EXCEPTION_DETAIL</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">check</span><span class="p">(</span><span class="n">_strip_exception_details</span><span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">exc_msg</span><span class="p">),</span>
                             <span class="n">_strip_exception_details</span><span class="p">(</span><span class="n">exc_msg</span><span class="p">),</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">optionflags</span><span class="p">):</span>
                        <span class="n">outcome</span> <span class="o">=</span> <span class="n">SUCCESS</span>

            <span class="c1"># Report the outcome.</span>
            <span class="k">if</span> <span class="n">outcome</span> <span class="ow">is</span> <span class="n">SUCCESS</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">quiet</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">report_success</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">outcome</span> <span class="ow">is</span> <span class="n">FAILURE</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">quiet</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">report_failure</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>
                <span class="n">failures</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">outcome</span> <span class="ow">is</span> <span class="n">BOOM</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">quiet</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">report_unexpected_exception</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">,</span>
                                                     <span class="n">exc_info</span><span class="p">)</span>
                <span class="n">failures</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="bp">False</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;unknown outcome&quot;</span><span class="p">,</span> <span class="n">outcome</span><span class="p">)</span>

        <span class="c1"># Restore the option flags (in case they were modified)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optionflags</span> <span class="o">=</span> <span class="n">original_optionflags</span>

        <span class="c1"># Record and return the number of failures and tries.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__record_outcome</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">failures</span><span class="p">,</span> <span class="n">tries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">TestResults</span><span class="p">(</span><span class="n">failures</span><span class="p">,</span> <span class="n">tries</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__record_outcome</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Record the fact that the given DocTest (`test`) generated `f`</span>
<span class="sd">        failures out of `t` tried examples.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">f2</span><span class="p">,</span> <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name2ft</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name2ft</span><span class="p">[</span><span class="n">test</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">f</span><span class="o">+</span><span class="n">f2</span><span class="p">,</span> <span class="n">t</span><span class="o">+</span><span class="n">t2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">failures</span> <span class="o">+=</span> <span class="n">f</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tries</span> <span class="o">+=</span> <span class="n">t</span>

    <span class="n">__LINECACHE_FILENAME_RE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">r&#39;&lt;doctest &#39;</span>
                                         <span class="s1">r&#39;(?P&lt;name&gt;.+)&#39;</span>
                                         <span class="s1">r&#39;\[(?P&lt;examplenum&gt;\d+)\]&gt;$&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__patched_linecache_getlines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">module_globals</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__LINECACHE_FILENAME_RE</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span> <span class="ow">and</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="n">example</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">examples</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;examplenum&#39;</span><span class="p">))]</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">example</span><span class="o">.</span><span class="n">source</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">unicode</span><span class="p">):</span>
                <span class="n">source</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="s1">&#39;backslashreplace&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">source</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_linecache_getlines</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">module_globals</span><span class="p">)</span>

<div class="viewcode-block" id="DocTestRunner.run"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocTestRunner.run">[docs]</a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">compileflags</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">clear_globs</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Run the examples in `test`, and display the results using the</span>
<span class="sd">        writer function `out`.</span>

<span class="sd">        The examples are run in the namespace `test.globs`.  If</span>
<span class="sd">        `clear_globs` is true (the default), then this namespace will</span>
<span class="sd">        be cleared after the test runs, to help with garbage</span>
<span class="sd">        collection.  If you would like to examine the namespace after</span>
<span class="sd">        the test completes, then use `clear_globs=False`.</span>

<span class="sd">        `compileflags` gives the set of flags that should be used by</span>
<span class="sd">        the Python compiler when running the examples.  If not</span>
<span class="sd">        specified, then it will default to the set of future-import</span>
<span class="sd">        flags that apply to `globs`.</span>

<span class="sd">        The output of each example is checked using</span>
<span class="sd">        `DocTestRunner.check_output`, and the results are formatted by</span>
<span class="sd">        the `DocTestRunner.report_*` methods.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">test</span> <span class="o">=</span> <span class="n">test</span>

        <span class="k">if</span> <span class="n">compileflags</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">compileflags</span> <span class="o">=</span> <span class="n">_extract_future_flags</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">globs</span><span class="p">)</span>

        <span class="n">save_stdout</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">save_stdout</span><span class="o">.</span><span class="n">write</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fakeout</span>

        <span class="c1"># Patch pdb.set_trace to restore sys.stdout during interactive</span>
        <span class="c1"># debugging (so it&#39;s not still redirected to self._fakeout).</span>
        <span class="c1"># Note that the interactive output will go to *our*</span>
        <span class="c1"># save_stdout, even if that&#39;s not the real sys.stdout; this</span>
        <span class="c1"># allows us to write test cases for the set_trace behavior.</span>
        <span class="n">save_set_trace</span> <span class="o">=</span> <span class="n">pdb</span><span class="o">.</span><span class="n">set_trace</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debugger</span> <span class="o">=</span> <span class="n">_OutputRedirectingPdb</span><span class="p">(</span><span class="n">save_stdout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debugger</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="n">pdb</span><span class="o">.</span><span class="n">set_trace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugger</span><span class="o">.</span><span class="n">set_trace</span>

        <span class="c1"># Patch linecache.getlines, so we can see the example&#39;s source</span>
        <span class="c1"># when we&#39;re inside the debugger.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_linecache_getlines</span> <span class="o">=</span> <span class="n">linecache</span><span class="o">.</span><span class="n">getlines</span>
        <span class="n">linecache</span><span class="o">.</span><span class="n">getlines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__patched_linecache_getlines</span>

        <span class="c1"># Make sure sys.displayhook just prints the value to stdout</span>
        <span class="n">save_displayhook</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">displayhook</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">displayhook</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">__displayhook__</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__run</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">compileflags</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">save_stdout</span>
            <span class="n">pdb</span><span class="o">.</span><span class="n">set_trace</span> <span class="o">=</span> <span class="n">save_set_trace</span>
            <span class="n">linecache</span><span class="o">.</span><span class="n">getlines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_linecache_getlines</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">displayhook</span> <span class="o">=</span> <span class="n">save_displayhook</span>
            <span class="k">if</span> <span class="n">clear_globs</span><span class="p">:</span>
                <span class="n">test</span><span class="o">.</span><span class="n">globs</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>

    <span class="c1">#/////////////////////////////////////////////////////////////////</span>
    <span class="c1"># Summarization</span>
    <span class="c1">#/////////////////////////////////////////////////////////////////</span>
<div class="viewcode-block" id="DocTestRunner.summarize"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocTestRunner.summarize">[docs]</a>    <span class="k">def</span> <span class="nf">summarize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Print a summary of all the test cases that have been run by</span>
<span class="sd">        this DocTestRunner, and return a tuple `(f, t)`, where `f` is</span>
<span class="sd">        the total number of failed examples, and `t` is the total</span>
<span class="sd">        number of tried examples.</span>

<span class="sd">        The optional `verbose` argument controls how detailed the</span>
<span class="sd">        summary is.  If the verbosity is not specified, then the</span>
<span class="sd">        DocTestRunner&#39;s verbosity is used.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">verbose</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">verbose</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span>
        <span class="n">notests</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">passed</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">failed</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">totalt</span> <span class="o">=</span> <span class="n">totalf</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name2ft</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">name</span><span class="p">,</span> <span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="n">x</span>
            <span class="k">assert</span> <span class="n">f</span> <span class="o">&lt;=</span> <span class="n">t</span>
            <span class="n">totalt</span> <span class="o">+=</span> <span class="n">t</span>
            <span class="n">totalf</span> <span class="o">+=</span> <span class="n">f</span>
            <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">notests</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">f</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">passed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">failed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">notests</span><span class="p">:</span>
                <span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">notests</span><span class="p">),</span> <span class="s2">&quot;items had no tests:&quot;</span>
                <span class="n">notests</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">thing</span> <span class="ow">in</span> <span class="n">notests</span><span class="p">:</span>
                    <span class="k">print</span> <span class="s2">&quot;   &quot;</span><span class="p">,</span> <span class="n">thing</span>
            <span class="k">if</span> <span class="n">passed</span><span class="p">:</span>
                <span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">passed</span><span class="p">),</span> <span class="s2">&quot;items passed all tests:&quot;</span>
                <span class="n">passed</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">thing</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">passed</span><span class="p">:</span>
                    <span class="k">print</span> <span class="s2">&quot; </span><span class="si">%3d</span><span class="s2"> tests in </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">thing</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">failed</span><span class="p">:</span>
            <span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">DIVIDER</span>
            <span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">failed</span><span class="p">),</span> <span class="s2">&quot;items had failures:&quot;</span>
            <span class="n">failed</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">thing</span><span class="p">,</span> <span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="ow">in</span> <span class="n">failed</span><span class="p">:</span>
                <span class="k">print</span> <span class="s2">&quot; </span><span class="si">%3d</span><span class="s2"> of </span><span class="si">%3d</span><span class="s2"> in </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">thing</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="k">print</span> <span class="n">totalt</span><span class="p">,</span> <span class="s2">&quot;tests in&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name2ft</span><span class="p">),</span> <span class="s2">&quot;items.&quot;</span>
            <span class="k">print</span> <span class="n">totalt</span> <span class="o">-</span> <span class="n">totalf</span><span class="p">,</span> <span class="s2">&quot;passed and&quot;</span><span class="p">,</span> <span class="n">totalf</span><span class="p">,</span> <span class="s2">&quot;failed.&quot;</span>
        <span class="k">if</span> <span class="n">totalf</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;***Test Failed***&quot;</span><span class="p">,</span> <span class="n">totalf</span><span class="p">,</span> <span class="s2">&quot;failures.&quot;</span>
        <span class="k">elif</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Test passed.&quot;</span>
        <span class="k">return</span> <span class="n">TestResults</span><span class="p">(</span><span class="n">totalf</span><span class="p">,</span> <span class="n">totalt</span><span class="p">)</span></div>

    <span class="c1">#/////////////////////////////////////////////////////////////////</span>
    <span class="c1"># Backward compatibility cruft to maintain doctest.master.</span>
    <span class="c1">#/////////////////////////////////////////////////////////////////</span>
    <span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name2ft</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">_name2ft</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
                <span class="c1"># Don&#39;t print here by default, since doing</span>
                <span class="c1">#     so breaks some of the buildbots</span>
                <span class="c1">#print &quot;*** DocTestRunner.merge: &#39;&quot; + name + &quot;&#39; in both&quot; \</span>
                <span class="c1">#    &quot; testers; summing outcomes.&quot;</span>
                <span class="n">f2</span><span class="p">,</span> <span class="n">t2</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
                <span class="n">f</span> <span class="o">=</span> <span class="n">f</span> <span class="o">+</span> <span class="n">f2</span>
                <span class="n">t</span> <span class="o">=</span> <span class="n">t</span> <span class="o">+</span> <span class="n">t2</span>
            <span class="n">d</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">,</span> <span class="n">t</span></div>

<div class="viewcode-block" id="OutputChecker"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.OutputChecker">[docs]</a><span class="k">class</span> <span class="nc">OutputChecker</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class used to check the whether the actual output from a doctest</span>
<span class="sd">    example matches the expected output.  `OutputChecker` defines two</span>
<span class="sd">    methods: `check_output`, which compares a given pair of outputs,</span>
<span class="sd">    and returns true if they match; and `output_difference`, which</span>
<span class="sd">    returns a string describing the differences between two outputs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="OutputChecker.check_output"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.OutputChecker.check_output">[docs]</a>    <span class="k">def</span> <span class="nf">check_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">want</span><span class="p">,</span> <span class="n">got</span><span class="p">,</span> <span class="n">optionflags</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return True iff the actual output from an example (`got`)</span>
<span class="sd">        matches the expected output (`want`).  These strings are</span>
<span class="sd">        always considered to match if they are identical; but</span>
<span class="sd">        depending on what option flags the test runner is using,</span>
<span class="sd">        several non-exact match types are also possible.  See the</span>
<span class="sd">        documentation for `TestRunner` for more information about</span>
<span class="sd">        option flags.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Handle the common case first, for efficiency:</span>
        <span class="c1"># if they&#39;re string-identical, always return true.</span>
        <span class="k">if</span> <span class="n">got</span> <span class="o">==</span> <span class="n">want</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>

        <span class="c1"># The values True and False replaced 1 and 0 as the return</span>
        <span class="c1"># value for boolean comparisons in Python 2.3.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">optionflags</span> <span class="o">&amp;</span> <span class="n">DONT_ACCEPT_TRUE_FOR_1</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">got</span><span class="p">,</span><span class="n">want</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="s2">&quot;True</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;1</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">True</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">got</span><span class="p">,</span><span class="n">want</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="s2">&quot;False</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;0</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">True</span>

        <span class="c1"># &lt;BLANKLINE&gt; can be used as a special sequence to signify a</span>
        <span class="c1"># blank line, unless the DONT_ACCEPT_BLANKLINE flag is used.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">optionflags</span> <span class="o">&amp;</span> <span class="n">DONT_ACCEPT_BLANKLINE</span><span class="p">):</span>
            <span class="c1"># Replace &lt;BLANKLINE&gt; in want with a blank line.</span>
            <span class="n">want</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;(?m)^</span><span class="si">%s</span><span class="s1">\s*?$&#39;</span> <span class="o">%</span> <span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">BLANKLINE_MARKER</span><span class="p">),</span>
                          <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">want</span><span class="p">)</span>
            <span class="c1"># If a line in got contains only spaces, then remove the</span>
            <span class="c1"># spaces.</span>
            <span class="n">got</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;(?m)^\s*?$&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">got</span> <span class="o">==</span> <span class="n">want</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span>

        <span class="c1"># This flag causes doctest to ignore any differences in the</span>
        <span class="c1"># contents of whitespace strings.  Note that this can be used</span>
        <span class="c1"># in conjunction with the ELLIPSIS flag.</span>
        <span class="k">if</span> <span class="n">optionflags</span> <span class="o">&amp;</span> <span class="n">NORMALIZE_WHITESPACE</span><span class="p">:</span>
            <span class="n">got</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">got</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
            <span class="n">want</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">want</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">got</span> <span class="o">==</span> <span class="n">want</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span>

        <span class="c1"># The ELLIPSIS flag says to let the sequence &quot;...&quot; in `want`</span>
        <span class="c1"># match any substring in `got`.</span>
        <span class="k">if</span> <span class="n">optionflags</span> <span class="o">&amp;</span> <span class="n">ELLIPSIS</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">_ellipsis_match</span><span class="p">(</span><span class="n">want</span><span class="p">,</span> <span class="n">got</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">True</span>

        <span class="c1"># We didn&#39;t find any match; return false.</span>
        <span class="k">return</span> <span class="bp">False</span></div>

    <span class="c1"># Should we do a fancy diff?</span>
    <span class="k">def</span> <span class="nf">_do_a_fancy_diff</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">want</span><span class="p">,</span> <span class="n">got</span><span class="p">,</span> <span class="n">optionflags</span><span class="p">):</span>
        <span class="c1"># Not unless they asked for a fancy diff.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">optionflags</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">REPORT_UDIFF</span> <span class="o">|</span>
                              <span class="n">REPORT_CDIFF</span> <span class="o">|</span>
                              <span class="n">REPORT_NDIFF</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="c1"># If expected output uses ellipsis, a meaningful fancy diff is</span>
        <span class="c1"># too hard ... or maybe not.  In two real-life failures Tim saw,</span>
        <span class="c1"># a diff was a major help anyway, so this is commented out.</span>
        <span class="c1"># [todo] _ellipsis_match() knows which pieces do and don&#39;t match,</span>
        <span class="c1"># and could be the basis for a kick-ass diff in this case.</span>
        <span class="c1">##if optionflags &amp; ELLIPSIS and ELLIPSIS_MARKER in want:</span>
        <span class="c1">##    return False</span>

        <span class="c1"># ndiff does intraline difference marking, so can be useful even</span>
        <span class="c1"># for 1-line differences.</span>
        <span class="k">if</span> <span class="n">optionflags</span> <span class="o">&amp;</span> <span class="n">REPORT_NDIFF</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>

        <span class="c1"># The other diff types need at least a few lines to be helpful.</span>
        <span class="k">return</span> <span class="n">want</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">got</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span>

<div class="viewcode-block" id="OutputChecker.output_difference"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.OutputChecker.output_difference">[docs]</a>    <span class="k">def</span> <span class="nf">output_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">example</span><span class="p">,</span> <span class="n">got</span><span class="p">,</span> <span class="n">optionflags</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a string describing the differences between the</span>
<span class="sd">        expected output for a given example (`example`) and the actual</span>
<span class="sd">        output (`got`).  `optionflags` is the set of option flags used</span>
<span class="sd">        to compare `want` and `got`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">want</span> <span class="o">=</span> <span class="n">example</span><span class="o">.</span><span class="n">want</span>
        <span class="c1"># If &lt;BLANKLINE&gt;s are being used, then replace blank lines</span>
        <span class="c1"># with &lt;BLANKLINE&gt; in the actual output string.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">optionflags</span> <span class="o">&amp;</span> <span class="n">DONT_ACCEPT_BLANKLINE</span><span class="p">):</span>
            <span class="n">got</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;(?m)^[ ]*(?=</span><span class="se">\n</span><span class="s1">)&#39;</span><span class="p">,</span> <span class="n">BLANKLINE_MARKER</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span>

        <span class="c1"># Check if we should use diff.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_a_fancy_diff</span><span class="p">(</span><span class="n">want</span><span class="p">,</span> <span class="n">got</span><span class="p">,</span> <span class="n">optionflags</span><span class="p">):</span>
            <span class="c1"># Split want &amp; got into lines.</span>
            <span class="n">want_lines</span> <span class="o">=</span> <span class="n">want</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>  <span class="c1"># True == keep line ends</span>
            <span class="n">got_lines</span> <span class="o">=</span> <span class="n">got</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
            <span class="c1"># Use difflib to find their differences.</span>
            <span class="k">if</span> <span class="n">optionflags</span> <span class="o">&amp;</span> <span class="n">REPORT_UDIFF</span><span class="p">:</span>
                <span class="n">diff</span> <span class="o">=</span> <span class="n">difflib</span><span class="o">.</span><span class="n">unified_diff</span><span class="p">(</span><span class="n">want_lines</span><span class="p">,</span> <span class="n">got_lines</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
                <span class="n">diff</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">diff</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span> <span class="c1"># strip the diff header</span>
                <span class="n">kind</span> <span class="o">=</span> <span class="s1">&#39;unified diff with -expected +actual&#39;</span>
            <span class="k">elif</span> <span class="n">optionflags</span> <span class="o">&amp;</span> <span class="n">REPORT_CDIFF</span><span class="p">:</span>
                <span class="n">diff</span> <span class="o">=</span> <span class="n">difflib</span><span class="o">.</span><span class="n">context_diff</span><span class="p">(</span><span class="n">want_lines</span><span class="p">,</span> <span class="n">got_lines</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
                <span class="n">diff</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">diff</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span> <span class="c1"># strip the diff header</span>
                <span class="n">kind</span> <span class="o">=</span> <span class="s1">&#39;context diff with expected followed by actual&#39;</span>
            <span class="k">elif</span> <span class="n">optionflags</span> <span class="o">&amp;</span> <span class="n">REPORT_NDIFF</span><span class="p">:</span>
                <span class="n">engine</span> <span class="o">=</span> <span class="n">difflib</span><span class="o">.</span><span class="n">Differ</span><span class="p">(</span><span class="n">charjunk</span><span class="o">=</span><span class="n">difflib</span><span class="o">.</span><span class="n">IS_CHARACTER_JUNK</span><span class="p">)</span>
                <span class="n">diff</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">engine</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">want_lines</span><span class="p">,</span> <span class="n">got_lines</span><span class="p">))</span>
                <span class="n">kind</span> <span class="o">=</span> <span class="s1">&#39;ndiff with -expected +actual&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Bad diff option&#39;</span>
            <span class="c1"># Remove trailing whitespace on diff output.</span>
            <span class="n">diff</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">diff</span><span class="p">]</span>
            <span class="k">return</span> <span class="s1">&#39;Differences (</span><span class="si">%s</span><span class="s1">):</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">kind</span> <span class="o">+</span> <span class="n">_indent</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">diff</span><span class="p">))</span>

        <span class="c1"># If we&#39;re not using diff, then simply list the expected</span>
        <span class="c1"># output followed by the actual output.</span>
        <span class="k">if</span> <span class="n">want</span> <span class="ow">and</span> <span class="n">got</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;Expected:</span><span class="se">\n</span><span class="si">%s</span><span class="s1">Got:</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">_indent</span><span class="p">(</span><span class="n">want</span><span class="p">),</span> <span class="n">_indent</span><span class="p">(</span><span class="n">got</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">want</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;Expected:</span><span class="se">\n</span><span class="si">%s</span><span class="s1">Got nothing</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">_indent</span><span class="p">(</span><span class="n">want</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">got</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;Expected nothing</span><span class="se">\n</span><span class="s1">Got:</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">_indent</span><span class="p">(</span><span class="n">got</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;Expected nothing</span><span class="se">\n</span><span class="s1">Got nothing</span><span class="se">\n</span><span class="s1">&#39;</span></div></div>

<div class="viewcode-block" id="DocTestFailure"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocTestFailure">[docs]</a><span class="k">class</span> <span class="nc">DocTestFailure</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A DocTest example has failed in debugging mode.</span>

<span class="sd">    The exception instance has variables:</span>

<span class="sd">    - test: the DocTest object being run</span>

<span class="sd">    - example: the Example object that failed</span>

<span class="sd">    - got: the actual output</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">,</span> <span class="n">got</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">test</span> <span class="o">=</span> <span class="n">test</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">example</span> <span class="o">=</span> <span class="n">example</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">got</span> <span class="o">=</span> <span class="n">got</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">test</span><span class="p">)</span></div>

<div class="viewcode-block" id="UnexpectedException"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.UnexpectedException">[docs]</a><span class="k">class</span> <span class="nc">UnexpectedException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A DocTest example has encountered an unexpected exception</span>

<span class="sd">    The exception instance has variables:</span>

<span class="sd">    - test: the DocTest object being run</span>

<span class="sd">    - example: the Example object that failed</span>

<span class="sd">    - exc_info: the exception info</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">,</span> <span class="n">exc_info</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">test</span> <span class="o">=</span> <span class="n">test</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">example</span> <span class="o">=</span> <span class="n">example</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exc_info</span> <span class="o">=</span> <span class="n">exc_info</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">test</span><span class="p">)</span></div>

<div class="viewcode-block" id="DebugRunner"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DebugRunner">[docs]</a><span class="k">class</span> <span class="nc">DebugRunner</span><span class="p">(</span><span class="n">DocTestRunner</span><span class="p">):</span>
    <span class="sd">r&quot;&quot;&quot;Run doc tests but raise an exception as soon as there is a failure.</span>

<span class="sd">       If an unexpected exception occurs, an UnexpectedException is raised.</span>
<span class="sd">       It contains the test, the example, and the original exception:</span>

<span class="sd">         &gt;&gt;&gt; runner = DebugRunner(verbose=False)</span>
<span class="sd">         &gt;&gt;&gt; test = DocTestParser().get_doctest(&#39;&gt;&gt;&gt; raise KeyError\n42&#39;,</span>
<span class="sd">         ...                                    {}, &#39;foo&#39;, &#39;foo.py&#39;, 0)</span>
<span class="sd">         &gt;&gt;&gt; try:</span>
<span class="sd">         ...     runner.run(test)</span>
<span class="sd">         ... except UnexpectedException, failure:</span>
<span class="sd">         ...     pass</span>

<span class="sd">         &gt;&gt;&gt; failure.test is test</span>
<span class="sd">         True</span>

<span class="sd">         &gt;&gt;&gt; failure.example.want</span>
<span class="sd">         &#39;42\n&#39;</span>

<span class="sd">         &gt;&gt;&gt; exc_info = failure.exc_info</span>
<span class="sd">         &gt;&gt;&gt; raise exc_info[0], exc_info[1], exc_info[2]</span>
<span class="sd">         Traceback (most recent call last):</span>
<span class="sd">         ...</span>
<span class="sd">         KeyError</span>

<span class="sd">       We wrap the original exception to give the calling application</span>
<span class="sd">       access to the test and example information.</span>

<span class="sd">       If the output doesn&#39;t match, then a DocTestFailure is raised:</span>

<span class="sd">         &gt;&gt;&gt; test = DocTestParser().get_doctest(&#39;&#39;&#39;</span>
<span class="sd">         ...      &gt;&gt;&gt; x = 1</span>
<span class="sd">         ...      &gt;&gt;&gt; x</span>
<span class="sd">         ...      2</span>
<span class="sd">         ...      &#39;&#39;&#39;, {}, &#39;foo&#39;, &#39;foo.py&#39;, 0)</span>

<span class="sd">         &gt;&gt;&gt; try:</span>
<span class="sd">         ...    runner.run(test)</span>
<span class="sd">         ... except DocTestFailure, failure:</span>
<span class="sd">         ...    pass</span>

<span class="sd">       DocTestFailure objects provide access to the test:</span>

<span class="sd">         &gt;&gt;&gt; failure.test is test</span>
<span class="sd">         True</span>

<span class="sd">       As well as to the example:</span>

<span class="sd">         &gt;&gt;&gt; failure.example.want</span>
<span class="sd">         &#39;2\n&#39;</span>

<span class="sd">       and the actual output:</span>

<span class="sd">         &gt;&gt;&gt; failure.got</span>
<span class="sd">         &#39;1\n&#39;</span>

<span class="sd">       If a failure or error occurs, the globals are left intact:</span>

<span class="sd">         &gt;&gt;&gt; del test.globs[&#39;__builtins__&#39;]</span>
<span class="sd">         &gt;&gt;&gt; test.globs</span>
<span class="sd">         {&#39;x&#39;: 1}</span>

<span class="sd">         &gt;&gt;&gt; test = DocTestParser().get_doctest(&#39;&#39;&#39;</span>
<span class="sd">         ...      &gt;&gt;&gt; x = 2</span>
<span class="sd">         ...      &gt;&gt;&gt; raise KeyError</span>
<span class="sd">         ...      &#39;&#39;&#39;, {}, &#39;foo&#39;, &#39;foo.py&#39;, 0)</span>

<span class="sd">         &gt;&gt;&gt; runner.run(test)</span>
<span class="sd">         Traceback (most recent call last):</span>
<span class="sd">         ...</span>
<span class="sd">         UnexpectedException: &lt;DocTest foo from foo.py:0 (2 examples)&gt;</span>

<span class="sd">         &gt;&gt;&gt; del test.globs[&#39;__builtins__&#39;]</span>
<span class="sd">         &gt;&gt;&gt; test.globs</span>
<span class="sd">         {&#39;x&#39;: 2}</span>

<span class="sd">       But the globals are cleared if there is no error:</span>

<span class="sd">         &gt;&gt;&gt; test = DocTestParser().get_doctest(&#39;&#39;&#39;</span>
<span class="sd">         ...      &gt;&gt;&gt; x = 2</span>
<span class="sd">         ...      &#39;&#39;&#39;, {}, &#39;foo&#39;, &#39;foo.py&#39;, 0)</span>

<span class="sd">         &gt;&gt;&gt; runner.run(test)</span>
<span class="sd">         TestResults(failed=0, attempted=1)</span>

<span class="sd">         &gt;&gt;&gt; test.globs</span>
<span class="sd">         {}</span>

<span class="sd">       &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">compileflags</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">clear_globs</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">DocTestRunner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">compileflags</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">clear_globs</span><span class="p">:</span>
            <span class="n">test</span><span class="o">.</span><span class="n">globs</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">r</span>

    <span class="k">def</span> <span class="nf">report_unexpected_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">,</span> <span class="n">exc_info</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">UnexpectedException</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">,</span> <span class="n">exc_info</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">report_failure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">,</span> <span class="n">got</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">DocTestFailure</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">example</span><span class="p">,</span> <span class="n">got</span><span class="p">)</span></div>

<span class="c1">######################################################################</span>
<span class="c1">## 6. Test Functions</span>
<span class="c1">######################################################################</span>
<span class="c1"># These should be backwards compatible.</span>

<span class="c1"># For backward compatibility, a global instance of a DocTestRunner</span>
<span class="c1"># class, updated by testmod.</span>
<span class="n">master</span> <span class="o">=</span> <span class="bp">None</span>

<div class="viewcode-block" id="testmod"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.testmod">[docs]</a><span class="k">def</span> <span class="nf">testmod</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">globs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
            <span class="n">report</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">optionflags</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">extraglobs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
            <span class="n">raise_on_error</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">exclude_empty</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;m=None, name=None, globs=None, verbose=None, report=True,</span>
<span class="sd">       optionflags=0, extraglobs=None, raise_on_error=False,</span>
<span class="sd">       exclude_empty=False</span>

<span class="sd">    Test examples in docstrings in functions and classes reachable</span>
<span class="sd">    from module m (or the current module if m is not supplied), starting</span>
<span class="sd">    with m.__doc__.</span>

<span class="sd">    Also test examples reachable from dict m.__test__ if it exists and is</span>
<span class="sd">    not None.  m.__test__ maps names to functions, classes and strings;</span>
<span class="sd">    function and class docstrings are tested even if the name is private;</span>
<span class="sd">    strings are tested directly, as if they were docstrings.</span>

<span class="sd">    Return (#failures, #tests).</span>

<span class="sd">    See help(doctest) for an overview.</span>

<span class="sd">    Optional keyword arg &quot;name&quot; gives the name of the module; by default</span>
<span class="sd">    use m.__name__.</span>

<span class="sd">    Optional keyword arg &quot;globs&quot; gives a dict to be used as the globals</span>
<span class="sd">    when executing examples; by default, use m.__dict__.  A copy of this</span>
<span class="sd">    dict is actually used for each docstring, so that each docstring&#39;s</span>
<span class="sd">    examples start with a clean slate.</span>

<span class="sd">    Optional keyword arg &quot;extraglobs&quot; gives a dictionary that should be</span>
<span class="sd">    merged into the globals that are used to execute examples.  By</span>
<span class="sd">    default, no extra globals are used.  This is new in 2.4.</span>

<span class="sd">    Optional keyword arg &quot;verbose&quot; prints lots of stuff if true, prints</span>
<span class="sd">    only failures if false; by default, it&#39;s true iff &quot;-v&quot; is in sys.argv.</span>

<span class="sd">    Optional keyword arg &quot;report&quot; prints a summary at the end when true,</span>
<span class="sd">    else prints nothing at the end.  In verbose mode, the summary is</span>
<span class="sd">    detailed, else very brief (in fact, empty if all tests passed).</span>

<span class="sd">    Optional keyword arg &quot;optionflags&quot; or&#39;s together module constants,</span>
<span class="sd">    and defaults to 0.  This is new in 2.3.  Possible values (see the</span>
<span class="sd">    docs for details):</span>

<span class="sd">        DONT_ACCEPT_TRUE_FOR_1</span>
<span class="sd">        DONT_ACCEPT_BLANKLINE</span>
<span class="sd">        NORMALIZE_WHITESPACE</span>
<span class="sd">        ELLIPSIS</span>
<span class="sd">        SKIP</span>
<span class="sd">        IGNORE_EXCEPTION_DETAIL</span>
<span class="sd">        REPORT_UDIFF</span>
<span class="sd">        REPORT_CDIFF</span>
<span class="sd">        REPORT_NDIFF</span>
<span class="sd">        REPORT_ONLY_FIRST_FAILURE</span>

<span class="sd">    Optional keyword arg &quot;raise_on_error&quot; raises an exception on the</span>
<span class="sd">    first unexpected exception or failure. This allows failures to be</span>
<span class="sd">    post-mortem debugged.</span>

<span class="sd">    Advanced tomfoolery:  testmod runs methods of a local instance of</span>
<span class="sd">    class doctest.Tester, then merges the results into (or creates)</span>
<span class="sd">    global Tester instance doctest.master.  Methods of doctest.master</span>
<span class="sd">    can be called directly too, if you want to do something unusual.</span>
<span class="sd">    Passing report=0 to testmod is especially useful then, to delay</span>
<span class="sd">    displaying a summary.  Invoke doctest.master.summarize(verbose)</span>
<span class="sd">    when you&#39;re done fiddling.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">master</span>

    <span class="c1"># If no module was given, then use __main__.</span>
    <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># DWA - m will still be None if this wasn&#39;t invoked from the command</span>
        <span class="c1"># line, in which case the following TypeError is about as good an error</span>
        <span class="c1"># as we should expect</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;__main__&#39;</span><span class="p">)</span>

    <span class="c1"># Check that we were actually given a module.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismodule</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;testmod: module required; </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">m</span><span class="p">,))</span>

    <span class="c1"># If no name was given, then use the module&#39;s name.</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">__name__</span>

    <span class="c1"># Find, parse, and run all tests in the given module.</span>
    <span class="n">finder</span> <span class="o">=</span> <span class="n">DocTestFinder</span><span class="p">(</span><span class="n">exclude_empty</span><span class="o">=</span><span class="n">exclude_empty</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">raise_on_error</span><span class="p">:</span>
        <span class="n">runner</span> <span class="o">=</span> <span class="n">DebugRunner</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span> <span class="n">optionflags</span><span class="o">=</span><span class="n">optionflags</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">runner</span> <span class="o">=</span> <span class="n">DocTestRunner</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span> <span class="n">optionflags</span><span class="o">=</span><span class="n">optionflags</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">test</span> <span class="ow">in</span> <span class="n">finder</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">globs</span><span class="o">=</span><span class="n">globs</span><span class="p">,</span> <span class="n">extraglobs</span><span class="o">=</span><span class="n">extraglobs</span><span class="p">):</span>
        <span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">report</span><span class="p">:</span>
        <span class="n">runner</span><span class="o">.</span><span class="n">summarize</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">master</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">master</span> <span class="o">=</span> <span class="n">runner</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">master</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">runner</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">TestResults</span><span class="p">(</span><span class="n">runner</span><span class="o">.</span><span class="n">failures</span><span class="p">,</span> <span class="n">runner</span><span class="o">.</span><span class="n">tries</span><span class="p">)</span></div>

<div class="viewcode-block" id="testfile"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.testfile">[docs]</a><span class="k">def</span> <span class="nf">testfile</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">module_relative</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">package</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">globs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">report</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">optionflags</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
             <span class="n">extraglobs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">raise_on_error</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="n">DocTestParser</span><span class="p">(),</span>
             <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test examples in the given file.  Return (#failures, #tests).</span>

<span class="sd">    Optional keyword arg &quot;module_relative&quot; specifies how filenames</span>
<span class="sd">    should be interpreted:</span>

<span class="sd">      - If &quot;module_relative&quot; is True (the default), then &quot;filename&quot;</span>
<span class="sd">         specifies a module-relative path.  By default, this path is</span>
<span class="sd">         relative to the calling module&#39;s directory; but if the</span>
<span class="sd">         &quot;package&quot; argument is specified, then it is relative to that</span>
<span class="sd">         package.  To ensure os-independence, &quot;filename&quot; should use</span>
<span class="sd">         &quot;/&quot; characters to separate path segments, and should not</span>
<span class="sd">         be an absolute path (i.e., it may not begin with &quot;/&quot;).</span>

<span class="sd">      - If &quot;module_relative&quot; is False, then &quot;filename&quot; specifies an</span>
<span class="sd">        os-specific path.  The path may be absolute or relative (to</span>
<span class="sd">        the current working directory).</span>

<span class="sd">    Optional keyword arg &quot;name&quot; gives the name of the test; by default</span>
<span class="sd">    use the file&#39;s basename.</span>

<span class="sd">    Optional keyword argument &quot;package&quot; is a Python package or the</span>
<span class="sd">    name of a Python package whose directory should be used as the</span>
<span class="sd">    base directory for a module relative filename.  If no package is</span>
<span class="sd">    specified, then the calling module&#39;s directory is used as the base</span>
<span class="sd">    directory for module relative filenames.  It is an error to</span>
<span class="sd">    specify &quot;package&quot; if &quot;module_relative&quot; is False.</span>

<span class="sd">    Optional keyword arg &quot;globs&quot; gives a dict to be used as the globals</span>
<span class="sd">    when executing examples; by default, use {}.  A copy of this dict</span>
<span class="sd">    is actually used for each docstring, so that each docstring&#39;s</span>
<span class="sd">    examples start with a clean slate.</span>

<span class="sd">    Optional keyword arg &quot;extraglobs&quot; gives a dictionary that should be</span>
<span class="sd">    merged into the globals that are used to execute examples.  By</span>
<span class="sd">    default, no extra globals are used.</span>

<span class="sd">    Optional keyword arg &quot;verbose&quot; prints lots of stuff if true, prints</span>
<span class="sd">    only failures if false; by default, it&#39;s true iff &quot;-v&quot; is in sys.argv.</span>

<span class="sd">    Optional keyword arg &quot;report&quot; prints a summary at the end when true,</span>
<span class="sd">    else prints nothing at the end.  In verbose mode, the summary is</span>
<span class="sd">    detailed, else very brief (in fact, empty if all tests passed).</span>

<span class="sd">    Optional keyword arg &quot;optionflags&quot; or&#39;s together module constants,</span>
<span class="sd">    and defaults to 0.  Possible values (see the docs for details):</span>

<span class="sd">        DONT_ACCEPT_TRUE_FOR_1</span>
<span class="sd">        DONT_ACCEPT_BLANKLINE</span>
<span class="sd">        NORMALIZE_WHITESPACE</span>
<span class="sd">        ELLIPSIS</span>
<span class="sd">        SKIP</span>
<span class="sd">        IGNORE_EXCEPTION_DETAIL</span>
<span class="sd">        REPORT_UDIFF</span>
<span class="sd">        REPORT_CDIFF</span>
<span class="sd">        REPORT_NDIFF</span>
<span class="sd">        REPORT_ONLY_FIRST_FAILURE</span>

<span class="sd">    Optional keyword arg &quot;raise_on_error&quot; raises an exception on the</span>
<span class="sd">    first unexpected exception or failure. This allows failures to be</span>
<span class="sd">    post-mortem debugged.</span>

<span class="sd">    Optional keyword arg &quot;parser&quot; specifies a DocTestParser (or</span>
<span class="sd">    subclass) that should be used to extract tests from the files.</span>

<span class="sd">    Optional keyword arg &quot;encoding&quot; specifies an encoding that should</span>
<span class="sd">    be used to convert the file to unicode.</span>

<span class="sd">    Advanced tomfoolery:  testmod runs methods of a local instance of</span>
<span class="sd">    class doctest.Tester, then merges the results into (or creates)</span>
<span class="sd">    global Tester instance doctest.master.  Methods of doctest.master</span>
<span class="sd">    can be called directly too, if you want to do something unusual.</span>
<span class="sd">    Passing report=0 to testmod is especially useful then, to delay</span>
<span class="sd">    displaying a summary.  Invoke doctest.master.summarize(verbose)</span>
<span class="sd">    when you&#39;re done fiddling.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">master</span>

    <span class="k">if</span> <span class="n">package</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">module_relative</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Package may only be specified for module-&quot;</span>
                         <span class="s2">&quot;relative paths.&quot;</span><span class="p">)</span>

    <span class="c1"># Relativize the path</span>
    <span class="n">text</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="n">_load_testfile</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">package</span><span class="p">,</span> <span class="n">module_relative</span><span class="p">)</span>

    <span class="c1"># If no name was given, then use the file&#39;s name.</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="c1"># Assemble the globals.</span>
    <span class="k">if</span> <span class="n">globs</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">globs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">globs</span> <span class="o">=</span> <span class="n">globs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">extraglobs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">globs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">extraglobs</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;__name__&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">globs</span><span class="p">:</span>
        <span class="n">globs</span><span class="p">[</span><span class="s1">&#39;__name__&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;__main__&#39;</span>

    <span class="k">if</span> <span class="n">raise_on_error</span><span class="p">:</span>
        <span class="n">runner</span> <span class="o">=</span> <span class="n">DebugRunner</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span> <span class="n">optionflags</span><span class="o">=</span><span class="n">optionflags</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">runner</span> <span class="o">=</span> <span class="n">DocTestRunner</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span> <span class="n">optionflags</span><span class="o">=</span><span class="n">optionflags</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>

    <span class="c1"># Read the file, convert it to a test, and run it.</span>
    <span class="n">test</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">get_doctest</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">report</span><span class="p">:</span>
        <span class="n">runner</span><span class="o">.</span><span class="n">summarize</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">master</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">master</span> <span class="o">=</span> <span class="n">runner</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">master</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">runner</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">TestResults</span><span class="p">(</span><span class="n">runner</span><span class="o">.</span><span class="n">failures</span><span class="p">,</span> <span class="n">runner</span><span class="o">.</span><span class="n">tries</span><span class="p">)</span></div>

<div class="viewcode-block" id="run_docstring_examples"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.run_docstring_examples">[docs]</a><span class="k">def</span> <span class="nf">run_docstring_examples</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;NoName&quot;</span><span class="p">,</span>
                           <span class="n">compileflags</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">optionflags</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test examples in the given object&#39;s docstring (`f`), using `globs`</span>
<span class="sd">    as globals.  Optional argument `name` is used in failure messages.</span>
<span class="sd">    If the optional argument `verbose` is true, then generate output</span>
<span class="sd">    even if there are no failures.</span>

<span class="sd">    `compileflags` gives the set of flags that should be used by the</span>
<span class="sd">    Python compiler when running the examples.  If not specified, then</span>
<span class="sd">    it will default to the set of future-import flags that apply to</span>
<span class="sd">    `globs`.</span>

<span class="sd">    Optional keyword arg `optionflags` specifies options for the</span>
<span class="sd">    testing and output.  See the documentation for `testmod` for more</span>
<span class="sd">    information.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Find, parse, and run all tests in the given module.</span>
    <span class="n">finder</span> <span class="o">=</span> <span class="n">DocTestFinder</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span> <span class="n">recurse</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">runner</span> <span class="o">=</span> <span class="n">DocTestRunner</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span> <span class="n">optionflags</span><span class="o">=</span><span class="n">optionflags</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">test</span> <span class="ow">in</span> <span class="n">finder</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">globs</span><span class="o">=</span><span class="n">globs</span><span class="p">):</span>
        <span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">compileflags</span><span class="o">=</span><span class="n">compileflags</span><span class="p">)</span></div>

<span class="c1">######################################################################</span>
<span class="c1">## 7. Tester</span>
<span class="c1">######################################################################</span>
<span class="c1"># This is provided only for backwards compatibility.  It&#39;s not</span>
<span class="c1"># actually used in any way.</span>

<span class="k">class</span> <span class="nc">Tester</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">globs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">optionflags</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>

        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;class Tester is deprecated; &quot;</span>
                      <span class="s2">&quot;use class doctest.DocTestRunner instead&quot;</span><span class="p">,</span>
                      <span class="ne">DeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mod</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">globs</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Tester.__init__: must specify mod or globs&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mod</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismodule</span><span class="p">(</span><span class="n">mod</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Tester.__init__: mod must be a module; </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span>
                            <span class="p">(</span><span class="n">mod</span><span class="p">,))</span>
        <span class="k">if</span> <span class="n">globs</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">globs</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">__dict__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">globs</span> <span class="o">=</span> <span class="n">globs</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">verbose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optionflags</span> <span class="o">=</span> <span class="n">optionflags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">testfinder</span> <span class="o">=</span> <span class="n">DocTestFinder</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">testrunner</span> <span class="o">=</span> <span class="n">DocTestRunner</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
                                        <span class="n">optionflags</span><span class="o">=</span><span class="n">optionflags</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">runstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">test</span> <span class="o">=</span> <span class="n">DocTestParser</span><span class="p">()</span><span class="o">.</span><span class="n">get_doctest</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">globs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Running string&quot;</span><span class="p">,</span> <span class="n">name</span>
        <span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">testrunner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
            <span class="k">print</span> <span class="n">f</span><span class="p">,</span> <span class="s2">&quot;of&quot;</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="s2">&quot;examples failed in string&quot;</span><span class="p">,</span> <span class="n">name</span>
        <span class="k">return</span> <span class="n">TestResults</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">t</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">rundoc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">module</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">tests</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">testfinder</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">module</span><span class="o">=</span><span class="n">module</span><span class="p">,</span>
                                     <span class="n">globs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">globs</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">test</span> <span class="ow">in</span> <span class="n">tests</span><span class="p">:</span>
            <span class="p">(</span><span class="n">f2</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">testrunner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
            <span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">f</span><span class="o">+</span><span class="n">f2</span><span class="p">,</span> <span class="n">t</span><span class="o">+</span><span class="n">t2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">TestResults</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">t</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">rundict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">module</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">types</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">module</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">module</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rundoc</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">module</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run__test__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">types</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">__test__</span> <span class="o">=</span> <span class="n">d</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rundoc</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">summarize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">testrunner</span><span class="o">.</span><span class="n">summarize</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">testrunner</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">testrunner</span><span class="p">)</span>

<span class="c1">######################################################################</span>
<span class="c1">## 8. Unittest Support</span>
<span class="c1">######################################################################</span>

<span class="n">_unittest_reportflags</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="set_unittest_reportflags"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.set_unittest_reportflags">[docs]</a><span class="k">def</span> <span class="nf">set_unittest_reportflags</span><span class="p">(</span><span class="n">flags</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets the unittest option flags.</span>

<span class="sd">    The old flag is returned so that a runner could restore the old</span>
<span class="sd">    value if it wished to:</span>

<span class="sd">      &gt;&gt;&gt; import doctest</span>
<span class="sd">      &gt;&gt;&gt; old = doctest._unittest_reportflags</span>
<span class="sd">      &gt;&gt;&gt; doctest.set_unittest_reportflags(REPORT_NDIFF |</span>
<span class="sd">      ...                          REPORT_ONLY_FIRST_FAILURE) == old</span>
<span class="sd">      True</span>

<span class="sd">      &gt;&gt;&gt; doctest._unittest_reportflags == (REPORT_NDIFF |</span>
<span class="sd">      ...                                   REPORT_ONLY_FIRST_FAILURE)</span>
<span class="sd">      True</span>

<span class="sd">    Only reporting flags can be set:</span>

<span class="sd">      &gt;&gt;&gt; doctest.set_unittest_reportflags(ELLIPSIS)</span>
<span class="sd">      Traceback (most recent call last):</span>
<span class="sd">      ...</span>
<span class="sd">      ValueError: (&#39;Only reporting flags allowed&#39;, 8)</span>

<span class="sd">      &gt;&gt;&gt; doctest.set_unittest_reportflags(old) == (REPORT_NDIFF |</span>
<span class="sd">      ...                                   REPORT_ONLY_FIRST_FAILURE)</span>
<span class="sd">      True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_unittest_reportflags</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">flags</span> <span class="o">&amp;</span> <span class="n">REPORTING_FLAGS</span><span class="p">)</span> <span class="o">!=</span> <span class="n">flags</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Only reporting flags allowed&quot;</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
    <span class="n">old</span> <span class="o">=</span> <span class="n">_unittest_reportflags</span>
    <span class="n">_unittest_reportflags</span> <span class="o">=</span> <span class="n">flags</span>
    <span class="k">return</span> <span class="n">old</span></div>


<span class="k">class</span> <span class="nc">DocTestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">optionflags</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">setUp</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">tearDown</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">checker</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dt_optionflags</span> <span class="o">=</span> <span class="n">optionflags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dt_checker</span> <span class="o">=</span> <span class="n">checker</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dt_test</span> <span class="o">=</span> <span class="n">test</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dt_setUp</span> <span class="o">=</span> <span class="n">setUp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dt_tearDown</span> <span class="o">=</span> <span class="n">tearDown</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">test</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dt_test</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dt_setUp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dt_setUp</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">test</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dt_test</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dt_tearDown</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dt_tearDown</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>

        <span class="n">test</span><span class="o">.</span><span class="n">globs</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">runTest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">test</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dt_test</span>
        <span class="n">old</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
        <span class="n">optionflags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dt_optionflags</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">optionflags</span> <span class="o">&amp;</span> <span class="n">REPORTING_FLAGS</span><span class="p">):</span>
            <span class="c1"># The option flags don&#39;t include any reporting flags,</span>
            <span class="c1"># so add the default reporting flags</span>
            <span class="n">optionflags</span> <span class="o">|=</span> <span class="n">_unittest_reportflags</span>

        <span class="n">runner</span> <span class="o">=</span> <span class="n">DocTestRunner</span><span class="p">(</span><span class="n">optionflags</span><span class="o">=</span><span class="n">optionflags</span><span class="p">,</span>
                               <span class="n">checker</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dt_checker</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">runner</span><span class="o">.</span><span class="n">DIVIDER</span> <span class="o">=</span> <span class="s2">&quot;-&quot;</span><span class="o">*</span><span class="mi">70</span>
            <span class="n">failures</span><span class="p">,</span> <span class="n">tries</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
                <span class="n">test</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">new</span><span class="o">.</span><span class="n">write</span><span class="p">,</span> <span class="n">clear_globs</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">old</span>

        <span class="k">if</span> <span class="n">failures</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">failureException</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">format_failure</span><span class="p">(</span><span class="n">new</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()))</span>

    <span class="k">def</span> <span class="nf">format_failure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">err</span><span class="p">):</span>
        <span class="n">test</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dt_test</span>
        <span class="k">if</span> <span class="n">test</span><span class="o">.</span><span class="n">lineno</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">lineno</span> <span class="o">=</span> <span class="s1">&#39;unknown line number&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lineno</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">test</span><span class="o">.</span><span class="n">lineno</span>
        <span class="n">lname</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;Failed doctest test for </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;  File &quot;</span><span class="si">%s</span><span class="s1">&quot;, line </span><span class="si">%s</span><span class="s1">, in </span><span class="si">%s</span><span class="se">\n\n</span><span class="si">%s</span><span class="s1">&#39;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">test</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
                <span class="p">)</span>

    <span class="k">def</span> <span class="nf">debug</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">r&quot;&quot;&quot;Run the test case without results and without catching exceptions</span>

<span class="sd">           The unit test framework includes a debug method on test cases</span>
<span class="sd">           and test suites to support post-mortem debugging.  The test code</span>
<span class="sd">           is run in such a way that errors are not caught.  This way a</span>
<span class="sd">           caller can catch the errors and initiate post-mortem debugging.</span>

<span class="sd">           The DocTestCase provides a debug method that raises</span>
<span class="sd">           UnexpectedException errors if there is an unexpected</span>
<span class="sd">           exception:</span>

<span class="sd">             &gt;&gt;&gt; test = DocTestParser().get_doctest(&#39;&gt;&gt;&gt; raise KeyError\n42&#39;,</span>
<span class="sd">             ...                {}, &#39;foo&#39;, &#39;foo.py&#39;, 0)</span>
<span class="sd">             &gt;&gt;&gt; case = DocTestCase(test)</span>
<span class="sd">             &gt;&gt;&gt; try:</span>
<span class="sd">             ...     case.debug()</span>
<span class="sd">             ... except UnexpectedException, failure:</span>
<span class="sd">             ...     pass</span>

<span class="sd">           The UnexpectedException contains the test, the example, and</span>
<span class="sd">           the original exception:</span>

<span class="sd">             &gt;&gt;&gt; failure.test is test</span>
<span class="sd">             True</span>

<span class="sd">             &gt;&gt;&gt; failure.example.want</span>
<span class="sd">             &#39;42\n&#39;</span>

<span class="sd">             &gt;&gt;&gt; exc_info = failure.exc_info</span>
<span class="sd">             &gt;&gt;&gt; raise exc_info[0], exc_info[1], exc_info[2]</span>
<span class="sd">             Traceback (most recent call last):</span>
<span class="sd">             ...</span>
<span class="sd">             KeyError</span>

<span class="sd">           If the output doesn&#39;t match, then a DocTestFailure is raised:</span>

<span class="sd">             &gt;&gt;&gt; test = DocTestParser().get_doctest(&#39;&#39;&#39;</span>
<span class="sd">             ...      &gt;&gt;&gt; x = 1</span>
<span class="sd">             ...      &gt;&gt;&gt; x</span>
<span class="sd">             ...      2</span>
<span class="sd">             ...      &#39;&#39;&#39;, {}, &#39;foo&#39;, &#39;foo.py&#39;, 0)</span>
<span class="sd">             &gt;&gt;&gt; case = DocTestCase(test)</span>

<span class="sd">             &gt;&gt;&gt; try:</span>
<span class="sd">             ...    case.debug()</span>
<span class="sd">             ... except DocTestFailure, failure:</span>
<span class="sd">             ...    pass</span>

<span class="sd">           DocTestFailure objects provide access to the test:</span>

<span class="sd">             &gt;&gt;&gt; failure.test is test</span>
<span class="sd">             True</span>

<span class="sd">           As well as to the example:</span>

<span class="sd">             &gt;&gt;&gt; failure.example.want</span>
<span class="sd">             &#39;2\n&#39;</span>

<span class="sd">           and the actual output:</span>

<span class="sd">             &gt;&gt;&gt; failure.got</span>
<span class="sd">             &#39;1\n&#39;</span>

<span class="sd">           &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="n">runner</span> <span class="o">=</span> <span class="n">DebugRunner</span><span class="p">(</span><span class="n">optionflags</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dt_optionflags</span><span class="p">,</span>
                             <span class="n">checker</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dt_checker</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dt_test</span><span class="p">,</span> <span class="n">clear_globs</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tearDown</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dt_test</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dt_test</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_dt_test</span> <span class="ow">and</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">_dt_optionflags</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_dt_optionflags</span> <span class="ow">and</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">_dt_setUp</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_dt_setUp</span> <span class="ow">and</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">_dt_tearDown</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_dt_tearDown</span> <span class="ow">and</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">_dt_checker</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_dt_checker</span>

    <span class="k">def</span> <span class="nf">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

    <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_dt_optionflags</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dt_setUp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dt_tearDown</span><span class="p">,</span>
                     <span class="bp">self</span><span class="o">.</span><span class="n">_dt_checker</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dt_test</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">name</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>

    <span class="n">__str__</span> <span class="o">=</span> <span class="n">__repr__</span>

    <span class="k">def</span> <span class="nf">shortDescription</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Doctest: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dt_test</span><span class="o">.</span><span class="n">name</span>

<span class="k">class</span> <span class="nc">SkipDocTestCase</span><span class="p">(</span><span class="n">DocTestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module</span> <span class="o">=</span> <span class="n">module</span>
        <span class="n">DocTestCase</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skipTest</span><span class="p">(</span><span class="s2">&quot;DocTestSuite will not work with -O2 and above&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_skip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">shortDescription</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Skipping tests from </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">__name__</span>

    <span class="n">__str__</span> <span class="o">=</span> <span class="n">shortDescription</span>


<div class="viewcode-block" id="DocTestSuite"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocTestSuite">[docs]</a><span class="k">def</span> <span class="nf">DocTestSuite</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">globs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">extraglobs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">test_finder</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">options</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert doctest tests for a module to a unittest test suite.</span>

<span class="sd">    This converts each documentation string in a module that</span>
<span class="sd">    contains doctest tests to a unittest test case.  If any of the</span>
<span class="sd">    tests in a doc string fail, then the test case fails.  An exception</span>
<span class="sd">    is raised showing the name of the file containing the test and a</span>
<span class="sd">    (sometimes approximate) line number.</span>

<span class="sd">    The `module` argument provides the module to be tested.  The argument</span>
<span class="sd">    can be either a module or a module name.</span>

<span class="sd">    If no argument is given, the calling module is used.</span>

<span class="sd">    A number of options may be provided as keyword arguments:</span>

<span class="sd">    setUp</span>
<span class="sd">      A set-up function.  This is called before running the</span>
<span class="sd">      tests in each file. The setUp function will be passed a DocTest</span>
<span class="sd">      object.  The setUp function can access the test globals as the</span>
<span class="sd">      globs attribute of the test passed.</span>

<span class="sd">    tearDown</span>
<span class="sd">      A tear-down function.  This is called after running the</span>
<span class="sd">      tests in each file.  The tearDown function will be passed a DocTest</span>
<span class="sd">      object.  The tearDown function can access the test globals as the</span>
<span class="sd">      globs attribute of the test passed.</span>

<span class="sd">    globs</span>
<span class="sd">      A dictionary containing initial global variables for the tests.</span>

<span class="sd">    optionflags</span>
<span class="sd">       A set of doctest option flags expressed as an integer.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">test_finder</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">test_finder</span> <span class="o">=</span> <span class="n">DocTestFinder</span><span class="p">()</span>

    <span class="n">module</span> <span class="o">=</span> <span class="n">_normalize_module</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>
    <span class="n">tests</span> <span class="o">=</span> <span class="n">test_finder</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">globs</span><span class="o">=</span><span class="n">globs</span><span class="p">,</span> <span class="n">extraglobs</span><span class="o">=</span><span class="n">extraglobs</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">tests</span> <span class="ow">and</span> <span class="n">sys</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">optimize</span> <span class="o">&gt;=</span><span class="mi">2</span><span class="p">:</span>
        <span class="c1"># Skip doctests when running with -O2</span>
        <span class="n">suite</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestSuite</span><span class="p">()</span>
        <span class="n">suite</span><span class="o">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">SkipDocTestCase</span><span class="p">(</span><span class="n">module</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">suite</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">tests</span><span class="p">:</span>
        <span class="c1"># Why do we want to do this? Because it reveals a bug that might</span>
        <span class="c1"># otherwise be hidden.</span>
        <span class="c1"># It is probably a bug that this exception is not also raised if the</span>
        <span class="c1"># number of doctest examples in tests is zero (i.e. if no doctest</span>
        <span class="c1"># examples were found).  However, we should probably not be raising</span>
        <span class="c1"># an exception at all here, though it is too late to make this change</span>
        <span class="c1"># for a maintenance release.  See also issue #14649.</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="s2">&quot;has no docstrings&quot;</span><span class="p">)</span>

    <span class="n">tests</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="n">suite</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestSuite</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">test</span> <span class="ow">in</span> <span class="n">tests</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">examples</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">test</span><span class="o">.</span><span class="n">filename</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">__file__</span>
            <span class="k">if</span> <span class="n">filename</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;.pyc&quot;</span><span class="p">,</span> <span class="s2">&quot;.pyo&quot;</span><span class="p">):</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">test</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="n">suite</span><span class="o">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">DocTestCase</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">suite</span></div>

<span class="k">class</span> <span class="nc">DocFileCase</span><span class="p">(</span><span class="n">DocTestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;_&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dt_test</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dt_test</span><span class="o">.</span><span class="n">filename</span>
    <span class="n">__str__</span> <span class="o">=</span> <span class="n">__repr__</span>

    <span class="k">def</span> <span class="nf">format_failure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">err</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;Failed doctest test for </span><span class="si">%s</span><span class="se">\n</span><span class="s1">  File &quot;</span><span class="si">%s</span><span class="s1">&quot;, line 0</span><span class="se">\n\n</span><span class="si">%s</span><span class="s1">&#39;</span>
                <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dt_test</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dt_test</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
                <span class="p">)</span>

<span class="k">def</span> <span class="nf">DocFileTest</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">module_relative</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">package</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                <span class="n">globs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="n">DocTestParser</span><span class="p">(),</span>
                <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">globs</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">globs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">globs</span> <span class="o">=</span> <span class="n">globs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">package</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">module_relative</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Package may only be specified for module-&quot;</span>
                         <span class="s2">&quot;relative paths.&quot;</span><span class="p">)</span>

    <span class="c1"># Relativize the path.</span>
    <span class="n">doc</span><span class="p">,</span> <span class="n">path</span> <span class="o">=</span> <span class="n">_load_testfile</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">package</span><span class="p">,</span> <span class="n">module_relative</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;__file__&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">globs</span><span class="p">:</span>
        <span class="n">globs</span><span class="p">[</span><span class="s2">&quot;__file__&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">path</span>

    <span class="c1"># Find the file and read it.</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="c1"># If an encoding is specified, use it to convert the file to unicode</span>
    <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>

    <span class="c1"># Convert it to a test, and wrap it in a DocFileCase.</span>
    <span class="n">test</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">get_doctest</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">DocFileCase</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>

<div class="viewcode-block" id="DocFileSuite"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.DocFileSuite">[docs]</a><span class="k">def</span> <span class="nf">DocFileSuite</span><span class="p">(</span><span class="o">*</span><span class="n">paths</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A unittest suite for one or more doctest files.</span>

<span class="sd">    The path to each doctest file is given as a string; the</span>
<span class="sd">    interpretation of that string depends on the keyword argument</span>
<span class="sd">    &quot;module_relative&quot;.</span>

<span class="sd">    A number of options may be provided as keyword arguments:</span>

<span class="sd">    module_relative</span>
<span class="sd">      If &quot;module_relative&quot; is True, then the given file paths are</span>
<span class="sd">      interpreted as os-independent module-relative paths.  By</span>
<span class="sd">      default, these paths are relative to the calling module&#39;s</span>
<span class="sd">      directory; but if the &quot;package&quot; argument is specified, then</span>
<span class="sd">      they are relative to that package.  To ensure os-independence,</span>
<span class="sd">      &quot;filename&quot; should use &quot;/&quot; characters to separate path</span>
<span class="sd">      segments, and may not be an absolute path (i.e., it may not</span>
<span class="sd">      begin with &quot;/&quot;).</span>

<span class="sd">      If &quot;module_relative&quot; is False, then the given file paths are</span>
<span class="sd">      interpreted as os-specific paths.  These paths may be absolute</span>
<span class="sd">      or relative (to the current working directory).</span>

<span class="sd">    package</span>
<span class="sd">      A Python package or the name of a Python package whose directory</span>
<span class="sd">      should be used as the base directory for module relative paths.</span>
<span class="sd">      If &quot;package&quot; is not specified, then the calling module&#39;s</span>
<span class="sd">      directory is used as the base directory for module relative</span>
<span class="sd">      filenames.  It is an error to specify &quot;package&quot; if</span>
<span class="sd">      &quot;module_relative&quot; is False.</span>

<span class="sd">    setUp</span>
<span class="sd">      A set-up function.  This is called before running the</span>
<span class="sd">      tests in each file. The setUp function will be passed a DocTest</span>
<span class="sd">      object.  The setUp function can access the test globals as the</span>
<span class="sd">      globs attribute of the test passed.</span>

<span class="sd">    tearDown</span>
<span class="sd">      A tear-down function.  This is called after running the</span>
<span class="sd">      tests in each file.  The tearDown function will be passed a DocTest</span>
<span class="sd">      object.  The tearDown function can access the test globals as the</span>
<span class="sd">      globs attribute of the test passed.</span>

<span class="sd">    globs</span>
<span class="sd">      A dictionary containing initial global variables for the tests.</span>

<span class="sd">    optionflags</span>
<span class="sd">      A set of doctest option flags expressed as an integer.</span>

<span class="sd">    parser</span>
<span class="sd">      A DocTestParser (or subclass) that should be used to extract</span>
<span class="sd">      tests from the files.</span>

<span class="sd">    encoding</span>
<span class="sd">      An encoding that will be used to convert the files to unicode.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">suite</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestSuite</span><span class="p">()</span>

    <span class="c1"># We do this here so that _normalize_module is called at the right</span>
    <span class="c1"># level.  If it were called in DocFileTest, then this function</span>
    <span class="c1"># would be the caller and we might guess the package incorrectly.</span>
    <span class="k">if</span> <span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;module_relative&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;package&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_normalize_module</span><span class="p">(</span><span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;package&#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
        <span class="n">suite</span><span class="o">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">DocFileTest</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">suite</span></div>

<span class="c1">######################################################################</span>
<span class="c1">## 9. Debugging Support</span>
<span class="c1">######################################################################</span>

<div class="viewcode-block" id="script_from_examples"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.script_from_examples">[docs]</a><span class="k">def</span> <span class="nf">script_from_examples</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">r&quot;&quot;&quot;Extract script from text with examples.</span>

<span class="sd">       Converts text with examples to a Python script.  Example input is</span>
<span class="sd">       converted to regular code.  Example output and all other words</span>
<span class="sd">       are converted to comments:</span>

<span class="sd">       &gt;&gt;&gt; text = &#39;&#39;&#39;</span>
<span class="sd">       ...       Here are examples of simple math.</span>
<span class="sd">       ...</span>
<span class="sd">       ...           Python has super accurate integer addition</span>
<span class="sd">       ...</span>
<span class="sd">       ...           &gt;&gt;&gt; 2 + 2</span>
<span class="sd">       ...           5</span>
<span class="sd">       ...</span>
<span class="sd">       ...           And very friendly error messages:</span>
<span class="sd">       ...</span>
<span class="sd">       ...           &gt;&gt;&gt; 1/0</span>
<span class="sd">       ...           To Infinity</span>
<span class="sd">       ...           And</span>
<span class="sd">       ...           Beyond</span>
<span class="sd">       ...</span>
<span class="sd">       ...           You can use logic if you want:</span>
<span class="sd">       ...</span>
<span class="sd">       ...           &gt;&gt;&gt; if 0:</span>
<span class="sd">       ...           ...    blah</span>
<span class="sd">       ...           ...    blah</span>
<span class="sd">       ...           ...</span>
<span class="sd">       ...</span>
<span class="sd">       ...           Ho hum</span>
<span class="sd">       ...           &#39;&#39;&#39;</span>

<span class="sd">       &gt;&gt;&gt; print script_from_examples(text)</span>
<span class="sd">       # Here are examples of simple math.</span>
<span class="sd">       #</span>
<span class="sd">       #     Python has super accurate integer addition</span>
<span class="sd">       #</span>
<span class="sd">       2 + 2</span>
<span class="sd">       # Expected:</span>
<span class="sd">       ## 5</span>
<span class="sd">       #</span>
<span class="sd">       #     And very friendly error messages:</span>
<span class="sd">       #</span>
<span class="sd">       1/0</span>
<span class="sd">       # Expected:</span>
<span class="sd">       ## To Infinity</span>
<span class="sd">       ## And</span>
<span class="sd">       ## Beyond</span>
<span class="sd">       #</span>
<span class="sd">       #     You can use logic if you want:</span>
<span class="sd">       #</span>
<span class="sd">       if 0:</span>
<span class="sd">          blah</span>
<span class="sd">          blah</span>
<span class="sd">       #</span>
<span class="sd">       #     Ho hum</span>
<span class="sd">       &lt;BLANKLINE&gt;</span>
<span class="sd">       &quot;&quot;&quot;</span>
    <span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">piece</span> <span class="ow">in</span> <span class="n">DocTestParser</span><span class="p">()</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">piece</span><span class="p">,</span> <span class="n">Example</span><span class="p">):</span>
            <span class="c1"># Add the example&#39;s source code (strip trailing NL)</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">piece</span><span class="o">.</span><span class="n">source</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="c1"># Add the expected output:</span>
            <span class="n">want</span> <span class="o">=</span> <span class="n">piece</span><span class="o">.</span><span class="n">want</span>
            <span class="k">if</span> <span class="n">want</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;# Expected:&#39;</span><span class="p">)</span>
                <span class="n">output</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;## &#39;</span><span class="o">+</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">want</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Add non-example text.</span>
            <span class="n">output</span> <span class="o">+=</span> <span class="p">[</span><span class="n">_comment_line</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
                       <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">piece</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>

    <span class="c1"># Trim junk on both ends.</span>
    <span class="k">while</span> <span class="n">output</span> <span class="ow">and</span> <span class="n">output</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;#&#39;</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">while</span> <span class="n">output</span> <span class="ow">and</span> <span class="n">output</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;#&#39;</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1"># Combine the output, and return it.</span>
    <span class="c1"># Add a courtesy newline to prevent exec from choking (see bug #1172785)</span>
    <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span></div>

<div class="viewcode-block" id="testsource"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.testsource">[docs]</a><span class="k">def</span> <span class="nf">testsource</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extract the test sources from a doctest docstring as a script.</span>

<span class="sd">    Provide the module (or dotted name of the module) containing the</span>
<span class="sd">    test to be debugged and the name (within the module) of the object</span>
<span class="sd">    with the doc string with tests to be debugged.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">module</span> <span class="o">=</span> <span class="n">_normalize_module</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>
    <span class="n">tests</span> <span class="o">=</span> <span class="n">DocTestFinder</span><span class="p">()</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>
    <span class="n">test</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tests</span> <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">test</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;not found in tests&quot;</span><span class="p">)</span>
    <span class="n">test</span> <span class="o">=</span> <span class="n">test</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">testsrc</span> <span class="o">=</span> <span class="n">script_from_examples</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">docstring</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">testsrc</span></div>

<div class="viewcode-block" id="debug_src"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.debug_src">[docs]</a><span class="k">def</span> <span class="nf">debug_src</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">pm</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">globs</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Debug a single doctest docstring, in argument `src`&#39;&quot;&quot;&quot;</span>
    <span class="n">testsrc</span> <span class="o">=</span> <span class="n">script_from_examples</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
    <span class="n">debug_script</span><span class="p">(</span><span class="n">testsrc</span><span class="p">,</span> <span class="n">pm</span><span class="p">,</span> <span class="n">globs</span><span class="p">)</span></div>

<span class="k">def</span> <span class="nf">debug_script</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">pm</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">globs</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="s2">&quot;Debug a test script.  `src` is the script, as a string.&quot;</span>
    <span class="kn">import</span> <span class="nn">pdb</span>

    <span class="c1"># Note that tempfile.NameTemporaryFile() cannot be used.  As the</span>
    <span class="c1"># docs say, a file so created cannot be opened by name a second time</span>
    <span class="c1"># on modern Windows boxes, and execfile() needs to open it.</span>
    <span class="n">srcfilename</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mktemp</span><span class="p">(</span><span class="s2">&quot;.py&quot;</span><span class="p">,</span> <span class="s2">&quot;doctestdebug&quot;</span><span class="p">)</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">srcfilename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">globs</span><span class="p">:</span>
            <span class="n">globs</span> <span class="o">=</span> <span class="n">globs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">globs</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">pm</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">execfile</span><span class="p">(</span><span class="n">srcfilename</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">globs</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">print</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">pdb</span><span class="o">.</span><span class="n">post_mortem</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Note that %r is vital here.  &#39;%s&#39; instead can, e.g., cause</span>
            <span class="c1"># backslashes to get treated as metacharacters on Windows.</span>
            <span class="n">pdb</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;execfile(</span><span class="si">%r</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">srcfilename</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">globs</span><span class="p">)</span>

    <span class="k">finally</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">srcfilename</span><span class="p">)</span>

<div class="viewcode-block" id="debug"><a class="viewcode-back" href="../25_devtools/doctest.html#doctest.debug">[docs]</a><span class="k">def</span> <span class="nf">debug</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">pm</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Debug a single doctest docstring.</span>

<span class="sd">    Provide the module (or dotted name of the module) containing the</span>
<span class="sd">    test to be debugged and the name (within the module) of the object</span>
<span class="sd">    with the docstring with tests to be debugged.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">module</span> <span class="o">=</span> <span class="n">_normalize_module</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>
    <span class="n">testsrc</span> <span class="o">=</span> <span class="n">testsource</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="n">debug_script</span><span class="p">(</span><span class="n">testsrc</span><span class="p">,</span> <span class="n">pm</span><span class="p">,</span> <span class="n">module</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span></div>

<span class="c1">######################################################################</span>
<span class="c1">## 10. Example Usage</span>
<span class="c1">######################################################################</span>
<span class="k">class</span> <span class="nc">_TestClass</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A pointless class, for sanity-checking of docstring testing.</span>

<span class="sd">    Methods:</span>
<span class="sd">        square()</span>
<span class="sd">        get()</span>

<span class="sd">    &gt;&gt;&gt; _TestClass(13).get() + _TestClass(-12).get()</span>
<span class="sd">    1</span>
<span class="sd">    &gt;&gt;&gt; hex(_TestClass(13).square().get())</span>
<span class="sd">    &#39;0xa9&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;val -&gt; _TestClass object with associated value val.</span>

<span class="sd">        &gt;&gt;&gt; t = _TestClass(123)</span>
<span class="sd">        &gt;&gt;&gt; print t.get()</span>
<span class="sd">        123</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">=</span> <span class="n">val</span>

    <span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;square() -&gt; square TestClass&#39;s associated value</span>

<span class="sd">        &gt;&gt;&gt; _TestClass(13).square().get()</span>
<span class="sd">        169</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">**</span> <span class="mi">2</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;get() -&gt; return TestClass&#39;s associated value.</span>

<span class="sd">        &gt;&gt;&gt; x = _TestClass(-42)</span>
<span class="sd">        &gt;&gt;&gt; print x.get()</span>
<span class="sd">        -42</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span>

<span class="n">__test__</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;_TestClass&quot;</span><span class="p">:</span> <span class="n">_TestClass</span><span class="p">,</span>
            <span class="s2">&quot;string&quot;</span><span class="p">:</span> <span class="s2">r&quot;&quot;&quot;</span>
<span class="s2">                      Example of a string object, searched as-is.</span>
<span class="s2">                      &gt;&gt;&gt; x = 1; y = 2</span>
<span class="s2">                      &gt;&gt;&gt; x + y, x * y</span>
<span class="s2">                      (3, 2)</span>
<span class="s2">                      &quot;&quot;&quot;</span><span class="p">,</span>

            <span class="s2">&quot;bool-int equivalence&quot;</span><span class="p">:</span> <span class="s2">r&quot;&quot;&quot;</span>
<span class="s2">                                    In 2.2, boolean expressions displayed</span>
<span class="s2">                                    0 or 1.  By default, we still accept</span>
<span class="s2">                                    them.  This can be disabled by passing</span>
<span class="s2">                                    DONT_ACCEPT_TRUE_FOR_1 to the new</span>
<span class="s2">                                    optionflags argument.</span>
<span class="s2">                                    &gt;&gt;&gt; 4 == 4</span>
<span class="s2">                                    1</span>
<span class="s2">                                    &gt;&gt;&gt; 4 == 4</span>
<span class="s2">                                    True</span>
<span class="s2">                                    &gt;&gt;&gt; 4 &gt; 4</span>
<span class="s2">                                    0</span>
<span class="s2">                                    &gt;&gt;&gt; 4 &gt; 4</span>
<span class="s2">                                    False</span>
<span class="s2">                                    &quot;&quot;&quot;</span><span class="p">,</span>

            <span class="s2">&quot;blank lines&quot;</span><span class="p">:</span> <span class="s2">r&quot;&quot;&quot;</span>
<span class="s2">                Blank lines can be marked with &lt;BLANKLINE&gt;:</span>
<span class="s2">                    &gt;&gt;&gt; print &#39;foo\n\nbar\n&#39;</span>
<span class="s2">                    foo</span>
<span class="s2">                    &lt;BLANKLINE&gt;</span>
<span class="s2">                    bar</span>
<span class="s2">                    &lt;BLANKLINE&gt;</span>
<span class="s2">            &quot;&quot;&quot;</span><span class="p">,</span>

            <span class="s2">&quot;ellipsis&quot;</span><span class="p">:</span> <span class="s2">r&quot;&quot;&quot;</span>
<span class="s2">                If the ellipsis flag is used, then &#39;...&#39; can be used to</span>
<span class="s2">                elide substrings in the desired output:</span>
<span class="s2">                    &gt;&gt;&gt; print range(1000) #doctest: +ELLIPSIS</span>
<span class="s2">                    [0, 1, 2, ..., 999]</span>
<span class="s2">            &quot;&quot;&quot;</span><span class="p">,</span>

            <span class="s2">&quot;whitespace normalization&quot;</span><span class="p">:</span> <span class="s2">r&quot;&quot;&quot;</span>
<span class="s2">                If the whitespace normalization flag is used, then</span>
<span class="s2">                differences in whitespace are ignored.</span>
<span class="s2">                    &gt;&gt;&gt; print range(30) #doctest: +NORMALIZE_WHITESPACE</span>
<span class="s2">                    [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14,</span>
<span class="s2">                     15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26,</span>
<span class="s2">                     27, 28, 29]</span>
<span class="s2">            &quot;&quot;&quot;</span><span class="p">,</span>
           <span class="p">}</span>


<span class="k">def</span> <span class="nf">_test</span><span class="p">():</span>
    <span class="n">testfiles</span> <span class="o">=</span> <span class="p">[</span><span class="n">arg</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="k">if</span> <span class="n">arg</span> <span class="ow">and</span> <span class="n">arg</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;-&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">testfiles</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;__loader__&#39;</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">():</span>          <span class="c1"># python -m</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;usage: {0} [-v] file ...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
        <span class="k">return</span> <span class="mi">2</span>
    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">testfiles</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.py&quot;</span><span class="p">):</span>
            <span class="c1"># It is a module -- insert its dir into sys.path and try to</span>
            <span class="c1"># import it. If it is part of a package, that possibly</span>
            <span class="c1"># won&#39;t work because of package imports.</span>
            <span class="n">dirname</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">dirname</span><span class="p">)</span>
            <span class="n">m</span> <span class="o">=</span> <span class="nb">__import__</span><span class="p">(</span><span class="n">filename</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">])</span>
            <span class="k">del</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">failures</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">testmod</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">failures</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">testfile</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">module_relative</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">failures</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="mi">0</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">_test</span><span class="p">())</span>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/copybutton.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>